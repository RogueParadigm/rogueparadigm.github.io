"use strict";(globalThis.webpackChunkelysgenai_docs=globalThis.webpackChunkelysgenai_docs||[]).push([[145],{7793(n,e,r){r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"HybridPattern","title":"Hybrid Pattern Explained","description":"Understanding why ElysGenAI uses plain C++ structs + UObject component wrappers.","source":"@site/../Documentation/HybridPattern.md","sourceDirName":".","slug":"/HybridPattern","permalink":"/ElysGenAIPlugin/HybridPattern","draft":false,"unlisted":false,"editUrl":"https://github.com/RogueParadigm/ElysGenAIPlugin/tree/main/Documentation/../Documentation/HybridPattern.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"HybridPattern","title":"Hybrid Pattern Explained","sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Architecture Overview","permalink":"/ElysGenAIPlugin/Architecture"},"next":{"title":"Multiplayer Guide","permalink":"/ElysGenAIPlugin/MultiplayerGuide"}}');var i=r(4848),s=r(8453);const l={id:"HybridPattern",title:"Hybrid Pattern Explained",sidebar_position:5},o="Hybrid Pattern Explained",c={},a=[{value:"The Problem",id:"the-problem",level:2},{value:"Approach 1: Pure UObject",id:"approach-1-pure-uobject",level:3},{value:"Approach 2: Pure C++ Struct",id:"approach-2-pure-c-struct",level:3},{value:"The Solution: Hybrid Pattern",id:"the-solution-hybrid-pattern",level:2},{value:"Plain C++ Struct (Internal Logic)",id:"plain-c-struct-internal-logic",level:3},{value:"UObject Component (Blueprint API)",id:"uobject-component-blueprint-api",level:3},{value:"How They Work Together",id:"how-they-work-together",level:2},{value:"Ownership",id:"ownership",level:3},{value:"Method Forwarding",id:"method-forwarding",level:3},{value:"Data Flow",id:"data-flow",level:3},{value:"Benefits",id:"benefits",level:2},{value:"Performance",id:"performance",level:3},{value:"Scalability",id:"scalability",level:3},{value:"Flexibility",id:"flexibility",level:3},{value:"Pattern in Action",id:"pattern-in-action",level:2},{value:"STT Example",id:"stt-example",level:3},{value:"LLM Example",id:"llm-example",level:3},{value:"Comparison to Other Patterns",id:"comparison-to-other-patterns",level:2},{value:"vs Actor Components Only",id:"vs-actor-components-only",level:3},{value:"vs Subsystems Only",id:"vs-subsystems-only",level:3},{value:"vs Data-Only Structs",id:"vs-data-only-structs",level:3},{value:"When to Use Hybrid Pattern",id:"when-to-use-hybrid-pattern",level:2},{value:"\u2705 Use Hybrid When:",id:"-use-hybrid-when",level:3},{value:"\u274c Don&#39;t Use Hybrid When:",id:"-dont-use-hybrid-when",level:3},{value:"Implementation Guidelines",id:"implementation-guidelines",level:2},{value:"1. Context Lifetime",id:"1-context-lifetime",level:3},{value:"2. Event Forwarding",id:"2-event-forwarding",level:3},{value:"3. State Synchronization",id:"3-state-synchronization",level:3},{value:"Advanced: Custom Contexts",id:"advanced-custom-contexts",level:2},{value:"Summary",id:"summary",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"hybrid-pattern-explained",children:"Hybrid Pattern Explained"})}),"\n",(0,i.jsxs)(e.p,{children:["Understanding why ElysGenAI uses ",(0,i.jsx)(e.strong,{children:"plain C++ structs + UObject component wrappers"}),"."]}),"\n",(0,i.jsx)(e.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,i.jsx)(e.p,{children:"Traditional Unreal Engine approaches have tradeoffs:"}),"\n",(0,i.jsx)(e.h3,{id:"approach-1-pure-uobject",children:"Approach 1: Pure UObject"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"UCLASS()\r\nclass UERP_STTContext : public UObject\r\n{\r\n    // Everything is a UObject\r\n    TArray<float> AudioBuffer;     // \u274c UObject overhead\r\n    FElysSTTResult LastResult;     // \u274c Garbage collection\r\n    // ... heavy processing logic  // \u274c Not ideal for hot paths\r\n};\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Downsides:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u274c UObject overhead (~200 bytes per instance)"}),"\n",(0,i.jsx)(e.li,{children:"\u274c Garbage collection pressure"}),"\n",(0,i.jsx)(e.li,{children:"\u274c Slower allocation/deallocation"}),"\n",(0,i.jsx)(e.li,{children:"\u274c Not cache-friendly for tight loops"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"approach-2-pure-c-struct",children:"Approach 2: Pure C++ Struct"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"struct FElysSTTContext\r\n{\r\n    // Plain C++ struct\r\n    TArray<float> AudioBuffer;     // \u2705 No overhead\r\n    FElysSTTResult LastResult;     // \u2705 Stack/heap efficient\r\n    // ... heavy processing logic  // \u2705 Fast\r\n};\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Downsides:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u274c No Blueprint exposure"}),"\n",(0,i.jsx)(e.li,{children:"\u274c Manual lifetime management"}),"\n",(0,i.jsx)(e.li,{children:"\u274c No UPROPERTY reflection"}),"\n",(0,i.jsx)(e.li,{children:"\u274c Can't use delegates easily"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"the-solution-hybrid-pattern",children:"The Solution: Hybrid Pattern"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Use both"})," - each for what it's good at!"]}),"\n",(0,i.jsx)(e.h3,{id:"plain-c-struct-internal-logic",children:"Plain C++ Struct (Internal Logic)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"// Heavy lifting - lightweight, fast, cache-friendly\r\nstruct FERP_STTContext\r\n{\r\n    // State\r\n    TArray<float> AudioBuffer;\r\n    FElysSTTResult LastResult;\r\n    bool bIsListening;\r\n    \r\n    // Logic\r\n    void AccumulateAudio(const TArray<float>& NewAudio);\r\n    void ProcessAudio();\r\n    void RequestTranscription();\r\n    \r\n    // Delegates (C++ only)\r\n    DECLARE_MULTICAST_DELEGATE_OneParam(FOnTranscription, const FElysSTTResult&);\r\n    FOnTranscription OnTranscriptionResult;\r\n};\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Characteristics:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u2705 No UObject overhead"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 Fast allocation/deallocation"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 Cache-friendly"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 Ideal for tight loops"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 Can use C++ delegates"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"uobject-component-blueprint-api",children:"UObject Component (Blueprint API)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:'// Blueprint wrapper - exposes only what\'s needed\r\nUCLASS(BlueprintType, ClassGroup=(ElysGenAI), meta=(BlueprintSpawnableComponent))\r\nclass UERP_STTComponent : public UActorComponent\r\n{\r\n    GENERATED_BODY()\r\n    \r\npublic:\r\n    // Blueprint API\r\n    UFUNCTION(BlueprintCallable, Category="ElysGenAI|STT")\r\n    void StartListening();\r\n    \r\n    UFUNCTION(BlueprintCallable, Category="ElysGenAI|STT")\r\n    void StopListening();\r\n    \r\n    UPROPERTY(BlueprintReadOnly, Category="ElysGenAI|STT")\r\n    bool bIsListening;\r\n    \r\n    // Blueprint event\r\n    UPROPERTY(BlueprintAssignable, Category="ElysGenAI|STT")\r\n    FElysSTTResultDelegate OnTranscriptionComplete;\r\n    \r\nprivate:\r\n    // Owns the lightweight context\r\n    TUniquePtr<FERP_STTContext> Context;\r\n    \r\n    // Forwards context events to Blueprint\r\n    void HandleContextTranscription(const FElysSTTResult& Result);\r\n};\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Characteristics:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u2705 Blueprint-friendly"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 UPROPERTY/UFUNCTION exposure"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 Dynamic multicast delegates"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 Automatic cleanup"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 Actor component integration"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"how-they-work-together",children:"How They Work Together"}),"\n",(0,i.jsx)(e.h3,{id:"ownership",children:"Ownership"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"UERP_STTComponent::BeginPlay()\r\n{\r\n    // Component creates and owns context\r\n    Context = MakeUnique<FERP_STTContext>(this);\r\n    \r\n    // Bind C++ delegate to forward events\r\n    Context->OnTranscriptionResult.AddRaw(\r\n        this, &UERP_STTComponent::HandleContextTranscription\r\n    );\r\n    \r\n    // Register with subsystem\r\n    Subsystem->RegisterContext(Context.Get());\r\n}\r\n\r\nUERP_STTComponent::EndPlay()\r\n{\r\n    // Automatic cleanup via TUniquePtr\r\n    Subsystem->UnregisterContext(Context.Get());\r\n    Context.Reset(); // Destructor called here\r\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"method-forwarding",children:"Method Forwarding"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"// Blueprint calls component method\r\nvoid UERP_STTComponent::StartListening()\r\n{\r\n    if (Context)\r\n    {\r\n        Context->StartListening(); // Forward to context\r\n        bIsListening = Context->IsListening(); // Sync state\r\n    }\r\n}\r\n\r\n// Context processes audio, fires C++ delegate\r\nvoid FERP_STTContext::OnTranscriptionReady(const FElysSTTResult& Result)\r\n{\r\n    // Fire C++ multicast delegate\r\n    OnTranscriptionResult.Broadcast(Result);\r\n}\r\n\r\n// Component receives C++ event, broadcasts to Blueprint\r\nvoid UERP_STTComponent::HandleContextTranscription(const FElysSTTResult& Result)\r\n{\r\n    // Fire Blueprint dynamic multicast delegate\r\n    OnTranscriptionComplete.Broadcast(Result);\r\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"data-flow",children:"Data Flow"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"Blueprint\r\n    \u2193 (UFUNCTION call)\r\nUERP_STTComponent\r\n    \u2193 (method forward)\r\nFERP_STTContext\r\n    \u2193 (processing)\r\n[Heavy Logic: Audio buffering, VAD, inference requests]\r\n    \u2193 (C++ delegate)\r\nFERP_STTContext::OnTranscriptionResult\r\n    \u2193 (forward)\r\nUERP_STTComponent::HandleContextTranscription\r\n    \u2193 (Blueprint delegate)\r\nUERP_STTComponent::OnTranscriptionComplete\r\n    \u2193 (Blueprint event)\r\nGame Logic\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"benefits",children:"Benefits"}),"\n",(0,i.jsx)(e.h3,{id:"performance",children:"Performance"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Memory:"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"sizeof(FERP_STTContext) \u2248 50-100 bytes (audio buffer + state)\r\nsizeof(UERP_STTComponent) \u2248 200 bytes (UObject overhead)\n"})}),"\n",(0,i.jsx)(e.p,{children:"vs Pure UObject approach:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"sizeof(UERP_STTContext) \u2248 200 bytes + UObject overhead per instance\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"CPU:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Context processing happens in tight C++ loops"}),"\n",(0,i.jsx)(e.li,{children:"No UObject virtual function overhead"}),"\n",(0,i.jsx)(e.li,{children:"Cache-friendly for audio processing"}),"\n",(0,i.jsx)(e.li,{children:"Component only touched for Blueprint communication"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"scalability",children:"Scalability"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Multiple Contexts:"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"// 100 actors with STT components\r\nfor (int i = 0; i < 100; i++)\r\n{\r\n    // Lightweight contexts, minimal overhead\r\n    FERP_STTContext* Context = new FERP_STTContext();\r\n    // Only ~5-10KB per context\r\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"vs Pure UObject:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"// 100 UObject contexts = significant GC pressure\n"})}),"\n",(0,i.jsx)(e.h3,{id:"flexibility",children:"Flexibility"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Easy to extend:"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"// Add new logic to context - no Blueprint recompilation\r\nstruct FERP_STTContext\r\n{\r\n    // New feature\r\n    void EnableNoiseReduction(bool bEnable);\r\n    float ApplyNoiseReduction(const TArray<float>& Audio);\r\n};\r\n\r\n// Expose to Blueprint only if needed\r\nclass UERP_STTComponent\r\n{\r\n    UFUNCTION(BlueprintCallable)\r\n    void EnableNoiseReduction(bool bEnable)\r\n    {\r\n        Context->EnableNoiseReduction(bEnable);\r\n    }\r\n};\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"pattern-in-action",children:"Pattern in Action"}),"\n",(0,i.jsx)(e.h3,{id:"stt-example",children:"STT Example"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"// Context (lightweight, fast)\r\nstruct FERP_STTContext\r\n{\r\n    // State\r\n    TArray<float> AudioBuffer;\r\n    TArray<float> ProcessedAudio;\r\n    int32 SampleRate;\r\n    bool bIsListening;\r\n    \r\n    // Heavy processing\r\n    void AccumulateAudio(const TArray<float>& NewAudio)\r\n    {\r\n        // Tight loop - no UObject overhead\r\n        AudioBuffer.Append(NewAudio);\r\n        \r\n        if (AudioBuffer.Num() >= RequiredSamples)\r\n        {\r\n            ProcessBuffer();\r\n        }\r\n    }\r\n    \r\n    void ProcessBuffer()\r\n    {\r\n        // Apply VAD, normalization, etc.\r\n        ProcessedAudio = ApplyVoiceActivityDetection(AudioBuffer);\r\n        \r\n        if (HasVoiceActivity(ProcessedAudio))\r\n        {\r\n            RequestTranscription();\r\n        }\r\n    }\r\n    \r\n    // C++ delegate\r\n    FOnTranscription OnTranscriptionResult;\r\n};\r\n\r\n// Component (Blueprint wrapper)\r\nUCLASS()\r\nclass UERP_STTComponent : public UActorComponent\r\n{\r\n    // Blueprint API\r\n    UFUNCTION(BlueprintCallable)\r\n    void StartListening()\r\n    {\r\n        Context->StartListening();\r\n        bIsListening = true;\r\n    }\r\n    \r\n    UPROPERTY(BlueprintAssignable)\r\n    FElysSTTResultDelegate OnTranscriptionComplete;\r\n    \r\n    // Owns context\r\n    TUniquePtr<FERP_STTContext> Context;\r\n    \r\n    // Forwards events\r\n    void HandleTranscription(const FElysSTTResult& Result)\r\n    {\r\n        OnTranscriptionComplete.Broadcast(Result);\r\n    }\r\n};\n"})}),"\n",(0,i.jsx)(e.h3,{id:"llm-example",children:"LLM Example"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:'// Context (conversation state)\r\nstruct FERP_LLMContext\r\n{\r\n    // State\r\n    TArray<FElysLLMMessage> MessageHistory;\r\n    FString SystemPrompt;\r\n    int32 TokenCount;\r\n    \r\n    // Logic\r\n    FString BuildPrompt() const\r\n    {\r\n        FString Prompt = SystemPrompt + "\\n";\r\n        for (const auto& Msg : MessageHistory)\r\n        {\r\n            Prompt += FString::Printf(TEXT("%s: %s\\n"), \r\n                *Msg.Role, *Msg.Content);\r\n        }\r\n        return Prompt;\r\n    }\r\n    \r\n    void AddMessage(const FElysLLMMessage& Message)\r\n    {\r\n        MessageHistory.Add(Message);\r\n        TokenCount += EstimateTokens(Message.Content);\r\n        \r\n        // Trim if over context limit\r\n        if (TokenCount > MaxContextTokens)\r\n        {\r\n            TrimOldMessages();\r\n        }\r\n    }\r\n    \r\n    // C++ delegates\r\n    FOnGeneration OnGenerationComplete;\r\n    FOnToken OnTokenGenerated;\r\n};\r\n\r\n// Component (Blueprint wrapper)\r\nUCLASS()\r\nclass UERP_LLMComponent : public UActorComponent\r\n{\r\n    // Blueprint API\r\n    UFUNCTION(BlueprintCallable)\r\n    void SendMessage(const FString& Message)\r\n    {\r\n        FElysLLMMessage Msg;\r\n        Msg.Role = TEXT("user");\r\n        Msg.Content = Message;\r\n        Context->AddMessage(Msg);\r\n        Context->RequestGeneration();\r\n    }\r\n    \r\n    UPROPERTY(BlueprintAssignable)\r\n    FElysLLMResultDelegate OnGenerationComplete;\r\n    \r\n    // Owns context\r\n    TUniquePtr<FERP_LLMContext> Context;\r\n};\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"comparison-to-other-patterns",children:"Comparison to Other Patterns"}),"\n",(0,i.jsx)(e.h3,{id:"vs-actor-components-only",children:"vs Actor Components Only"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Aspect"}),(0,i.jsx)(e.th,{children:"Hybrid Pattern"}),(0,i.jsx)(e.th,{children:"Pure Components"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Performance"})}),(0,i.jsx)(e.td,{children:"\u2705 Fast (C++ struct)"}),(0,i.jsx)(e.td,{children:"\u274c Slower (UObject)"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Memory"})}),(0,i.jsx)(e.td,{children:"\u2705 Minimal overhead"}),(0,i.jsx)(e.td,{children:"\u274c UObject overhead"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Blueprint"})}),(0,i.jsx)(e.td,{children:"\u2705 Exposed via component"}),(0,i.jsx)(e.td,{children:"\u2705 Native"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Scalability"})}),(0,i.jsx)(e.td,{children:"\u2705 1000s of contexts"}),(0,i.jsx)(e.td,{children:"\u26a0\ufe0f GC pressure"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Complexity"})}),(0,i.jsx)(e.td,{children:"\u26a0\ufe0f Two layers"}),(0,i.jsx)(e.td,{children:"\u2705 Single layer"})]})]})]}),"\n",(0,i.jsx)(e.h3,{id:"vs-subsystems-only",children:"vs Subsystems Only"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Aspect"}),(0,i.jsx)(e.th,{children:"Hybrid Pattern"}),(0,i.jsx)(e.th,{children:"Pure Subsystems"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Per-Actor State"})}),(0,i.jsx)(e.td,{children:"\u2705 Context per actor"}),(0,i.jsx)(e.td,{children:"\u274c Global state"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Blueprint"})}),(0,i.jsx)(e.td,{children:"\u2705 Component API"}),(0,i.jsx)(e.td,{children:"\u26a0\ufe0f Static functions"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Cleanup"})}),(0,i.jsx)(e.td,{children:"\u2705 Automatic"}),(0,i.jsx)(e.td,{children:"\u26a0\ufe0f Manual tracking"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Scalability"})}),(0,i.jsx)(e.td,{children:"\u2705 Independent contexts"}),(0,i.jsx)(e.td,{children:"\u26a0\ufe0f Shared state"})]})]})]}),"\n",(0,i.jsx)(e.h3,{id:"vs-data-only-structs",children:"vs Data-Only Structs"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Aspect"}),(0,i.jsx)(e.th,{children:"Hybrid Pattern"}),(0,i.jsx)(e.th,{children:"Pure Structs"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Blueprint"})}),(0,i.jsx)(e.td,{children:"\u2705 Component wrapper"}),(0,i.jsx)(e.td,{children:"\u274c Not exposed"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Logic"})}),(0,i.jsx)(e.td,{children:"\u2705 In context"}),(0,i.jsx)(e.td,{children:"\u26a0\ufe0f Elsewhere"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Encapsulation"})}),(0,i.jsx)(e.td,{children:"\u2705 Clear ownership"}),(0,i.jsx)(e.td,{children:"\u26a0\ufe0f External logic"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Events"})}),(0,i.jsx)(e.td,{children:"\u2705 Delegates"}),(0,i.jsx)(e.td,{children:"\u274c Manual callbacks"})]})]})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"when-to-use-hybrid-pattern",children:"When to Use Hybrid Pattern"}),"\n",(0,i.jsx)(e.h3,{id:"-use-hybrid-when",children:"\u2705 Use Hybrid When:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Heavy processing per-actor (audio, inference)"}),"\n",(0,i.jsx)(e.li,{children:"Need Blueprint exposure"}),"\n",(0,i.jsx)(e.li,{children:"Want performance-critical loops"}),"\n",(0,i.jsx)(e.li,{children:"Multiple instances (100s-1000s)"}),"\n",(0,i.jsx)(e.li,{children:"Clear ownership semantics"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"-dont-use-hybrid-when",children:"\u274c Don't Use Hybrid When:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Simple data holders"}),"\n",(0,i.jsx)(e.li,{children:"Rarely updated state"}),"\n",(0,i.jsx)(e.li,{children:"No performance concerns"}),"\n",(0,i.jsx)(e.li,{children:"Single global instance"}),"\n",(0,i.jsx)(e.li,{children:"Blueprint-only logic"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"implementation-guidelines",children:"Implementation Guidelines"}),"\n",(0,i.jsx)(e.h3,{id:"1-context-lifetime",children:"1. Context Lifetime"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"// Component manages context lifetime\r\nclass UERP_STTComponent\r\n{\r\n    void BeginPlay() override\r\n    {\r\n        Context = MakeUnique<FERP_STTContext>(this);\r\n        Subsystem->RegisterContext(Context.Get());\r\n    }\r\n    \r\n    void EndPlay(const EEndPlayReason::Type Reason) override\r\n    {\r\n        Subsystem->UnregisterContext(Context.Get());\r\n        Context.Reset(); // Automatic cleanup\r\n    }\r\n    \r\nprivate:\r\n    TUniquePtr<FERP_STTContext> Context;\r\n};\n"})}),"\n",(0,i.jsx)(e.h3,{id:"2-event-forwarding",children:"2. Event Forwarding"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"// Bind C++ delegate in component constructor\r\nUERP_STTComponent::BeginPlay()\r\n{\r\n    Context->OnTranscriptionResult.AddUObject(\r\n        this, &UERP_STTComponent::HandleTranscription\r\n    );\r\n}\r\n\r\nvoid UERP_STTComponent::HandleTranscription(const FElysSTTResult& Result)\r\n{\r\n    // Forward to Blueprint dynamic delegate\r\n    OnTranscriptionComplete.Broadcast(Result);\r\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"3-state-synchronization",children:"3. State Synchronization"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"// Sync component properties from context\r\nvoid UERP_STTComponent::Tick(float DeltaTime)\r\n{\r\n    if (Context)\r\n    {\r\n        bIsListening = Context->IsListening();\r\n        LastConfidence = Context->GetLastConfidence();\r\n    }\r\n}\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"advanced-custom-contexts",children:"Advanced: Custom Contexts"}),"\n",(0,i.jsx)(e.p,{children:"You can create custom contexts for specialized use cases:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"// Custom context for music recognition\r\nstruct FERP_MusicRecognitionContext\r\n{\r\n    TArray<float> MusicBuffer;\r\n    TArray<FString> DetectedGenres;\r\n    \r\n    void AnalyzeMusic(const TArray<float>& Audio);\r\n    void DetectBPM();\r\n    void RecognizeMelody();\r\n    \r\n    FOnMusicDetected OnMusicDetected;\r\n};\r\n\r\n// Wrapper component\r\nUCLASS()\r\nclass UERP_MusicRecognitionComponent : public UActorComponent\r\n{\r\n    UFUNCTION(BlueprintCallable)\r\n    void StartListening();\r\n    \r\n    UPROPERTY(BlueprintAssignable)\r\n    FElysMusicDetectedDelegate OnMusicDetected;\r\n    \r\n    TUniquePtr<FERP_MusicRecognitionContext> Context;\r\n};\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(e.p,{children:"The hybrid pattern provides:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u26a1 ",(0,i.jsx)(e.strong,{children:"Performance"})," - Fast C++ for processing"]}),"\n",(0,i.jsxs)(e.li,{children:["\ud83c\udfae ",(0,i.jsx)(e.strong,{children:"Blueprint-Friendly"})," - UObject wrapper for game logic"]}),"\n",(0,i.jsxs)(e.li,{children:["\ud83d\udce6 ",(0,i.jsx)(e.strong,{children:"Clean Architecture"})," - Clear separation of concerns"]}),"\n",(0,i.jsxs)(e.li,{children:["\ud83d\udd27 ",(0,i.jsx)(e.strong,{children:"Extensible"})," - Easy to add new features"]}),"\n",(0,i.jsxs)(e.li,{children:["\ud83d\udcbe ",(0,i.jsx)(e.strong,{children:"Memory Efficient"})," - Minimal overhead per instance"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Best of both worlds!"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.a,{href:"/ElysGenAIPlugin/Architecture",children:"Architecture"})})," - See hybrid pattern in full system"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.a,{href:"/ElysGenAIPlugin/STTGuide",children:"STT Guide"})})," - Use contexts for speech-to-text"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.a,{href:"/ElysGenAIPlugin/LLMGuide",children:"LLM Guide"})})," - Use contexts for language models"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.a,{href:"/ElysGenAIPlugin/AdvancedCustomization",children:"Advanced Customization"})})," - Create custom contexts"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453(n,e,r){r.d(e,{R:()=>l,x:()=>o});var t=r(6540);const i={},s=t.createContext(i);function l(n){const e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:l(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);