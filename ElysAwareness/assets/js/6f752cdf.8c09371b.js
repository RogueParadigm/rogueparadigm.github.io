"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[736],{4616(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"InteractionGuide","title":"Interaction Guide","description":"Complete guide to implementing proximity-based interactions using ElysAwareness.","source":"@site/../Documentation/InteractionGuide.md","sourceDirName":".","slug":"/InteractionGuide","permalink":"/ElysAwareness/InteractionGuide","draft":false,"unlisted":false,"editUrl":"https://github.com/RogueParadigm/ElysAwareness/tree/main/Documentation/../Documentation/InteractionGuide.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"InteractionGuide","title":"Interaction Guide","sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Pipeline System","permalink":"/ElysAwareness/PipelineSystem"},"next":{"title":"Targeting Guide","permalink":"/ElysAwareness/TargetingGuide"}}');var r=t(4848),o=t(8453);const s={id:"InteractionGuide",title:"Interaction Guide",sidebar_position:4},c=void 0,d={},a=[{value:"Overview",id:"overview",level:2},{value:"ERPInteractionComponent",id:"erpinteractioncomponent",level:3},{value:"Multiplayer Support",id:"multiplayer-support",level:3},{value:"Basic Setup",id:"basic-setup",level:2},{value:"1. Configure Interaction Pipeline",id:"1-configure-interaction-pipeline",level:3},{value:"2. Add Interaction Component",id:"2-add-interaction-component",level:3},{value:"3. Implement Interactable Interface",id:"3-implement-interactable-interface",level:3},{value:"4. Handle Input",id:"4-handle-input",level:3},{value:"Visual Feedback (Optional)",id:"visual-feedback-optional",level:2},{value:"Approach 1: Auto-Wired Feedback (ERPBaseInteractionFeedbackComponent)",id:"approach-1-auto-wired-feedback-erpbaseinteractionfeedbackcomponent",level:3},{value:"Default Implementation: ERP_DefaultInteractionFeedback",id:"default-implementation-erp_defaultinteractionfeedback",level:4},{value:"Creating Your Own Feedback Component",id:"creating-your-own-feedback-component",level:4},{value:"Approach 2: Custom UI From Domain Events",id:"approach-2-custom-ui-from-domain-events",level:3},{value:"Approach 3: Fully Custom From Perception Events",id:"approach-3-fully-custom-from-perception-events",level:3},{value:"Blueprint Examples",id:"blueprint-examples",level:2},{value:"Minimal Setup (Auto-Wired Feedback)",id:"minimal-setup-auto-wired-feedback",level:3},{value:"Custom UI Setup (No Feedback Component)",id:"custom-ui-setup-no-feedback-component",level:3},{value:"Widget Integration",id:"widget-integration",level:2},{value:"C++ Example",id:"c-example",level:2},{value:"PlayerController Setup",id:"playercontroller-setup",level:3},{value:"Interactable Actor",id:"interactable-actor",level:3},{value:"Advanced Patterns",id:"advanced-patterns",level:2},{value:"Interaction Rules",id:"interaction-rules",level:3},{value:"Server-Side Validation",id:"server-side-validation",level:3},{value:"Dynamic Descriptors",id:"dynamic-descriptors",level:3},{value:"Next Steps",id:"next-steps",level:2}];function l(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Complete guide to implementing proximity-based interactions using ElysAwareness."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["The interaction system builds on top of Perception via the ",(0,r.jsx)(n.code,{children:"UERPDomainComponent"})," base class to provide eligibility validation, state management, and multiplayer-safe execution."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Architecture:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Perception:"})," Selects candidate locally (client-side detection)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Domain (Interaction):"})," ",(0,r.jsx)(n.code,{children:"UERPInteractionComponent"})," extends ",(0,r.jsx)(n.code,{children:"UERPDomainComponent"}),", validates eligibility using ",(0,r.jsx)(n.code,{children:"IERPInteractable"})," interface and rules"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Presentation:"})," Optional. If an ",(0,r.jsx)(n.code,{children:"ERPBaseInteractionFeedbackComponent"})," is present on the candidate actor, it is notified automatically. Otherwise, use domain events to drive your own UI."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"erpinteractioncomponent",children:"ERPInteractionComponent"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ERPInteractionComponent"})," extends ",(0,r.jsx)(n.code,{children:"UERPDomainComponent"})," and provides complete interaction state management."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"What it does:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Inherits automatic channel binding and candidate tracking from ",(0,r.jsx)(n.code,{children:"UERPDomainComponent"})]}),"\n",(0,r.jsxs)(n.li,{children:["Overrides ",(0,r.jsx)(n.code,{children:"IsCandidateEligible"})," to check ",(0,r.jsx)(n.code,{children:"IERPInteractable"})," interface + ",(0,r.jsx)(n.code,{children:"CanBeInteractedWith"})," + rules"]}),"\n",(0,r.jsx)(n.li,{children:"Maintains interaction descriptor (by value)"}),"\n",(0,r.jsxs)(n.li,{children:["Handles ",(0,r.jsx)(n.code,{children:"RequestInteraction()"})," with automatic networking (Server RPC + validation)"]}),"\n",(0,r.jsxs)(n.li,{children:["Emits events: ",(0,r.jsx)(n.code,{children:"OnDomainCandidateChanged"}),", ",(0,r.jsx)(n.code,{children:"OnDescriptorChanged"}),", ",(0,r.jsx)(n.code,{children:"OnInteractionExecuted"}),", ",(0,r.jsx)(n.code,{children:"OnInteractionFailed"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"multiplayer-support",children:"Multiplayer Support"}),"\n",(0,r.jsx)(n.p,{children:"The interaction component handles networking automatically:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Standalone:"})," Executes interaction directly"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Client:"})," Sends ",(0,r.jsx)(n.code,{children:"Server_RequestInteraction"})," RPC"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Server:"})," Validates distance, perception filters, eligibility, then executes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Server -> Client:"})," Notifies via ",(0,r.jsx)(n.code,{children:"Client_OnInteractionSuccess"})," / ",(0,r.jsx)(n.code,{children:"Client_OnInteractionFailed"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The component has ",(0,r.jsx)(n.code,{children:"SetIsReplicatedByDefault(true)"})," to support Server/Client RPCs."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,r.jsx)(n.h3,{id:"1-configure-interaction-pipeline",children:"1. Configure Interaction Pipeline"}),"\n",(0,r.jsxs)(n.p,{children:["On your PlayerController or Pawn, add and configure ",(0,r.jsx)(n.code,{children:"ERPAwarenessComponent"}),":"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Interaction Pipeline Settings:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Channel Id: ",(0,r.jsx)(n.code,{children:"Interact"})]}),"\n",(0,r.jsx)(n.li,{children:"Default Sampling Range: 300.0 (shorter than targeting)"}),"\n",(0,r.jsxs)(n.li,{children:["Sampler: ",(0,r.jsx)(n.code,{children:"ERPSphereOverlapSampler"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Trace Channel: Visibility"}),"\n",(0,r.jsx)(n.li,{children:"Ignore Context Actor: check"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Filters: ",(0,r.jsx)(n.code,{children:"ERPInteractableFilter"})]}),"\n",(0,r.jsxs)(n.li,{children:["Scorers: ",(0,r.jsx)(n.code,{children:"ERPDistanceScorer"})," (normalize by range), Weight: 1.0"]}),"\n",(0,r.jsxs)(n.li,{children:["Resolver: ",(0,r.jsx)(n.code,{children:"ERPResolverBase"})," (lowest score wins)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-add-interaction-component",children:"2. Add Interaction Component"}),"\n",(0,r.jsxs)(n.p,{children:["Add ",(0,r.jsx)(n.code,{children:"ERPInteractionComponent"})," to your PlayerController or Pawn:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Channel Id: ",(0,r.jsx)(n.code,{children:"Interact"})," (must match pipeline)"]}),"\n",(0,r.jsx)(n.li,{children:"Max Interaction Distance: 500.0 (server-side validation distance)"}),"\n",(0,r.jsx)(n.li,{children:"Rules: (optional instanced rules)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-implement-interactable-interface",children:"3. Implement Interactable Interface"}),"\n",(0,r.jsx)(n.p,{children:"On actors you want to interact with (doors, items, NPCs):"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Blueprint:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Class Settings -> Interfaces -> Add ",(0,r.jsx)(n.code,{children:"ERPInteractable"})]}),"\n",(0,r.jsxs)(n.li,{children:["Implement ",(0,r.jsx)(n.code,{children:"Can Be Interacted With"})," -> return ",(0,r.jsx)(n.code,{children:"true"})]}),"\n",(0,r.jsxs)(n.li,{children:["Implement ",(0,r.jsx)(n.code,{children:"Get Interaction Descriptor"}),":"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'Event: Get Interaction Descriptor\n  -> Make Interaction Descriptor\n    - Display Name: "Door"\n    - Prompt Text: "Press E to Open"\n    - Input Action: IA_ERP_Interact (optional, for key display in widgets)\n    - Icon: T_DoorIcon (optional, soft reference)\n    - Hold Duration: 0.0 (instant) or 2.0 (hold for 2 seconds)\n  -> Set Out Descriptor\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsxs)(n.li,{children:["Implement ",(0,r.jsx)(n.code,{children:"Execute Interaction"}),":"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Event: Execute Interaction (Instigator Actor)\n  -> Toggle Door State\n  -> Return true\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-handle-input",children:"4. Handle Input"}),"\n",(0,r.jsxs)(n.p,{children:["Bind your interact action to ",(0,r.jsx)(n.code,{children:"RequestInteraction()"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Input Action: Interact\n  -> InteractionComponent -> RequestInteraction()\n  // Handles networking automatically\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Visual feedback"})," is handled separately \u2014 see the next section. If your interactable actors have an ",(0,r.jsx)(n.code,{children:"ERPBaseInteractionFeedbackComponent"}),", feedback is automatic. Otherwise, bind to ",(0,r.jsx)(n.code,{children:"OnDescriptorChanged"})," / ",(0,r.jsx)(n.code,{children:"OnDomainCandidateChanged"})," to drive your own UI."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"visual-feedback-optional",children:"Visual Feedback (Optional)"}),"\n",(0,r.jsxs)(n.p,{children:["Visual feedback is ",(0,r.jsx)(n.strong,{children:"entirely optional"}),". The interaction system works the same whether or not you use the provided feedback component. Choose the approach that fits your project:"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Approach"}),(0,r.jsx)(n.th,{children:"When to use"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Auto-wired feedback"})}),(0,r.jsx)(n.td,{children:"You want out-of-the-box feedback on interactable actors"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Custom UI from events"})}),(0,r.jsx)(n.td,{children:"You want full control over your UI, driven by domain events"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Fully custom"})}),(0,r.jsx)(n.td,{children:"You want to handle everything from perception events directly"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"approach-1-auto-wired-feedback-erpbaseinteractionfeedbackcomponent",children:"Approach 1: Auto-Wired Feedback (ERPBaseInteractionFeedbackComponent)"}),"\n",(0,r.jsxs)(n.p,{children:["Add an ",(0,r.jsx)(n.code,{children:"ERPBaseInteractionFeedbackComponent"})," (or a Blueprint subclass of it) to an interactable actor. ",(0,r.jsx)(n.strong,{children:"That's it."})," The ",(0,r.jsx)(n.code,{children:"ERPInteractionComponent"})," automatically detects it and calls ",(0,r.jsx)(n.code,{children:"SetInteractionFocused"})," / ",(0,r.jsx)(n.code,{children:"UpdateInteractionDescriptor"})," when the actor gains or loses focus. No manual wiring needed on the PlayerController."]}),"\n",(0,r.jsx)(n.p,{children:"If the actor doesn't have this component, the interaction system silently skips the feedback \u2014 interactions still work, just without visual feedback."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"How it works internally:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ERPInteractionComponent (on PlayerController)\n  \u2192 detects candidate change\n  \u2192 FindComponentByClass<ERPBaseInteractionFeedbackComponent> on the candidate actor\n  \u2192 calls SetInteractionFocused(PC, true/false)     \u2192 fires OnInteractionFocused\n  \u2192 calls UpdateInteractionDescriptor(PC, Descriptor) \u2192 fires OnDescriptorUpdated\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Blueprint hooks"})," (override these in your Blueprint subclass):"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Event"}),(0,r.jsx)(n.th,{children:"When it fires"}),(0,r.jsx)(n.th,{children:"Typical use"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"OnInteractionFocused(PC, bFocused)"})}),(0,r.jsx)(n.td,{children:"Actor gains/loses interaction focus"}),(0,r.jsx)(n.td,{children:"Show/hide widget, enable/disable outline, play sound"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"OnDescriptorUpdated(PC, Descriptor)"})}),(0,r.jsxs)(n.td,{children:["Descriptor changes (new candidate or ",(0,r.jsx)(n.code,{children:"ForceRefreshDescriptor"}),")"]}),(0,r.jsx)(n.td,{children:"Push descriptor data to your widget"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["These are ",(0,r.jsx)(n.code,{children:"BlueprintImplementableEvent"})," \u2014 the base class does nothing, you implement whatever visual behavior you want."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Built-in utility:"})," Call ",(0,r.jsx)(n.code,{children:"ApplyDefaultCustomDepthFeedback(bEnable)"})," from your ",(0,r.jsx)(n.code,{children:"OnInteractionFocused"})," override for a standard custom depth outline. This toggles ",(0,r.jsx)(n.code,{children:"RenderCustomDepth"})," on the owner's mesh components using ",(0,r.jsx)(n.code,{children:"CustomDepthStencilValue"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"default-implementation-erp_defaultinteractionfeedback",children:"Default Implementation: ERP_DefaultInteractionFeedback"}),"\n",(0,r.jsxs)(n.p,{children:["The plugin includes ",(0,r.jsx)(n.code,{children:"ERP_DefaultInteractionFeedback"}),", a ready-to-use Blueprint subclass of ",(0,r.jsx)(n.code,{children:"ERPBaseInteractionFeedbackComponent"})," that works with the provided widget base classes. It handles outline toggling, widget creation, visibility, and descriptor forwarding out of the box."]}),"\n",(0,r.jsx)(n.p,{children:"You can use it directly on your interactable actors, or use it as a reference to build your own feedback component."}),"\n",(0,r.jsx)(n.h4,{id:"creating-your-own-feedback-component",children:"Creating Your Own Feedback Component"}),"\n",(0,r.jsxs)(n.p,{children:["Create a Blueprint child of ",(0,r.jsx)(n.code,{children:"ERPBaseInteractionFeedbackComponent"})," and override the two events. A typical implementation manages an outline and a widget:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Setup (BeginPlay):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Event BeginPlay\n  -> Find WidgetComponent on owner (GetComponentByClass)\n  -> Store reference for later\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Focus handling:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Event: On Interaction Focused (PC, bFocused)\n  Branch: bFocused\n    True:\n      -> Enable your outline effect\n      -> Create widget if not already created (CreateWidget for PC)\n      -> Set widget on WidgetComponent\n      -> Set WidgetComponent visible\n    False:\n      -> Disable outline effect\n      -> Set WidgetComponent hidden\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Descriptor handling \u2014 the bridge to the widget:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Event: On Descriptor Updated (PC, Descriptor)\n  -> Ensure widget exists (create if needed)\n  -> Widget -> UpdateFromDescriptor(Descriptor)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Add this component to your interactable actors."})," The C++ interaction system handles the rest \u2014 no event binding needed on the PlayerController for visual feedback."]}),"\n",(0,r.jsx)(n.h3,{id:"approach-2-custom-ui-from-domain-events",children:"Approach 2: Custom UI From Domain Events"}),"\n",(0,r.jsxs)(n.p,{children:["Skip the feedback component entirely. Listen to ",(0,r.jsx)(n.code,{children:"ERPInteractionComponent"})," events on the player side and drive your own UI:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Event: OnDescriptorChanged (Candidate, Descriptor, ChannelId)\n  -> Update your widget with Descriptor.DisplayName, PromptText, etc.\n\nEvent: OnDomainCandidateChanged (Previous, New, ChannelId)\n  -> Show/hide your widget based on IsValid(New)\n"})}),"\n",(0,r.jsx)(n.p,{children:"This gives you full control over presentation without depending on any plugin widget class. You can use any UMG widget, any third-party UI system, or even non-UI feedback (sound, camera, etc.)."}),"\n",(0,r.jsx)(n.h3,{id:"approach-3-fully-custom-from-perception-events",children:"Approach 3: Fully Custom From Perception Events"}),"\n",(0,r.jsx)(n.p,{children:"Skip both the interaction component and feedback. Listen directly to perception events:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Perception->OnChannelCandidateAcquired  // raw candidate detected\nPerception->OnChannelCandidateLost      // raw candidate lost\nPerception->OnChannelEvaluated          // all scored candidates\n"})}),"\n",(0,r.jsx)(n.p,{children:"Build your own eligibility logic, descriptor system, and presentation from scratch."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"blueprint-examples",children:"Blueprint Examples"}),"\n",(0,r.jsx)(n.h3,{id:"minimal-setup-auto-wired-feedback",children:"Minimal Setup (Auto-Wired Feedback)"}),"\n",(0,r.jsxs)(n.p,{children:["If your interactable actors have an ",(0,r.jsx)(n.code,{children:"ERPBaseInteractionFeedbackComponent"}),", visual feedback is automatic \u2014 no PlayerController wiring needed for the visual side."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"PlayerController Components:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ERPAwarenessComponent"})," (interaction pipeline configured)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ERPInteractionComponent"}),' (listening to "Interact" channel)']}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Interactable Actor Components:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ERPBaseInteractionFeedbackComponent"})," (optional, auto-notified)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"PlayerController Event Graph (input only):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Input Action: Interact\n  -> InteractionComponent -> RequestInteraction()\n  // Networking handled automatically\n\nEvent: OnInteractionExecuted (InteractableActor)\n  -> Your gameplay logic\n\nEvent: OnInteractionFailed (InteractableActor, Reason)\n  -> Your error handling\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"ERPBaseInteractionFeedbackComponent"})," on the interactable receives ",(0,r.jsx)(n.code,{children:"OnInteractionFocused"})," and ",(0,r.jsx)(n.code,{children:"OnDescriptorUpdated"})," automatically. Implement these events in Blueprint to update your widget, outline, or any visual."]}),"\n",(0,r.jsx)(n.h3,{id:"custom-ui-setup-no-feedback-component",children:"Custom UI Setup (No Feedback Component)"}),"\n",(0,r.jsxs)(n.p,{children:["If you don't use ",(0,r.jsx)(n.code,{children:"ERPBaseInteractionFeedbackComponent"})," and want to drive your own UI from the PlayerController side:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"PlayerController Event Graph:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"// Handle descriptor changes (update UI)\nEvent: OnDescriptorChanged (Candidate, Descriptor, ChannelId)\n  -> Update your widget with Descriptor.DisplayName, PromptText, etc.\n  -> Show widget\n\n// Handle candidate lost (hide UI)\nEvent: OnDomainCandidateChanged (Previous, New, ChannelId)\n  -> Branch: IsValid(New)\n    False: -> Hide widget\n\n// Execute interaction (player input)\nInput Action: Interact\n  -> InteractionComponent -> RequestInteraction()\n"})}),"\n",(0,r.jsx)(n.p,{children:"Both approaches work. Use whichever fits your project."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"widget-integration",children:"Widget Integration"}),"\n",(0,r.jsxs)(n.p,{children:["The plugin provides widget base classes for interaction UI. The descriptor fields (",(0,r.jsx)(n.code,{children:"DisplayName"}),", ",(0,r.jsx)(n.code,{children:"PromptText"}),", ",(0,r.jsx)(n.code,{children:"InputAction"}),", ",(0,r.jsx)(n.code,{children:"Icon"}),", ",(0,r.jsx)(n.code,{children:"HoldDuration"}),", ",(0,r.jsx)(n.code,{children:"RequiredPresses"}),") drive the widget content."]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Descriptor State"}),(0,r.jsx)(n.th,{children:"Widget Type"}),(0,r.jsx)(n.th,{children:"Base Class"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"HoldDuration == 0"})," and ",(0,r.jsx)(n.code,{children:"RequiredPresses == 0"})]}),(0,r.jsx)(n.td,{children:"Simple prompt"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ERPInteractionWidgetBase"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"HoldDuration > 0"})}),(0,r.jsx)(n.td,{children:"Hold-to-interact"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ERPHoldInteractionWidgetBase"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"RequiredPresses > 0"})}),(0,r.jsx)(n.td,{children:"Multi-press"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ERPHoldInteractionWidgetBase"})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Quick wiring"})," (presenter on your PlayerController):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Event: OnDescriptorChanged (Candidate, Descriptor, ChannelId)\n  -> InteractionWidget -> UpdateFromDescriptor(Descriptor)\n  -> InteractionWidget -> SetFocused(true)\n\nEvent: OnDomainCandidateChanged (Previous, New, ChannelId)\n  -> Branch: Not IsValid(New)\n    True: -> InteractionWidget -> SetFocused(false)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["For complete step-by-step walkthroughs including hold timer management, multi-press counting, layout design, and C++ presenter examples, see the ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/ElysAwareness/WidgetGuide",children:"Widget Guide"})}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"c-example",children:"C++ Example"}),"\n",(0,r.jsx)(n.h3,{id:"playercontroller-setup",children:"PlayerController Setup"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'#include "Domains/Interaction/ERPInteractionComponent.h"\n\nAYourPlayerController::AYourPlayerController()\n{\n    PerceptionComponent = CreateDefaultSubobject<UERPAwarenessComponent>(TEXT("Perception"));\n    InteractionComponent = CreateDefaultSubobject<UERPInteractionComponent>(TEXT("Interaction"));\n    // ChannelId defaults to "Interact"\n}\n\nvoid AYourPlayerController::BeginPlay()\n{\n    Super::BeginPlay();\n    InteractionComponent->OnDescriptorChanged.AddDynamic(this, &AYourPlayerController::OnDescriptorChanged);\n    InteractionComponent->OnInteractionExecuted.AddDynamic(this, &AYourPlayerController::OnInteractionExecuted);\n}\n\nvoid AYourPlayerController::HandleInteractInput()\n{\n    // Single call handles standalone + networked execution\n    InteractionComponent->RequestInteraction();\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"interactable-actor",children:"Interactable Actor"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'#include "Domains/Interaction/ERPInteractable.h"\n\nclass AYourDoor : public AActor, public IERPInteractable\n{\n    GENERATED_BODY()\n\npublic:\n    virtual bool CanBeInteractedWith_Implementation(AActor* InteractingActor) const override\n    {\n        return true;\n    }\n\n    virtual void GetInteractionDescriptor_Implementation(FERPInteractionDescriptor& OutDescriptor) const override\n    {\n        OutDescriptor.DisplayName = FText::FromString(TEXT("Door"));\n        OutDescriptor.PromptText = bIsOpen\n            ? FText::FromString(TEXT("Close"))\n            : FText::FromString(TEXT("Open"));\n        OutDescriptor.InputAction = InteractAction; // UInputAction* set in editor\n        OutDescriptor.Icon = DoorIcon;              // TSoftObjectPtr<UTexture2D>\n        // OutDescriptor.HoldDuration = 0.0f;       // Instant (default)\n    }\n\n    virtual bool ExecuteInteraction_Implementation(AActor* InstigatorActor) override\n    {\n        bIsOpen = !bIsOpen;\n        return true;\n    }\n\nprotected:\n    bool bIsOpen = false;\n};\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"advanced-patterns",children:"Advanced Patterns"}),"\n",(0,r.jsx)(n.h3,{id:"interaction-rules",children:"Interaction Rules"}),"\n",(0,r.jsxs)(n.p,{children:["Add instanced ",(0,r.jsx)(n.code,{children:"UERPInteractionRule"})," objects to the InteractionComponent for composable validation:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"UCLASS(Blueprintable, EditInlineNew)\nclass UMyDistanceRule : public UERPInteractionRule\n{\n    GENERATED_BODY()\npublic:\n    UPROPERTY(EditAnywhere) float MaxDistance = 300.f;\n\n    virtual bool CanInteract_Implementation(AActor* Instigator, AActor* Target, FName ChannelId) const override\n    {\n        return FVector::Dist(Instigator->GetActorLocation(), Target->GetActorLocation()) <= MaxDistance;\n    }\n};\n"})}),"\n",(0,r.jsx)(n.h3,{id:"server-side-validation",children:"Server-Side Validation"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Server_RequestInteraction"})," RPC validates:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Distance:"})," ",(0,r.jsx)(n.code,{children:"MaxInteractionDistance"})," property on the component"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Perception Filters:"})," Re-runs channel filters server-side via ",(0,r.jsx)(n.code,{children:"ValidateActorForChannel"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Eligibility:"})," Re-checks ",(0,r.jsx)(n.code,{children:"CanBeInteractedWith"})," and all rules"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Execution:"})," Calls ",(0,r.jsx)(n.code,{children:"ExecuteInteraction"})," on the interactable"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"dynamic-descriptors",children:"Dynamic Descriptors"}),"\n",(0,r.jsxs)(n.p,{children:["Descriptors are pulled from ",(0,r.jsx)(n.code,{children:"IERPInteractable::GetInteractionDescriptor"})," when the candidate changes. However, if the ",(0,r.jsx)(n.strong,{children:"same"}),' interactable actor changes its descriptor while remaining the active candidate (e.g., a door goes from "Open" to "Locked"), the system does ',(0,r.jsx)(n.strong,{children:"not"})," detect this automatically \u2014 perception only fires events when the ",(0,r.jsx)(n.em,{children:"best candidate"})," changes, not when its data changes."]}),"\n",(0,r.jsxs)(n.p,{children:["To handle dynamic descriptor changes on the same candidate, call ",(0,r.jsx)(n.code,{children:"ForceRefreshDescriptor()"})," on the ",(0,r.jsx)(n.code,{children:"ERPInteractionComponent"}),":"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"From the interactable (Blueprint):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"// When your interaction state changes:\n-> Find the ERPInteractionComponent on the player (or store a reference)\n-> Call ForceRefreshDescriptor()\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"From C++:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"// After changing internal state that affects GetInteractionDescriptor:\nInteractionComponent->ForceRefreshDescriptor();\n"})}),"\n",(0,r.jsx)(n.p,{children:"This re-pulls the descriptor from the interactable, and if it changed:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Broadcasts ",(0,r.jsx)(n.code,{children:"OnDescriptorChanged"})," (so the widget/UI updates)"]}),"\n",(0,r.jsxs)(n.li,{children:["Notifies the ",(0,r.jsx)(n.code,{children:"ERPBaseInteractionFeedbackComponent"})," on the actor (if present)"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.p,{children:["Build your interaction UI with ",(0,r.jsx)(n.a,{href:"/ElysAwareness/WidgetGuide",children:"Widget Guide"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Set up targeting with ",(0,r.jsx)(n.a,{href:"/ElysAwareness/TargetingGuide",children:"Targeting Guide"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Create custom domains with ",(0,r.jsx)(n.a,{href:"/ElysAwareness/CustomDomains",children:"Custom Domains"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Learn customization in ",(0,r.jsx)(n.a,{href:"/ElysAwareness/Customization",children:"Customization"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Check complete API in ",(0,r.jsx)(n.a,{href:"/ElysAwareness/API-Reference",children:"API Reference"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453(e,n,t){t.d(n,{R:()=>s,x:()=>c});var i=t(6540);const r={},o=i.createContext(r);function s(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);