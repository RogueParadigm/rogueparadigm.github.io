"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[481],{8453(e,n,t){t.d(n,{R:()=>d,x:()=>o});var r=t(6540);const s={},i=r.createContext(s);function d(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(i.Provider,{value:n},e.children)}},8819(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"WidgetGuide","title":"Widget Guide","description":"Complete guide to building interaction and targeting UI using the plugin\'s widget base classes.","source":"@site/../Documentation/WidgetGuide.md","sourceDirName":".","slug":"/WidgetGuide","permalink":"/ElysAwareness/WidgetGuide","draft":false,"unlisted":false,"editUrl":"https://github.com/RogueParadigm/ElysAwareness/tree/main/Documentation/../Documentation/WidgetGuide.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"id":"WidgetGuide","title":"Widget Guide","sidebar_position":7},"sidebar":"docsSidebar","previous":{"title":"Custom Domains","permalink":"/ElysAwareness/CustomDomains"},"next":{"title":"Built-in Widgets","permalink":"/ElysAwareness/BuiltInWidgets"}}');var s=t(4848),i=t(8453);const d={id:"WidgetGuide",title:"Widget Guide",sidebar_position:7},o=void 0,l={},c=[{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"The Interaction Descriptor",id:"the-interaction-descriptor",level:2},{value:"Pattern 1: Simple Prompt",id:"pattern-1-simple-prompt",level:2},{value:"Step 1: Create the Widget Blueprint",id:"step-1-create-the-widget-blueprint",level:3},{value:"Step 2: Design the Layout",id:"step-2-design-the-layout",level:3},{value:"Step 3: Override OnDescriptorUpdated",id:"step-3-override-ondescriptorupdated",level:3},{value:"Step 4: Override OnFocusChanged (optional)",id:"step-4-override-onfocuschanged-optional",level:3},{value:"Step 5: Build the Presenter",id:"step-5-build-the-presenter",level:3},{value:"Pattern 2: Hold-to-Interact",id:"pattern-2-hold-to-interact",level:2},{value:"Step 1: Create the Widget Blueprint",id:"step-1-create-the-widget-blueprint-1",level:3},{value:"Step 2: Design the Layout",id:"step-2-design-the-layout-1",level:3},{value:"Step 3: Override Hooks",id:"step-3-override-hooks",level:3},{value:"Step 4: Build the Presenter",id:"step-4-build-the-presenter",level:3},{value:"Pattern 3: Multi-Press",id:"pattern-3-multi-press",level:2},{value:"Step 1: Create the Widget Blueprint",id:"step-1-create-the-widget-blueprint-2",level:3},{value:"Step 2: Design the Layout",id:"step-2-design-the-layout-2",level:3},{value:"Step 3: Override Hooks",id:"step-3-override-hooks-1",level:3},{value:"Step 4: Build the Presenter",id:"step-4-build-the-presenter-1",level:3},{value:"Pattern 4: Target Reticle",id:"pattern-4-target-reticle",level:2},{value:"Step 1: Create the Widget Blueprint",id:"step-1-create-the-widget-blueprint-3",level:3},{value:"Step 2: Design the Layout",id:"step-2-design-the-layout-3",level:3},{value:"Step 3: Override Hooks",id:"step-3-override-hooks-2",level:3},{value:"Step 4: Build the Presenter",id:"step-4-build-the-presenter-2",level:3},{value:"Pattern 5: Target Info Panel",id:"pattern-5-target-info-panel",level:2},{value:"Step 1: Create the Widget Blueprint",id:"step-1-create-the-widget-blueprint-4",level:3},{value:"Step 2: Design the Layout",id:"step-2-design-the-layout-4",level:3},{value:"Step 3: Override Hooks",id:"step-3-override-hooks-3",level:3},{value:"Step 4: Build the Presenter",id:"step-4-build-the-presenter-3",level:3},{value:"Choosing the Right Widget Type",id:"choosing-the-right-widget-type",level:2},{value:"Choosing the Right Presenter Location",id:"choosing-the-right-presenter-location",level:2},{value:"Building Custom Widgets from Scratch",id:"building-custom-widgets-from-scratch",level:2},{value:"Using PresentationHints",id:"using-presentationhints",level:3},{value:"C++ Presenter Example",id:"c-presenter-example",level:2},{value:"Summary",id:"summary",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Complete guide to building interaction and targeting UI using the plugin's widget base classes."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["The plugin provides optional widget base classes to accelerate UI development. ",(0,s.jsx)(n.strong,{children:"You are not required to use them."})," You can build your UI entirely from scratch using domain events (",(0,s.jsx)(n.code,{children:"OnDescriptorChanged"}),", ",(0,s.jsx)(n.code,{children:"OnDomainCandidateChanged"}),") and any UMG widget or third-party UI system."]}),"\n",(0,s.jsx)(n.p,{children:"If you do use the provided base classes:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Base Class"}),(0,s.jsx)(n.th,{children:"Gameplay Pattern"}),(0,s.jsx)(n.th,{children:"Driven By"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"UERPInteractionWidgetBase"})}),(0,s.jsx)(n.td,{children:'Simple prompt ("Press E to Open")'}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FERPInteractionDescriptor"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"UERPHoldInteractionWidgetBase"})}),(0,s.jsx)(n.td,{children:"Hold-to-interact, multi-press"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"FERPInteractionDescriptor"})," + progress"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"UERPTargetingWidgetBase"})}),(0,s.jsx)(n.td,{children:"Reticle, lock-on, target info"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"UERPTargetDescriptor"})})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key principles:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Widgets are ",(0,s.jsx)(n.strong,{children:"passive"})," \u2014 they receive data, they don't fetch it"]}),"\n",(0,s.jsxs)(n.li,{children:["Widgets do ",(0,s.jsx)(n.strong,{children:"not"})," manage their own lifecycle \u2014 a presenter creates, shows, hides, and destroys them"]}),"\n",(0,s.jsxs)(n.li,{children:["All widget data comes from ",(0,s.jsx)(n.strong,{children:"descriptors"})," \u2014 the data contract between game logic and UI"]}),"\n",(0,s.jsxs)(n.li,{children:["All hooks are ",(0,s.jsx)(n.code,{children:"BlueprintNativeEvent"})," \u2014 override in Blueprint or C++"]}),"\n",(0,s.jsx)(n.li,{children:"These base classes are convenience, not a requirement"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[Perception]  \u2192  [Domain Component]  \u2192  [Presenter]  \u2192  [Widget]\n  detects          validates              wires           displays\n  candidates       eligibility            events          UI\n                   tracks state           manages\n                   fires events           lifecycle\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Perception"})," selects the best candidate per channel."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Domain"})," (InteractionComponent, TargetingComponent) validates the candidate, pulls descriptors, fires events."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Presenter"})," (your code, typically on PlayerController or HUD) listens to domain events and drives widgets."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Widget"})," (your WBP extending a base class) receives data and displays it."]}),"\n",(0,s.jsx)(n.p,{children:"The plugin provides everything except the presenter \u2014 that's intentionally game-specific. This guide shows you exactly how to build one for each pattern."}),"\n",(0,s.jsx)(n.admonition,{title:"Don't need the base classes?",type:"tip",children:(0,s.jsxs)(n.p,{children:["You can skip this guide entirely and build your UI from ",(0,s.jsx)(n.code,{children:"UUserWidget"})," directly. Just listen to ",(0,s.jsx)(n.code,{children:"OnDescriptorChanged"})," / ",(0,s.jsx)(n.code,{children:"OnDomainCandidateChanged"})," on the domain component and update your widgets however you want. The base classes just save you some boilerplate (cached descriptor, focus tracking, input key helpers)."]})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"the-interaction-descriptor",children:"The Interaction Descriptor"}),"\n",(0,s.jsxs)(n.p,{children:["Every interaction widget is driven by ",(0,s.jsx)(n.code,{children:"FERPInteractionDescriptor"}),". Understanding its fields is essential:"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Purpose"}),(0,s.jsx)(n.th,{children:"Widget Usage"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"DisplayName"})}),(0,s.jsx)(n.td,{children:"FText"}),(0,s.jsx)(n.td,{children:"Interaction label"}),(0,s.jsx)(n.td,{children:'TextBlock ("Open", "Talk", "Loot")'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"PromptText"})}),(0,s.jsx)(n.td,{children:"FText"}),(0,s.jsx)(n.td,{children:"Full prompt"}),(0,s.jsx)(n.td,{children:'TextBlock ("Press E to open")'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"InputAction"})}),(0,s.jsx)(n.td,{children:"UInputAction*"}),(0,s.jsx)(n.td,{children:"Key binding reference"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"GetCurrentInputDisplayKey()"}),' returns "E", "F", etc.']})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Icon"})}),(0,s.jsx)(n.td,{children:"TSoftObjectPtr<UTexture2D>"}),(0,s.jsx)(n.td,{children:"Interaction icon"}),(0,s.jsx)(n.td,{children:"Image widget (load soft ref)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"HoldDuration"})}),(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:"0 = instant, >0 = hold (seconds)"}),(0,s.jsx)(n.td,{children:"Determines widget type (prompt vs progress bar)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"RequiredPresses"})}),(0,s.jsx)(n.td,{children:"int32"}),(0,s.jsx)(n.td,{children:"0 = not multi-press, >0 = press N times"}),(0,s.jsx)(n.td,{children:"Discrete progress steps"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"InteractionTags"})}),(0,s.jsx)(n.td,{children:"FGameplayTagContainer"}),(0,s.jsx)(n.td,{children:"Gameplay tags"}),(0,s.jsx)(n.td,{children:"Conditional styling"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"PresentationHints"})}),(0,s.jsx)(n.td,{children:"TMap<FName, UObject*>"}),(0,s.jsx)(n.td,{children:"Custom data"}),(0,s.jsx)(n.td,{children:"Game-specific extensions"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Helper methods:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"IsHoldInteraction()"})," \u2014 returns true if ",(0,s.jsx)(n.code,{children:"HoldDuration > 0"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"IsMultiPressInteraction()"})," \u2014 returns true if ",(0,s.jsx)(n.code,{children:"RequiredPresses > 0"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The interactable actor fills this descriptor in ",(0,s.jsx)(n.code,{children:"GetInteractionDescriptor"}),". The widget reads it."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"pattern-1-simple-prompt",children:"Pattern 1: Simple Prompt"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use case:"}),' RPG, adventure, puzzle games \u2014 "Press E to Open"']}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Base class:"})," ",(0,s.jsx)(n.code,{children:"UERPInteractionWidgetBase"})]}),"\n",(0,s.jsx)(n.h3,{id:"step-1-create-the-widget-blueprint",children:"Step 1: Create the Widget Blueprint"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Content Browser -> Widget Blueprint"}),"\n",(0,s.jsxs)(n.li,{children:["Reparent to ",(0,s.jsx)(n.code,{children:"ERPInteractionWidgetBase"})," (Class Settings -> Parent Class)"]}),"\n",(0,s.jsxs)(n.li,{children:["Name: ",(0,s.jsx)(n.code,{children:"WBP_SimplePrompt"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-2-design-the-layout",children:"Step 2: Design the Layout"}),"\n",(0,s.jsx)(n.p,{children:"Build your UMG layout. Typical elements:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"TextBlock"})," ",(0,s.jsx)(n.code,{children:"PromptText"})," \u2014 displays the interaction prompt"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"TextBlock"})," ",(0,s.jsx)(n.code,{children:"KeyText"}),' \u2014 displays the key binding ("E")']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Image"})," ",(0,s.jsx)(n.code,{children:"IconImage"})," \u2014 displays the interaction icon"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Example layout:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'[HorizontalBox]\n  [Image: IconImage]\n  [VerticalBox]\n    [TextBlock: PromptText]     // "Open Door"\n    [TextBlock: KeyText]        // "[E]"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-override-ondescriptorupdated",children:"Step 3: Override OnDescriptorUpdated"}),"\n",(0,s.jsx)(n.p,{children:"This is called whenever the interaction descriptor changes (new candidate, or same candidate with updated state)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: On Descriptor Updated (Descriptor)\n  // Update prompt text\n  -> Set Text (PromptText): Descriptor.DisplayName\n\n  // Update key binding display\n  -> Set Text (KeyText): GetCurrentInputDisplayKey()\n\n  // Update icon (load soft reference)\n  -> Branch: Is Valid (Descriptor.Icon)\n    True:\n      -> Async Load Asset (Descriptor.Icon)\n      -> Set Brush From Texture (IconImage, Loaded Texture)\n      -> Set Visibility (IconImage): Visible\n    False:\n      -> Set Visibility (IconImage): Collapsed\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-4-override-onfocuschanged-optional",children:"Step 4: Override OnFocusChanged (optional)"}),"\n",(0,s.jsx)(n.p,{children:"Default behavior toggles visibility. Override for animations:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: On Focus Changed (bNewFocused)\n  -> Branch: bNewFocused\n    True:  -> Play Animation (FadeIn)\n    False: -> Play Animation (FadeOut)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-5-build-the-presenter",children:"Step 5: Build the Presenter"}),"\n",(0,s.jsxs)(n.p,{children:["On your ",(0,s.jsx)(n.strong,{children:"PlayerController"})," (or HUD Blueprint):"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Variables:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"InteractionWidget"})," (type: ",(0,s.jsx)(n.code,{children:"WBP_SimplePrompt"}),", reference)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Construction:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event BeginPlay\n  // Create widget\n  -> Create Widget (WBP_SimplePrompt, Owning Player: Self)\n  -> Set InteractionWidget\n  -> Add to Viewport\n\n  // Bind to interaction events\n  -> Get Component (ERPInteractionComponent)\n  -> Bind OnDescriptorChanged\n  -> Bind OnDomainCandidateChanged\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Event wiring:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: OnDescriptorChanged (Candidate, Descriptor, ChannelId)\n  -> InteractionWidget -> UpdateFromDescriptor(Descriptor)\n  -> InteractionWidget -> SetFocused(true)\n\nEvent: OnDomainCandidateChanged (Previous, New, ChannelId)\n  -> Branch: NOT IsValid(New)\n    True: -> InteractionWidget -> SetFocused(false)\n"})}),"\n",(0,s.jsx)(n.p,{children:"That's it. When the player walks near an interactable, the widget appears with the correct prompt. When they walk away, it hides."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"pattern-2-hold-to-interact",children:"Pattern 2: Hold-to-Interact"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use case:"}),' Survival, looter, horror \u2014 "Hold E to Loot" with a progress bar']}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Base class:"})," ",(0,s.jsx)(n.code,{children:"UERPHoldInteractionWidgetBase"})]}),"\n",(0,s.jsx)(n.h3,{id:"step-1-create-the-widget-blueprint-1",children:"Step 1: Create the Widget Blueprint"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Widget Blueprint -> Reparent to ",(0,s.jsx)(n.code,{children:"ERPHoldInteractionWidgetBase"})]}),"\n",(0,s.jsxs)(n.li,{children:["Name: ",(0,s.jsx)(n.code,{children:"WBP_HoldPrompt"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-2-design-the-layout-1",children:"Step 2: Design the Layout"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'[VerticalBox]\n  [TextBlock: PromptText]       // "Hold to Loot"\n  [TextBlock: KeyText]          // "[E]"\n  [ProgressBar: HoldProgress]   // Fills as player holds\n'})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-override-hooks",children:"Step 3: Override Hooks"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OnDescriptorUpdated"})," \u2014 same as simple prompt:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: On Descriptor Updated (Descriptor)\n  -> Set Text (PromptText): Descriptor.DisplayName\n  -> Set Text (KeyText): GetCurrentInputDisplayKey()\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OnHoldProgressChanged"})," \u2014 update the progress bar:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: On Hold Progress Changed (Progress)\n  -> Set Percent (HoldProgress): Progress\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OnHoldStarted"})," (optional):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: On Hold Started\n  -> Set Color (HoldProgress): Yellow\n  -> Play Sound: HoldStartSFX\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OnHoldCompleted"})," (optional):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: On Hold Completed\n  -> Set Color (HoldProgress): Green\n  -> Play Sound: CompleteSFX\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OnHoldCancelled"})," (optional):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: On Hold Cancelled\n  -> Set Percent (HoldProgress): 0.0\n  -> Set Color (HoldProgress): White\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-4-build-the-presenter",children:"Step 4: Build the Presenter"}),"\n",(0,s.jsx)(n.p,{children:"The presenter manages the hold timer. The widget only displays progress."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Variables:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"HoldWidget"})," (type: ",(0,s.jsx)(n.code,{children:"WBP_HoldPrompt"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"bIsHolding"})," (bool)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"HoldAccumulator"})," (float)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CurrentHoldDuration"})," (float)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CurrentDescriptor"})," (FERPInteractionDescriptor)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Bind events"})," (same as simple prompt, but also store the descriptor):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: OnDescriptorChanged (Candidate, Descriptor, ChannelId)\n  -> Set CurrentDescriptor = Descriptor\n  -> Set CurrentHoldDuration = Descriptor.HoldDuration\n  -> HoldWidget -> UpdateFromDescriptor(Descriptor)\n  -> HoldWidget -> SetFocused(true)\n\nEvent: OnDomainCandidateChanged (Previous, New, ChannelId)\n  -> Branch: NOT IsValid(New)\n    True:\n      -> HoldWidget -> ResetHold()\n      -> HoldWidget -> SetFocused(false)\n      -> Set bIsHolding = false\n      -> Set HoldAccumulator = 0.0\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Handle input"})," (Enhanced Input \u2014 Started, Triggered, Completed):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Input Action: Interact (Started)\n  -> Branch: CurrentHoldDuration > 0\n    True:\n      -> Set bIsHolding = true\n      -> Set HoldAccumulator = 0.0\n    False:\n      -> InteractionComponent -> RequestInteraction()  // Instant\n\nInput Action: Interact (Completed / Cancelled)\n  -> Set bIsHolding = false\n  -> Set HoldAccumulator = 0.0\n  -> HoldWidget -> ResetHold()\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Tick"})," (drives the progress):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event Tick (DeltaTime)\n  -> Branch: bIsHolding AND CurrentHoldDuration > 0\n    True:\n      -> HoldAccumulator += DeltaTime\n      -> Progress = HoldAccumulator / CurrentHoldDuration\n      -> HoldWidget -> SetHoldProgress(Progress)\n\n      -> Branch: Progress >= 1.0\n        True:\n          -> InteractionComponent -> RequestInteraction()\n          -> Set bIsHolding = false\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The widget handles the visual state automatically \u2014 ",(0,s.jsx)(n.code,{children:"OnHoldStarted"})," fires on first progress, ",(0,s.jsx)(n.code,{children:"OnHoldProgressChanged"})," fires each frame, ",(0,s.jsx)(n.code,{children:"OnHoldCompleted"})," fires at 1.0."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"pattern-3-multi-press",children:"Pattern 3: Multi-Press"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use case:"}),' Action games \u2014 "Mash E to Break Free" (press 5 times)']}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Base class:"})," ",(0,s.jsx)(n.code,{children:"UERPHoldInteractionWidgetBase"})," (same as hold \u2014 progress goes in discrete steps)"]}),"\n",(0,s.jsx)(n.h3,{id:"step-1-create-the-widget-blueprint-2",children:"Step 1: Create the Widget Blueprint"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Widget Blueprint -> Reparent to ",(0,s.jsx)(n.code,{children:"ERPHoldInteractionWidgetBase"})]}),"\n",(0,s.jsxs)(n.li,{children:["Name: ",(0,s.jsx)(n.code,{children:"WBP_MultiPressPrompt"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-2-design-the-layout-2",children:"Step 2: Design the Layout"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'[VerticalBox]\n  [TextBlock: PromptText]       // "Break Free!"\n  [TextBlock: CounterText]      // "3 / 5"\n  [ProgressBar: PressProgress]  // Fills in steps\n'})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-override-hooks-1",children:"Step 3: Override Hooks"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OnHoldProgressChanged"})," \u2014 update progress bar AND counter text:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'Event: On Hold Progress Changed (Progress)\n  -> Set Percent (PressProgress): Progress\n\n  // Calculate press count from progress\n  -> RequiredPresses = GetDescriptor().RequiredPresses\n  -> CurrentPresses = Round(Progress * RequiredPresses)\n  -> Set Text (CounterText): Format("{0} / {1}", CurrentPresses, RequiredPresses)\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OnHoldCompleted"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: On Hold Completed\n  -> Play Animation: BreakFreeAnimation\n  -> Play Sound: BreakFreeSFX\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-4-build-the-presenter-1",children:"Step 4: Build the Presenter"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Variables:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"MultiPressWidget"})," (type: ",(0,s.jsx)(n.code,{children:"WBP_MultiPressPrompt"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CurrentPresses"})," (int32)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"RequiredPresses"})," (int32)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Bind events:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: OnDescriptorChanged (Candidate, Descriptor, ChannelId)\n  -> Set RequiredPresses = Descriptor.RequiredPresses\n  -> Set CurrentPresses = 0\n  -> MultiPressWidget -> UpdateFromDescriptor(Descriptor)\n  -> MultiPressWidget -> SetFocused(true)\n\nEvent: OnDomainCandidateChanged (Previous, New, ChannelId)\n  -> Branch: NOT IsValid(New)\n    True:\n      -> MultiPressWidget -> ResetHold()\n      -> MultiPressWidget -> SetFocused(false)\n      -> Set CurrentPresses = 0\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Handle input"})," (each press increments):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Input Action: Interact (Started)\n  -> Branch: RequiredPresses > 0\n    True:\n      -> CurrentPresses++\n      -> Progress = (float)CurrentPresses / (float)RequiredPresses\n      -> MultiPressWidget -> SetHoldProgress(Progress)\n\n      -> Branch: CurrentPresses >= RequiredPresses\n        True:\n          -> InteractionComponent -> RequestInteraction()\n          -> Set CurrentPresses = 0\n    False:\n      -> InteractionComponent -> RequestInteraction()  // Instant\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The hold widget fires ",(0,s.jsx)(n.code,{children:"OnHoldStarted"})," on first press, ",(0,s.jsx)(n.code,{children:"OnHoldProgressChanged"})," on every press, and ",(0,s.jsx)(n.code,{children:"OnHoldCompleted"})," when the count is reached."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"pattern-4-target-reticle",children:"Pattern 4: Target Reticle"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use case:"})," Action, shooter \u2014 lock-on marker on the target"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Base class:"})," ",(0,s.jsx)(n.code,{children:"UERPTargetingWidgetBase"})]}),"\n",(0,s.jsx)(n.h3,{id:"step-1-create-the-widget-blueprint-3",children:"Step 1: Create the Widget Blueprint"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Widget Blueprint -> Reparent to ",(0,s.jsx)(n.code,{children:"ERPTargetingWidgetBase"})]}),"\n",(0,s.jsxs)(n.li,{children:["Name: ",(0,s.jsx)(n.code,{children:"WBP_TargetReticle"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-2-design-the-layout-3",children:"Step 2: Design the Layout"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[CanvasPanel]\n  [Image: ReticleImage]  // Centered crosshair / bracket / diamond\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-override-hooks-2",children:"Step 3: Override Hooks"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OnTargetActiveChanged"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: On Target Active Changed (bActive)\n  -> Branch: bActive\n    True:  -> Play Animation (LockOnAnimation)\n    False: -> Play Animation (LockOffAnimation)\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OnDescriptorUpdated"})," (optional, for descriptor-driven styling):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'Event: On Descriptor Updated (Descriptor)\n  -> Branch: IsValid(Descriptor)\n    True:\n      // Color reticle based on target tags\n      -> Branch: Descriptor.TargetTags HasTag "Hostile"\n        True:  -> Set Color (ReticleImage): Red\n        False: -> Set Color (ReticleImage): White\n'})}),"\n",(0,s.jsx)(n.h3,{id:"step-4-build-the-presenter-2",children:"Step 4: Build the Presenter"}),"\n",(0,s.jsx)(n.p,{children:"For a target reticle, the presenter also needs to position the widget over the target in screen space."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Variables:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ReticleWidget"})," (type: ",(0,s.jsx)(n.code,{children:"WBP_TargetReticle"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Construction and binding:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event BeginPlay\n  -> Create Widget (WBP_TargetReticle)\n  -> Add to Viewport\n  -> ReticleWidget -> SetFocused(false)  // Hidden initially\n\n  -> TargetingComponent -> Bind OnDomainCandidateChanged\n  -> TargetingComponent -> Bind OnDescriptorChanged\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Event wiring:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: OnDomainCandidateChanged (Previous, New, ChannelId)\n  -> ReticleWidget -> SetTargetActor(New)\n  -> ReticleWidget -> SetTargetActive(IsValid(New))\n\nEvent: OnDescriptorChanged (Candidate, Descriptor, ChannelId)\n  -> ReticleWidget -> UpdateFromDescriptor(Descriptor)\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Tick"})," (position reticle on screen):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event Tick\n  -> TargetActor = ReticleWidget -> GetTargetActor()\n  -> Branch: IsValid(TargetActor) AND ReticleWidget -> IsTargetActive()\n    True:\n      -> Project World Location to Screen (TargetActor.GetActorLocation())\n      -> Set Position in Viewport (ReticleWidget, ScreenPosition)\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"pattern-5-target-info-panel",children:"Pattern 5: Target Info Panel"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use case:"})," RPG, ARPG \u2014 floating nameplate with name, icon, health"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Base class:"})," ",(0,s.jsx)(n.code,{children:"UERPTargetingWidgetBase"})]}),"\n",(0,s.jsx)(n.h3,{id:"step-1-create-the-widget-blueprint-4",children:"Step 1: Create the Widget Blueprint"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Widget Blueprint -> Reparent to ",(0,s.jsx)(n.code,{children:"ERPTargetingWidgetBase"})]}),"\n",(0,s.jsxs)(n.li,{children:["Name: ",(0,s.jsx)(n.code,{children:"WBP_TargetInfoPanel"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-2-design-the-layout-4",children:"Step 2: Design the Layout"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'[VerticalBox]\n  [HorizontalBox]\n    [Image: TargetIcon]\n    [TextBlock: TargetName]     // "Goblin Warrior"\n  [ProgressBar: HealthBar]      // Populated from actor data\n  [TextBlock: DistanceText]     // "15m"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-override-hooks-3",children:"Step 3: Override Hooks"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OnDescriptorUpdated"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'Event: On Descriptor Updated (Descriptor)\n  -> Branch: IsValid(Descriptor)\n    True:\n      -> Set Text (TargetName): Descriptor.DisplayName\n      -> Branch: Is Valid (Descriptor.Icon)\n        True: -> Async Load Asset -> Set Brush (TargetIcon)\n      // Style based on tags\n      -> Branch: Descriptor.TargetTags HasTag "Boss"\n        True: -> Set Color (TargetName): Gold\n    False:\n      -> Set Text (TargetName): "Unknown"\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OnTargetActorChanged"})," \u2014 query actor-specific data:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: On Target Actor Changed (NewTargetActor)\n  -> Branch: IsValid(NewTargetActor)\n    True:\n      // Get health from your game's health component\n      -> Get Component (HealthComponent) from NewTargetActor\n      -> Branch: IsValid(HealthComponent)\n        True: -> Set Percent (HealthBar): HealthComponent.GetHealthPercent()\n               -> Set Visibility (HealthBar): Visible\n        False: -> Set Visibility (HealthBar): Collapsed\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-4-build-the-presenter-3",children:"Step 4: Build the Presenter"}),"\n",(0,s.jsx)(n.p,{children:"Same wiring as the target reticle pattern:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: OnDomainCandidateChanged (Previous, New, ChannelId)\n  -> InfoPanel -> SetTargetActor(New)\n  -> InfoPanel -> SetTargetActive(IsValid(New))\n\nEvent: OnDescriptorChanged (Candidate, Descriptor, ChannelId)\n  -> InfoPanel -> UpdateFromDescriptor(Descriptor)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For the health bar to update in real-time, either tick-poll or bind to the health component's events in ",(0,s.jsx)(n.code,{children:"OnTargetActorChanged"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"choosing-the-right-widget-type",children:"Choosing the Right Widget Type"}),"\n",(0,s.jsx)(n.p,{children:"Use the descriptor to decide which widget to show:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Event: OnDescriptorChanged (Candidate, Descriptor, ChannelId)\n  -> Branch: Descriptor.IsMultiPressInteraction()\n    True: -> Show MultiPressWidget\n  -> Branch: Descriptor.IsHoldInteraction()\n    True: -> Show HoldWidget\n  -> Otherwise:\n    -> Show SimplePromptWidget\n"})}),"\n",(0,s.jsx)(n.p,{children:"For games with mixed interaction types (some doors are instant, some chests require holding, some traps require mashing), you can create all three widgets at startup and swap between them based on the descriptor."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"choosing-the-right-presenter-location",children:"Choosing the Right Presenter Location"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Presenter Location"}),(0,s.jsx)(n.th,{children:"When to Use"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"PlayerController"})}),(0,s.jsx)(n.td,{children:"Most common. Owns the interaction/targeting components."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"HUD Blueprint"})}),(0,s.jsxs)(n.td,{children:["When your HUD already manages all UI. Access components via ",(0,s.jsx)(n.code,{children:"GetOwningPlayerController"}),"."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Custom Actor Component"})}),(0,s.jsx)(n.td,{children:"When you want reusable presenter logic across multiple characters."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Widget itself"})}),(0,s.jsx)(n.td,{children:"Only for very simple cases. Generally avoid \u2014 keeps widgets passive."})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"building-custom-widgets-from-scratch",children:"Building Custom Widgets from Scratch"}),"\n",(0,s.jsxs)(n.p,{children:["If the base classes don't fit your needs, you can build directly on ",(0,s.jsx)(n.code,{children:"UUserWidget"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Create a Widget Blueprint (no special parent class)"}),"\n",(0,s.jsxs)(n.li,{children:["Add a custom event or function: ",(0,s.jsx)(n.code,{children:"UpdateFromData(FERPInteractionDescriptor Descriptor)"})]}),"\n",(0,s.jsx)(n.li,{children:"Wire from presenter exactly the same way"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The base classes provide convenience (cached descriptor, focus tracking, input key helper), but you're not required to use them. The architecture is the same either way: descriptor flows from domain to presenter to widget."}),"\n",(0,s.jsx)(n.h3,{id:"using-presentationhints",children:"Using PresentationHints"}),"\n",(0,s.jsxs)(n.p,{children:["For game-specific data that doesn't fit standard descriptor fields, use ",(0,s.jsx)(n.code,{children:"PresentationHints"}),":"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"On the interactable actor:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'Event: Get Interaction Descriptor\n  -> Make Descriptor\n  -> Add to PresentationHints Map:\n    Key: "CurrencyCost"\n    Value: Your UObject wrapping the cost data\n  -> Set Out Descriptor\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"On the widget:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'Event: On Descriptor Updated (Descriptor)\n  -> Find in Map (Descriptor.PresentationHints, "CurrencyCost")\n  -> Branch: Found\n    True: -> Cast to UCostData -> Set Text (CostText): Cost.Amount\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"c-presenter-example",children:"C++ Presenter Example"}),"\n",(0,s.jsx)(n.p,{children:"For C++ projects, here's a minimal presenter component:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'#pragma once\n\n#include "CoreMinimal.h"\n#include "Components/ActorComponent.h"\n#include "Domains/Interaction/ERPInteractionDescriptor.h"\n#include "ERPInteractionPresenter.generated.h"\n\nclass UERPInteractionComponent;\nclass UERPInteractionWidgetBase;\n\nUCLASS(Blueprintable, meta=(BlueprintSpawnableComponent))\nclass YOURGAME_API UERPInteractionPresenter : public UActorComponent\n{\n    GENERATED_BODY()\n\npublic:\n    UPROPERTY(EditAnywhere, Category = "Presenter")\n    TSubclassOf<UERPInteractionWidgetBase> WidgetClass;\n\nprotected:\n    virtual void BeginPlay() override;\n    virtual void EndPlay(const EEndPlayReason::Type EndPlayReason) override;\n\nprivate:\n    UPROPERTY(Transient)\n    TObjectPtr<UERPInteractionWidgetBase> Widget;\n\n    UPROPERTY(Transient)\n    TObjectPtr<UERPInteractionComponent> InteractionComponent;\n\n    UFUNCTION()\n    void OnDescriptorChanged(AActor* Candidate,\n        const FERPInteractionDescriptor& Descriptor, FName ChannelId);\n\n    UFUNCTION()\n    void OnCandidateChanged(AActor* Previous, AActor* New, FName ChannelId);\n};\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'#include "ERPInteractionPresenter.h"\n#include "Domains/Interaction/ERPInteractionComponent.h"\n#include "UI/Interaction/ERPInteractionWidgetBase.h"\n#include "GameFramework/PlayerController.h"\n\nvoid UERPInteractionPresenter::BeginPlay()\n{\n    Super::BeginPlay();\n\n    InteractionComponent = GetOwner()->FindComponentByClass<UERPInteractionComponent>();\n    if (!InteractionComponent || !WidgetClass)\n    {\n        return;\n    }\n\n    APlayerController* PC = Cast<APlayerController>(GetOwner());\n    if (!PC)\n    {\n        return;\n    }\n\n    Widget = CreateWidget<UERPInteractionWidgetBase>(PC, WidgetClass);\n    if (Widget)\n    {\n        Widget->AddToViewport();\n        Widget->SetFocused(false);\n    }\n\n    InteractionComponent->OnDescriptorChanged.AddDynamic(\n        this, &UERPInteractionPresenter::OnDescriptorChanged);\n    InteractionComponent->OnDomainCandidateChanged.AddDynamic(\n        this, &UERPInteractionPresenter::OnCandidateChanged);\n}\n\nvoid UERPInteractionPresenter::EndPlay(const EEndPlayReason::Type EndPlayReason)\n{\n    if (Widget)\n    {\n        Widget->RemoveFromParent();\n        Widget = nullptr;\n    }\n    Super::EndPlay(EndPlayReason);\n}\n\nvoid UERPInteractionPresenter::OnDescriptorChanged(AActor* Candidate,\n    const FERPInteractionDescriptor& Descriptor, FName ChannelId)\n{\n    if (Widget)\n    {\n        Widget->UpdateFromDescriptor(Descriptor);\n        Widget->SetFocused(true);\n    }\n}\n\nvoid UERPInteractionPresenter::OnCandidateChanged(AActor* Previous,\n    AActor* New, FName ChannelId)\n{\n    if (Widget && !New)\n    {\n        Widget->SetFocused(false);\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["This presenter component auto-wires everything. Add it to your PlayerController, set ",(0,s.jsx)(n.code,{children:"WidgetClass"})," to your WBP, and it works."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Pattern"}),(0,s.jsx)(n.th,{children:"Widget Base"}),(0,s.jsx)(n.th,{children:"Descriptor Field"}),(0,s.jsx)(n.th,{children:"Presenter Drives"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Simple Prompt"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ERPInteractionWidgetBase"})}),(0,s.jsx)(n.td,{children:"(all standard fields)"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"UpdateFromDescriptor"})," + ",(0,s.jsx)(n.code,{children:"SetFocused"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Hold-to-Interact"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ERPHoldInteractionWidgetBase"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"HoldDuration > 0"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"SetHoldProgress(time / duration)"})," per frame"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Multi-Press"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ERPHoldInteractionWidgetBase"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"RequiredPresses > 0"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"SetHoldProgress(presses / required)"})," per press"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Target Reticle"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ERPTargetingWidgetBase"})}),(0,s.jsx)(n.td,{children:"(from UERPTargetDescriptor)"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"SetTargetActive"})," + ",(0,s.jsx)(n.code,{children:"SetTargetActor"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Target Info"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ERPTargetingWidgetBase"})}),(0,s.jsx)(n.td,{children:"(from UERPTargetDescriptor)"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"UpdateFromDescriptor"})," + ",(0,s.jsx)(n.code,{children:"SetTargetActor"})]})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.p,{children:["Set up interactions with ",(0,s.jsx)(n.a,{href:"/ElysAwareness/InteractionGuide",children:"Interaction Guide"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Set up targeting with ",(0,s.jsx)(n.a,{href:"/ElysAwareness/TargetingGuide",children:"Targeting Guide"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Create custom domains with ",(0,s.jsx)(n.a,{href:"/ElysAwareness/CustomDomains",children:"Custom Domains"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Check complete API in ",(0,s.jsx)(n.a,{href:"/ElysAwareness/API-Reference",children:"API Reference"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);