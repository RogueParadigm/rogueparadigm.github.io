"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[769],{8453(e,n,t){t.d(n,{R:()=>a,x:()=>l});var s=t(6540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}},8701(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"Customization","title":"Customization Guide","description":"Create custom pipeline components and extend ElysAwareness for advanced use cases.","source":"@site/../Documentation/Customization.md","sourceDirName":".","slug":"/Customization","permalink":"/ElysAwareness/Customization","draft":false,"unlisted":false,"editUrl":"https://github.com/RogueParadigm/ElysAwareness/tree/main/Documentation/../Documentation/Customization.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"id":"Customization","title":"Customization Guide","sidebar_position":9},"sidebar":"docsSidebar","previous":{"title":"Built-in Widgets","permalink":"/ElysAwareness/BuiltInWidgets"},"next":{"title":"API Reference","permalink":"/ElysAwareness/API-Reference"}}');var i=t(4848),r=t(8453);const a={id:"Customization",title:"Customization Guide",sidebar_position:9},l=void 0,o={},c=[{value:"When to Customize",id:"when-to-customize",level:2},{value:"Extension Points",id:"extension-points",level:2},{value:"Custom Samplers",id:"custom-samplers",level:2},{value:"Purpose",id:"purpose",level:3},{value:"Interface",id:"interface",level:3},{value:"C++ Example: Line Trace Sampler",id:"c-example-line-trace-sampler",level:3},{value:"Custom Filters",id:"custom-filters",level:2},{value:"Purpose",id:"purpose-1",level:3},{value:"Interface",id:"interface-1",level:3},{value:"C++ Example: Line of Sight Filter",id:"c-example-line-of-sight-filter",level:3},{value:"Custom Scorers",id:"custom-scorers",level:2},{value:"Purpose",id:"purpose-2",level:3},{value:"Interface",id:"interface-2",level:3},{value:"C++ Example: Health Priority Scorer",id:"c-example-health-priority-scorer",level:3},{value:"Using Weights",id:"using-weights",level:3},{value:"Custom Aggregators",id:"custom-aggregators",level:2},{value:"Purpose",id:"purpose-3",level:3},{value:"Interface",id:"interface-3",level:3},{value:"C++ Example: Min Aggregator",id:"c-example-min-aggregator",level:3},{value:"Custom Resolvers",id:"custom-resolvers",level:2},{value:"Purpose",id:"purpose-4",level:3},{value:"Interface",id:"interface-4",level:3},{value:"C++ Example: Sticky Target Resolver",id:"c-example-sticky-target-resolver",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Create custom pipeline components and extend ElysAwareness for advanced use cases."}),"\n",(0,i.jsx)(n.h2,{id:"when-to-customize",children:"When to Customize"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Pipeline components"})," (samplers, filters, scorers, aggregators, resolvers): when default components don't fit your needs."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Domain components"}),": when you need a new gameplay system that reacts to perception. See ",(0,i.jsx)(n.a,{href:"/ElysAwareness/CustomDomains",children:"Custom Domains"})," for a dedicated guide."]}),"\n",(0,i.jsx)(n.h2,{id:"extension-points",children:"Extension Points"}),"\n",(0,i.jsx)(n.p,{children:"Each pipeline stage has an abstract base class you can extend in Blueprint or C++:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"UERPSamplerBase"})," - Custom candidate gathering"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"UERPFilterBase"})," - Custom filtering logic"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"UERPScorerBase"})," - Custom scoring logic"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"UERPAggregatorBase"})," - Custom score combination"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"UERPResolverBase"})," - Custom winner selection"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"custom-samplers",children:"Custom Samplers"}),"\n",(0,i.jsx)(n.h3,{id:"purpose",children:"Purpose"}),"\n",(0,i.jsx)(n.p,{children:"Samplers gather potential candidates. The plugin ships with spatial samplers (sphere/box overlap) and a registry sampler (declarative). Customize when you need:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Different spatial queries (raycast, cone sweep)"}),"\n",(0,i.jsx)(n.li,{children:"Specialized non-spatial queries beyond the built-in registry"}),"\n",(0,i.jsx)(n.li,{children:"Cached/optimized candidate lists"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"interface",children:"Interface"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'UFUNCTION(BlueprintNativeEvent, Category = "ElysAwareness|Pipeline")\nvoid Sample(const FERPAwarenessContext& Context, float Range, TArray<AActor*>& OutCandidates) const;\n'})}),"\n",(0,i.jsx)(n.h3,{id:"c-example-line-trace-sampler",children:"C++ Example: Line Trace Sampler"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"UCLASS(Blueprintable, EditInlineNew, DefaultToInstanced)\nclass YOURGAME_API UERPLineTraceSampler : public UERPSamplerBase\n{\n    GENERATED_BODY()\npublic:\n    UPROPERTY(EditAnywhere) TEnumAsByte<ECollisionChannel> TraceChannel = ECC_Visibility;\n\n    virtual void Sample_Implementation(const FERPAwarenessContext& Context, float Range,\n        TArray<AActor*>& OutCandidates) const override\n    {\n        if (!Context.ContextActor) return;\n        UWorld* World = Context.ContextActor->GetWorld();\n        if (!World) return;\n\n        FCollisionQueryParams Params;\n        Params.AddIgnoredActor(Context.ContextActor);\n\n        FHitResult Hit;\n        if (World->LineTraceSingleByChannel(Hit, Context.Origin,\n            Context.Origin + Context.Forward * Range, TraceChannel, Params))\n        {\n            if (AActor* A = Hit.GetActor()) OutCandidates.Add(A);\n        }\n    }\n};\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"custom-filters",children:"Custom Filters"}),"\n",(0,i.jsx)(n.h3,{id:"purpose-1",children:"Purpose"}),"\n",(0,i.jsx)(n.p,{children:"Filters reject invalid candidates. Customize for:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Line of sight checks"}),"\n",(0,i.jsx)(n.li,{children:"Team/faction filtering"}),"\n",(0,i.jsx)(n.li,{children:"State validation (alive, active)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"interface-1",children:"Interface"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'UFUNCTION(BlueprintNativeEvent, Category = "ElysAwareness|Pipeline")\nbool Passes(const FERPAwarenessContext& Context, AActor* Candidate) const;\n'})}),"\n",(0,i.jsx)(n.h3,{id:"c-example-line-of-sight-filter",children:"C++ Example: Line of Sight Filter"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"UCLASS(Blueprintable, EditInlineNew, DefaultToInstanced)\nclass YOURGAME_API UERPLineOfSightFilter : public UERPFilterBase\n{\n    GENERATED_BODY()\npublic:\n    UPROPERTY(EditAnywhere) TEnumAsByte<ECollisionChannel> TraceChannel = ECC_Visibility;\n\n    virtual bool Passes_Implementation(const FERPAwarenessContext& Context,\n        AActor* Candidate) const override\n    {\n        if (!Context.ContextActor || !Candidate) return false;\n        UWorld* World = Context.ContextActor->GetWorld();\n        if (!World) return false;\n\n        FCollisionQueryParams Params;\n        Params.AddIgnoredActor(Context.ContextActor);\n        Params.AddIgnoredActor(Candidate);\n\n        FHitResult Hit;\n        bool bHit = World->LineTraceSingleByChannel(Hit, Context.Origin,\n            Candidate->GetActorLocation(), TraceChannel, Params);\n        return !bHit;\n    }\n};\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"custom-scorers",children:"Custom Scorers"}),"\n",(0,i.jsx)(n.h3,{id:"purpose-2",children:"Purpose"}),"\n",(0,i.jsxs)(n.p,{children:["Scorers assign numerical values. Each scorer is paired with a weight in the pipeline configuration (",(0,i.jsx)(n.code,{children:"FERPScorerEntry"}),")."]}),"\n",(0,i.jsx)(n.h3,{id:"interface-2",children:"Interface"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'UFUNCTION(BlueprintNativeEvent, Category = "ElysAwareness|Pipeline")\nfloat Score(const FERPAwarenessContext& Context, AActor* Candidate) const;\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Convention:"})," Lower score = better. Return ",(0,i.jsx)(n.code,{children:"ERPPipelineScore::RejectScore"})," to reject."]}),"\n",(0,i.jsx)(n.h3,{id:"c-example-health-priority-scorer",children:"C++ Example: Health Priority Scorer"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"UCLASS(Blueprintable, EditInlineNew, DefaultToInstanced)\nclass YOURGAME_API UERPHealthScorer : public UERPScorerBase\n{\n    GENERATED_BODY()\npublic:\n    UPROPERTY(EditAnywhere) bool bPrioritizeLowHealth = true;\n\n    virtual float Score_Implementation(const FERPAwarenessContext& Context,\n        AActor* Candidate) const override\n    {\n        UHealthComponent* HC = Candidate->FindComponentByClass<UHealthComponent>();\n        if (!HC) return 1.0f;\n        float HP = HC->GetHealthPercent();\n        return bPrioritizeLowHealth ? HP : (1.0f - HP);\n    }\n};\n"})}),"\n",(0,i.jsx)(n.h3,{id:"using-weights",children:"Using Weights"}),"\n",(0,i.jsx)(n.p,{children:"Configure in the pipeline:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Scorers:\n  - ERPDistanceScorer, Weight: 2.0    (distance matters more)\n  - ERPHealthScorer,   Weight: 1.0    (health is secondary)\n  - ERPConeScorer,     Weight: 0.5    (angle is tertiary)\n"})}),"\n",(0,i.jsx)(n.p,{children:"Each raw score is multiplied by its weight before aggregation."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"custom-aggregators",children:"Custom Aggregators"}),"\n",(0,i.jsx)(n.h3,{id:"purpose-3",children:"Purpose"}),"\n",(0,i.jsx)(n.p,{children:"Aggregators combine weighted scores. The default computes the weighted average (sum / count)."}),"\n",(0,i.jsx)(n.h3,{id:"interface-3",children:"Interface"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'UFUNCTION(BlueprintNativeEvent, Category = "ElysAwareness|Pipeline")\nfloat Aggregate(const TArray<float>& Scores) const;\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Note: The ",(0,i.jsx)(n.code,{children:"Scores"})," array contains already-weighted values."]}),"\n",(0,i.jsx)(n.h3,{id:"c-example-min-aggregator",children:"C++ Example: Min Aggregator"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"UCLASS(Blueprintable, EditInlineNew, DefaultToInstanced)\nclass YOURGAME_API UERPMinAggregator : public UERPAggregatorBase\n{\n    GENERATED_BODY()\npublic:\n    virtual float Aggregate_Implementation(const TArray<float>& Scores) const override\n    {\n        float Min = TNumericLimits<float>::Max();\n        for (float S : Scores) Min = FMath::Min(Min, S);\n        return (Min == TNumericLimits<float>::Max()) ? 0.f : Min;\n    }\n};\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"custom-resolvers",children:"Custom Resolvers"}),"\n",(0,i.jsx)(n.h3,{id:"purpose-4",children:"Purpose"}),"\n",(0,i.jsx)(n.p,{children:"Resolvers select the winner. The default picks lowest score."}),"\n",(0,i.jsx)(n.h3,{id:"interface-4",children:"Interface"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'UFUNCTION(BlueprintNativeEvent, Category = "ElysAwareness|Pipeline")\nbool Resolve(const TArray<FERPPipelineScoredCandidate>& ScoredCandidates,\n    FERPPipelineScoredCandidate& OutBest) const;\n'})}),"\n",(0,i.jsx)(n.h3,{id:"c-example-sticky-target-resolver",children:"C++ Example: Sticky Target Resolver"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"UCLASS(Blueprintable, EditInlineNew, DefaultToInstanced)\nclass YOURGAME_API UERPStickyResolver : public UERPResolverBase\n{\n    GENERATED_BODY()\npublic:\n    UPROPERTY(EditAnywhere) float StickyBias = 0.1f;\n    UPROPERTY() mutable TWeakObjectPtr<AActor> LastWinner;\n\n    virtual bool Resolve_Implementation(\n        const TArray<FERPPipelineScoredCandidate>& ScoredCandidates,\n        FERPPipelineScoredCandidate& OutBest) const override\n    {\n        if (ScoredCandidates.Num() == 0) return false;\n        OutBest = ScoredCandidates[0];\n        for (const auto& C : ScoredCandidates)\n        {\n            float Adjusted = C.Score;\n            if (C.Actor == LastWinner.Get()) Adjusted -= StickyBias;\n            if (Adjusted < OutBest.Score) OutBest = C;\n        }\n        LastWinner = OutBest.Actor;\n        return true;\n    }\n};\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Keep Stages Pure:"})," Don't modify candidates or context"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Normalize Scores:"})," Use 0.0-1.0 range when possible"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle Edge Cases:"})," Null checks, empty arrays, invalid context"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Optimize:"})," Filters run per-candidate, keep fast. Cache expensive calculations."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Document Parameters:"})," Use UPROPERTY meta tags and tooltips"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.p,{children:["Create custom domains with ",(0,i.jsx)(n.a,{href:"/ElysAwareness/CustomDomains",children:"Custom Domains"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Check complete API in ",(0,i.jsx)(n.a,{href:"/ElysAwareness/API-Reference",children:"API Reference"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"/ElysAwareness/Quick-Reference",children:"Quick Reference"})," for cheat sheet."]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);