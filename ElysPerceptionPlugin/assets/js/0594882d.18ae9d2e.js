"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[639],{4852(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>g,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"TargetingGuide","title":"Targeting Guide","description":"Complete guide to implementing combat targeting using ElysPerceptionPlugin.","source":"@site/../Documentation/TargetingGuide.md","sourceDirName":".","slug":"/TargetingGuide","permalink":"/ElysPerceptionPlugin/TargetingGuide","draft":false,"unlisted":false,"editUrl":"https://github.com/RogueParadigm/ElysPerceptionPlugin/tree/main/Documentation/../Documentation/TargetingGuide.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"TargetingGuide","title":"Targeting Guide","sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Interaction Guide","permalink":"/ElysPerceptionPlugin/InteractionGuide"},"next":{"title":"Custom Domains","permalink":"/ElysPerceptionPlugin/CustomDomains"}}');var i=r(4848),l=r(8453);const s={id:"TargetingGuide",title:"Targeting Guide",sidebar_position:5},a=void 0,c={},d=[{value:"Overview",id:"overview",level:2},{value:"Basic Setup",id:"basic-setup",level:2},{value:"1. Configure Targeting Pipeline",id:"1-configure-targeting-pipeline",level:3},{value:"2. Add Targeting Component",id:"2-add-targeting-component",level:3},{value:"3. Implement Targetable Interface",id:"3-implement-targetable-interface",level:3},{value:"4. Bind Events",id:"4-bind-events",level:3},{value:"Blueprint Example",id:"blueprint-example",level:2},{value:"Complete Targeting System",id:"complete-targeting-system",level:3},{value:"Targeting Rules",id:"targeting-rules",level:2},{value:"Pipeline Configurations",id:"pipeline-configurations",level:2},{value:"Distance-Only Targeting",id:"distance-only-targeting",level:3},{value:"Camera-Aware Targeting",id:"camera-aware-targeting",level:3},{value:"Screen-Space Targeting",id:"screen-space-targeting",level:3},{value:"UERPTargetDescriptor",id:"uerptargetdescriptor",level:2},{value:"Widget Integration",id:"widget-integration",level:2},{value:"Compared to ChannelListenerComponent",id:"compared-to-channellistenercomponent",level:2},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Complete guide to implementing combat targeting using ElysPerceptionPlugin."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["The targeting system builds on top of Perception via the ",(0,i.jsx)(n.code,{children:"UERPDomainComponent"})," base class. ",(0,i.jsx)(n.code,{children:"UERPTargetingComponent"})," provides eligibility validation using ",(0,i.jsx)(n.code,{children:"IERPTargetable"})," interface and targeting rules, along with descriptor tracking."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Architecture:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Perception:"})," Evaluates candidates via configurable pipeline"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Domain (Targeting):"})," ",(0,i.jsx)(n.code,{children:"UERPTargetingComponent"})," extends ",(0,i.jsx)(n.code,{children:"UERPDomainComponent"}),", validates eligibility"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Presentation:"})," Your implementation (UI indicators, lock-on camera, etc.)"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,i.jsx)(n.h3,{id:"1-configure-targeting-pipeline",children:"1. Configure Targeting Pipeline"}),"\n",(0,i.jsxs)(n.p,{children:["On your PlayerController or Pawn, configure ",(0,i.jsx)(n.code,{children:"ERPPerceptionComponent"}),":"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Target Pipeline Settings:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Channel Id: ",(0,i.jsx)(n.code,{children:"Target"})]}),"\n",(0,i.jsx)(n.li,{children:"Default Sampling Range: 3000.0"}),"\n",(0,i.jsxs)(n.li,{children:["Sampler: ",(0,i.jsx)(n.code,{children:"ERPSphereOverlapSampler"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Trace Channel: Visibility"}),"\n",(0,i.jsx)(n.li,{children:"Ignore Context Actor: check"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Filters: ",(0,i.jsx)(n.code,{children:"ERPTargetableFilter"})]}),"\n",(0,i.jsxs)(n.li,{children:["Scorers:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ERPDistanceScorer"})," (normalize by range), Weight: 1.0"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ERPConeScorer"})," (optional, for camera-aware targeting), Weight: 0.5"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Resolver: ",(0,i.jsx)(n.code,{children:"ERPResolverBase"})," (lowest score wins)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2-add-targeting-component",children:"2. Add Targeting Component"}),"\n",(0,i.jsxs)(n.p,{children:["Add ",(0,i.jsx)(n.code,{children:"ERPTargetingComponent"})," to your PlayerController or Pawn:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Channel Id: ",(0,i.jsx)(n.code,{children:"Target"})," (must match pipeline)"]}),"\n",(0,i.jsx)(n.li,{children:"Rules: (optional instanced targeting rules)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-implement-targetable-interface",children:"3. Implement Targetable Interface"}),"\n",(0,i.jsx)(n.p,{children:"On target actors (enemies, NPCs, destructibles):"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Blueprint:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Class Settings -> Interfaces -> Add ",(0,i.jsx)(n.code,{children:"ERPTargetable"})]}),"\n",(0,i.jsxs)(n.li,{children:["Implement ",(0,i.jsx)(n.code,{children:"Can Be Targeted By"})," -> return ",(0,i.jsx)(n.code,{children:"true"})," (or custom logic)"]}),"\n",(0,i.jsxs)(n.li,{children:["Optionally implement ",(0,i.jsx)(n.code,{children:"Get Target Descriptor"})," -> return a ",(0,i.jsx)(n.code,{children:"UERPTargetDescriptor"})," data asset"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"C++:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"class AYourEnemy : public ACharacter, public IERPTargetable\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    virtual bool CanBeTargetedBy_Implementation(AActor* TargetingActor) const override\r\n    {\r\n        return bIsAlive;\r\n    }\r\n\r\n    virtual UERPTargetDescriptor* GetTargetDescriptor_Implementation() const override\r\n    {\r\n        return TargetDescriptor; // Optional DataAsset\r\n    }\r\n\r\nprotected:\r\n    UPROPERTY(EditAnywhere) bool bIsAlive = true;\r\n    UPROPERTY(EditAnywhere) UERPTargetDescriptor* TargetDescriptor = nullptr;\r\n};\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-bind-events",children:"4. Bind Events"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"// In BeginPlay\r\nTargetingComponent->OnDomainCandidateChanged.AddDynamic(this, &AMyPC::OnTargetChanged);\r\nTargetingComponent->OnDescriptorChanged.AddDynamic(this, &AMyPC::OnTargetDescriptorChanged);\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"blueprint-example",children:"Blueprint Example"}),"\n",(0,i.jsx)(n.h3,{id:"complete-targeting-system",children:"Complete Targeting System"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Components on PlayerController:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ERPPerceptionComponent"})," (target pipeline configured)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ERPTargetingComponent"}),' (channel: "Target")']}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Event Graph:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"// Handle target change\r\nEvent: OnDomainCandidateChanged (Previous, New, ChannelId)\r\n  -> Set CurrentTarget = New\r\n  -> Branch: IsValid(New)\r\n    True:\r\n      -> Show Target Indicator Widget\r\n      -> Set Widget position to target actor\r\n    False:\r\n      -> Hide Target Indicator Widget\r\n\r\n// Attack current target\r\nInput Action: Attack\r\n  -> TargetingComp -> GetCurrentCandidate\r\n  -> IsValid?\r\n    True: -> Execute attack on target\r\n    False: -> Execute untargeted attack\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"targeting-rules",children:"Targeting Rules"}),"\n",(0,i.jsxs)(n.p,{children:["Add instanced ",(0,i.jsx)(n.code,{children:"UERPTargetRule"})," objects for composable validation:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"UCLASS(Blueprintable, EditInlineNew)\r\nclass UMyTeamRule : public UERPTargetRule\r\n{\r\n    GENERATED_BODY()\r\npublic:\r\n    virtual bool CanTarget_Implementation(AActor* Instigator, AActor* Target, FName ChannelId) const override\r\n    {\r\n        // Only target enemies (different team)\r\n        ITeamAgentInterface* InstigatorTeam = Cast<ITeamAgentInterface>(Instigator);\r\n        ITeamAgentInterface* TargetTeam = Cast<ITeamAgentInterface>(Target);\r\n        if (InstigatorTeam && TargetTeam)\r\n        {\r\n            return InstigatorTeam->GetGenericTeamId() != TargetTeam->GetGenericTeamId();\r\n        }\r\n        return true;\r\n    }\r\n};\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"pipeline-configurations",children:"Pipeline Configurations"}),"\n",(0,i.jsx)(n.h3,{id:"distance-only-targeting",children:"Distance-Only Targeting"}),"\n",(0,i.jsx)(n.p,{children:"Simple nearest-enemy targeting:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Sampler: ERPSphereOverlapSampler (range: 2000)\r\nFilter: ERPTargetableFilter\r\nScorer: ERPDistanceScorer (weight: 1.0)\r\nResolver: ERPResolverBase\n"})}),"\n",(0,i.jsx)(n.h3,{id:"camera-aware-targeting",children:"Camera-Aware Targeting"}),"\n",(0,i.jsx)(n.p,{children:"Prefers enemies near crosshair:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Sampler: ERPSphereOverlapSampler (range: 3000)\r\nFilter: ERPTargetableFilter\r\nScorers:\r\n  - ERPDistanceScorer (weight: 1.0)\r\n  - ERPConeScorer (cone: 45 degrees, weight: 1.5)\r\nResolver: ERPResolverBase\n"})}),"\n",(0,i.jsx)(n.h3,{id:"screen-space-targeting",children:"Screen-Space Targeting"}),"\n",(0,i.jsx)(n.p,{children:"Lock-on to enemy nearest screen center:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Sampler: ERPSphereOverlapSampler\r\nFilter: ERPTargetableFilter\r\nScorer: ERPViewportEllipseScorer (weight: 1.0)\r\n  - Enable bProvideViewportInfoWhenAvailable on PerceptionComponent\r\nResolver: ERPResolverBase\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"uerptargetdescriptor",children:"UERPTargetDescriptor"}),"\n",(0,i.jsxs)(n.p,{children:["Target descriptors are ",(0,i.jsx)(n.code,{children:"UDataAsset"}),"-based objects that describe targeting properties:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"UCLASS(BlueprintType)\r\nclass UERPTargetDescriptor : public UDataAsset\r\n{\r\n    GENERATED_BODY()\r\npublic:\r\n    UPROPERTY(EditAnywhere, BlueprintReadOnly) FText DisplayName;\r\n    UPROPERTY(EditAnywhere, BlueprintReadOnly) TSoftObjectPtr<UTexture2D> Icon;\r\n    UPROPERTY(EditAnywhere, BlueprintReadOnly) FGameplayTagContainer TargetTags;\r\n    UPROPERTY(EditAnywhere, BlueprintReadOnly) TMap<FName, TObjectPtr<UObject>> PresentationHints;\r\n};\n"})}),"\n",(0,i.jsx)(n.p,{children:"Use descriptors to drive UI without coupling to specific actor types."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"widget-integration",children:"Widget Integration"}),"\n",(0,i.jsxs)(n.p,{children:["The plugin provides ",(0,i.jsx)(n.code,{children:"UERPTargetingWidgetBase"})," for targeting UI (reticles, lock-on indicators, info panels)."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Pattern"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Key Hooks"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Target Reticle"}),(0,i.jsx)(n.td,{children:"Lock-on marker positioned on target"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"OnTargetActiveChanged"}),", tick for positioning"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Target Info Panel"}),(0,i.jsx)(n.td,{children:"Nameplate with name, icon, health"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"OnDescriptorUpdated"}),", ",(0,i.jsx)(n.code,{children:"OnTargetActorChanged"})]})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Quick wiring"})," (presenter on your PlayerController):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Event: OnDomainCandidateChanged (Previous, New, ChannelId)\r\n  -> TargetWidget -> SetTargetActor(New)\r\n  -> TargetWidget -> SetTargetActive(IsValid(New))\r\n\r\nEvent: OnDescriptorChanged (Candidate, Descriptor, ChannelId)\r\n  -> TargetWidget -> UpdateFromDescriptor(Descriptor)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For complete step-by-step walkthroughs including screen-space positioning, descriptor-driven styling, and health bar integration, see the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/ElysPerceptionPlugin/WidgetGuide",children:"Widget Guide"})}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"compared-to-channellistenercomponent",children:"Compared to ChannelListenerComponent"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Feature"}),(0,i.jsx)(n.th,{children:"ERPTargetingComponent"}),(0,i.jsx)(n.th,{children:"ERPChannelListenerComponent"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Eligibility validation"}),(0,i.jsx)(n.td,{children:"IERPTargetable + Rules"}),(0,i.jsx)(n.td,{children:"None"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Descriptor tracking"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Base class"}),(0,i.jsx)(n.td,{children:"UERPDomainComponent"}),(0,i.jsx)(n.td,{children:"UActorComponent"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Use case"}),(0,i.jsx)(n.td,{children:"Full targeting domain"}),(0,i.jsx)(n.td,{children:"Lightweight event mirror"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"ERPChannelListenerComponent"})," when you only need raw perception events without eligibility checks."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.p,{children:["Build your targeting UI with ",(0,i.jsx)(n.a,{href:"/ElysPerceptionPlugin/WidgetGuide",children:"Widget Guide"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Set up interactions with ",(0,i.jsx)(n.a,{href:"/ElysPerceptionPlugin/InteractionGuide",children:"Interaction Guide"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Create custom domains with ",(0,i.jsx)(n.a,{href:"/ElysPerceptionPlugin/CustomDomains",children:"Custom Domains"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Check complete API in ",(0,i.jsx)(n.a,{href:"/ElysPerceptionPlugin/API-Reference",children:"API Reference"}),"."]})]})}function g(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453(e,n,r){r.d(n,{R:()=>s,x:()=>a});var t=r(6540);const i={},l=t.createContext(i);function s(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);