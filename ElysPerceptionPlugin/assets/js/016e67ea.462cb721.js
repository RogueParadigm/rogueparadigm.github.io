"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[614],{3846(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"AdvancedCustomization","title":"Advanced Customization Guide","description":"This guide covers creating custom pipeline components and extending the ElysPerceptionPlugin for advanced use cases.","source":"@site/../Documentation/AdvancedCustomization.md","sourceDirName":".","slug":"/AdvancedCustomization","permalink":"/ElysPerceptionPlugin/AdvancedCustomization","draft":false,"unlisted":false,"editUrl":"https://github.com/RogueParadigm/ElysPerceptionPlugin/tree/main/Documentation/../Documentation/AdvancedCustomization.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"System Overview","permalink":"/ElysPerceptionPlugin/ArchitectureDeepDive"},"next":{"title":"API-Reference","permalink":"/ElysPerceptionPlugin/API-Reference"}}');var l=r(4848),t=r(8453);const s={},o="Advanced Customization Guide",c={},a=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Overview",id:"overview",level:2},{value:"When to Customize",id:"when-to-customize",level:3},{value:"Extension Points",id:"extension-points",level:3},{value:"Implementation Options",id:"implementation-options",level:3},{value:"Creating Custom Samplers",id:"creating-custom-samplers",level:2},{value:"Purpose",id:"purpose",level:3},{value:"Base Class",id:"base-class",level:3},{value:"C++ Example: Line Trace Sampler",id:"c-example-line-trace-sampler",level:3},{value:"Blueprint Example: Nearby Actors Sampler",id:"blueprint-example-nearby-actors-sampler",level:3},{value:"Creating Custom Filters",id:"creating-custom-filters",level:2},{value:"Purpose",id:"purpose-1",level:3},{value:"Base Class",id:"base-class-1",level:3},{value:"C++ Example: Line of Sight Filter",id:"c-example-line-of-sight-filter",level:3},{value:"Blueprint Example: Alive Filter",id:"blueprint-example-alive-filter",level:3},{value:"Creating Custom Scorers",id:"creating-custom-scorers",level:2},{value:"Purpose",id:"purpose-2",level:3},{value:"Base Class",id:"base-class-2",level:3},{value:"C++ Example: Health Priority Scorer",id:"c-example-health-priority-scorer",level:3},{value:"Blueprint Example: Threat Level Scorer",id:"blueprint-example-threat-level-scorer",level:3},{value:"Creating Custom Aggregators",id:"creating-custom-aggregators",level:2},{value:"Purpose",id:"purpose-3",level:3},{value:"Base Class",id:"base-class-3",level:3},{value:"C++ Example: Weighted Aggregator",id:"c-example-weighted-aggregator",level:3},{value:"Blueprint Example: Max Aggregator",id:"blueprint-example-max-aggregator",level:3},{value:"Creating Custom Resolvers",id:"creating-custom-resolvers",level:2},{value:"Purpose",id:"purpose-4",level:3},{value:"Base Class",id:"base-class-4",level:3},{value:"C++ Example: Threshold Resolver",id:"c-example-threshold-resolver",level:3},{value:"Blueprint vs C++",id:"blueprint-vs-c",level:2},{value:"Blueprint Custom Components",id:"blueprint-custom-components",level:3},{value:"C++ Custom Components",id:"c-custom-components",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Performance",id:"performance",level:3},{value:"Architecture",id:"architecture",level:3},{value:"Debugging",id:"debugging",level:3},{value:"Design",id:"design",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"advanced-customization-guide",children:"Advanced Customization Guide"})}),"\n",(0,l.jsx)(n.p,{children:"This guide covers creating custom pipeline components and extending the ElysPerceptionPlugin for advanced use cases."}),"\n",(0,l.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#overview",children:"Overview"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#creating-custom-samplers",children:"Creating Custom Samplers"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#creating-custom-filters",children:"Creating Custom Filters"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#creating-custom-scorers",children:"Creating Custom Scorers"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#creating-custom-aggregators",children:"Creating Custom Aggregators"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#creating-custom-resolvers",children:"Creating Custom Resolvers"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#blueprint-vs-c",children:"Blueprint vs C++"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#best-practices",children:"Best Practices"})}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.h3,{id:"when-to-customize",children:"When to Customize"}),"\n",(0,l.jsx)(n.p,{children:"Create custom components when:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Default components don't fit your needs"}),"\n",(0,l.jsx)(n.li,{children:"You need game-specific logic (health priority, threat levels)"}),"\n",(0,l.jsx)(n.li,{children:"You want special filtering (line of sight, visibility)"}),"\n",(0,l.jsx)(n.li,{children:"You need unique scoring (custom gameplay metrics)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"extension-points",children:"Extension Points"}),"\n",(0,l.jsx)(n.p,{children:"The plugin provides base classes for each pipeline stage:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"UERPSamplerBase"})," - Custom candidate gathering"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"UERPFilterBase"})," - Custom filtering logic"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"UERPScorerBase"})," - Custom scoring logic"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"UERPAggregatorBase"})," - Custom score combination"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"UERPResolverBase"})," - Custom winner selection"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"implementation-options",children:"Implementation Options"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Blueprint"}),(0,l.jsx)(n.th,{children:"C++"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Quick prototyping"}),(0,l.jsx)(n.td,{children:"Best performance"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Designer-friendly"}),(0,l.jsx)(n.td,{children:"Type safety"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"No compilation"}),(0,l.jsx)(n.td,{children:"Full engine access"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Limited debugging"}),(0,l.jsx)(n.td,{children:"Advanced debugging"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:"Choose based on:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Blueprint"}),": Simple logic, rapid iteration, designer-owned"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"C++"}),": Complex logic, performance-critical, programmer-owned"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"creating-custom-samplers",children:"Creating Custom Samplers"}),"\n",(0,l.jsx)(n.h3,{id:"purpose",children:"Purpose"}),"\n",(0,l.jsx)(n.p,{children:"Samplers gather potential candidates from the world. Customize when you need:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Different spatial queries (raycast, box overlap, etc.)"}),"\n",(0,l.jsx)(n.li,{children:"Non-spatial queries (GameState actor lists, etc.)"}),"\n",(0,l.jsx)(n.li,{children:"Cached/optimized candidate lists"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"base-class",children:"Base Class"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'UCLASS(Abstract, BlueprintType, Blueprintable, EditInlineNew, DefaultToInstanced)\r\nclass ELYSPERCEPTIONPLUGIN_API UERPSamplerBase : public UObject\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    UFUNCTION(BlueprintNativeEvent, Category = "ElysPerception|Pipeline")\r\n    void Sample(const FERPPerceptionContext& Context, float Range, TArray<AActor*>& OutCandidates) const;\r\n};\n'})}),"\n",(0,l.jsx)(n.h3,{id:"c-example-line-trace-sampler",children:"C++ Example: Line Trace Sampler"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPLineTraceSampler.h:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#pragma once\r\n\r\n#include "CoreMinimal.h"\r\n#include "Pipeline/Samplers/ERPSamplerBase.h"\r\n#include "ERPLineTraceSampler.generated.h"\r\n\r\nUCLASS(Blueprintable, EditInlineNew)\r\nclass YOURGAME_API UERPLineTraceSampler : public UERPSamplerBase\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    virtual void Sample_Implementation(\r\n        const FERPPerceptionContext& Context,\r\n        float Range,\r\n        TArray<AActor*>& OutCandidates) const override;\r\n\r\n    UPROPERTY(EditAnywhere, Category = "Sampling")\r\n    TEnumAsByte<ECollisionChannel> TraceChannel = ECC_Visibility;\r\n    \r\n    UPROPERTY(EditAnywhere, Category = "Sampling")\r\n    bool bTraceComplex = false;\r\n};\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPLineTraceSampler.cpp:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#include "ERPLineTraceSampler.h"\r\n#include "Engine/World.h"\r\n\r\nvoid UERPLineTraceSampler::Sample_Implementation(\r\n    const FERPPerceptionContext& Context,\r\n    float Range,\r\n    TArray<AActor*>& OutCandidates) const\r\n{\r\n    OutCandidates.Empty();\r\n    \r\n    if (!Context.ContextActor)\r\n        return;\r\n    \r\n    UWorld* World = Context.ContextActor->GetWorld();\r\n    if (!World)\r\n        return;\r\n    \r\n    // Line trace in forward direction\r\n    FVector Start = Context.Origin;\r\n    FVector End = Context.Origin + Context.Forward * Range;\r\n    \r\n    FCollisionQueryParams QueryParams;\r\n    QueryParams.bTraceComplex = bTraceComplex;\r\n    QueryParams.AddIgnoredActor(Context.ContextActor);\r\n    \r\n    FHitResult HitResult;\r\n    if (World->LineTraceSingleByChannel(HitResult, Start, End, TraceChannel, QueryParams))\r\n    {\r\n        if (HitResult.GetActor())\r\n        {\r\n            OutCandidates.Add(HitResult.GetActor());\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"blueprint-example-nearby-actors-sampler",children:"Blueprint Example: Nearby Actors Sampler"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Create Blueprint class:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Content Browser \u2192 Right-click \u2192 Blueprint Class"}),"\n",(0,l.jsxs)(n.li,{children:["Pick ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"ERPSamplerBase"})})," as parent class"]}),"\n",(0,l.jsxs)(n.li,{children:["Name: ",(0,l.jsx)(n.code,{children:"BP_NearbyActorsSampler"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Implement Sample:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-blueprint",children:"Function: Sample (Context, Range, OutCandidates)\r\n  \u2192 Get All Actors of Class: YourActorClass\r\n  \u2192 For Each Actor:\r\n    \u2192 Get Distance (Context.Origin to Actor)\r\n    \u2192 Branch: Distance < Range\r\n      True: \u2192 Add to OutCandidates\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"creating-custom-filters",children:"Creating Custom Filters"}),"\n",(0,l.jsx)(n.h3,{id:"purpose-1",children:"Purpose"}),"\n",(0,l.jsx)(n.p,{children:"Filters reject invalid candidates. Customize when you need:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Line of sight checks"}),"\n",(0,l.jsx)(n.li,{children:"State validation (alive, active, etc.)"}),"\n",(0,l.jsx)(n.li,{children:"Permission checks"}),"\n",(0,l.jsx)(n.li,{children:"Distance/angle filtering"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"base-class-1",children:"Base Class"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'UCLASS(Abstract, BlueprintType, Blueprintable, EditInlineNew, DefaultToInstanced)\r\nclass ELYSPERCEPTIONPLUGIN_API UERPFilterBase : public UObject\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    UFUNCTION(BlueprintNativeEvent, Category = "ElysPerception|Pipeline")\r\n    bool Passes(const FERPPerceptionContext& Context, AActor* Candidate) const;\r\n};\n'})}),"\n",(0,l.jsx)(n.h3,{id:"c-example-line-of-sight-filter",children:"C++ Example: Line of Sight Filter"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPLineOfSightFilter.h:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#pragma once\r\n\r\n#include "CoreMinimal.h"\r\n#include "Pipeline/Filters/ERPFilterBase.h"\r\n#include "ERPLineOfSightFilter.generated.h"\r\n\r\nUCLASS(Blueprintable, EditInlineNew)\r\nclass YOURGAME_API UERPLineOfSightFilter : public UERPFilterBase\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    virtual bool Passes_Implementation(\r\n        const FERPPerceptionContext& Context,\r\n        AActor* Candidate) const override;\r\n\r\n    UPROPERTY(EditAnywhere, Category = "Filter")\r\n    TEnumAsByte<ECollisionChannel> TraceChannel = ECC_Visibility;\r\n    \r\n    UPROPERTY(EditAnywhere, Category = "Filter")\r\n    bool bRequireFullyVisible = true;\r\n};\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPLineOfSightFilter.cpp:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#include "ERPLineOfSightFilter.h"\r\n#include "Engine/World.h"\r\n\r\nbool UERPLineOfSightFilter::Passes_Implementation(\r\n    const FERPPerceptionContext& Context,\r\n    AActor* Candidate) const\r\n{\r\n    if (!Context.ContextActor || !Candidate)\r\n        return false;\r\n    \r\n    UWorld* World = Context.ContextActor->GetWorld();\r\n    if (!World)\r\n        return false;\r\n    \r\n    FVector Start = Context.Origin;\r\n    FVector End = Candidate->GetActorLocation();\r\n    \r\n    FCollisionQueryParams QueryParams;\r\n    QueryParams.AddIgnoredActor(Context.ContextActor);\r\n    QueryParams.AddIgnoredActor(Candidate);\r\n    \r\n    FHitResult HitResult;\r\n    bool bHit = World->LineTraceSingleByChannel(\r\n        HitResult,\r\n        Start,\r\n        End,\r\n        TraceChannel,\r\n        QueryParams\r\n    );\r\n    \r\n    // Pass if no hit (clear line of sight)\r\n    return !bHit;\r\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"blueprint-example-alive-filter",children:"Blueprint Example: Alive Filter"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-blueprint",children:"// BP_AliveFilter (inherits from ERPFilterBase)\r\n\r\nFunction: Passes (Context, Candidate)\r\n  \u2192 Cast Candidate to Character\r\n  \u2192 Branch: Cast Succeeded\r\n    True:\r\n      \u2192 Get Health (Character)\r\n      \u2192 Return: Health > 0\r\n    False:\r\n      \u2192 Return: True  // Not a character, pass through\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"creating-custom-scorers",children:"Creating Custom Scorers"}),"\n",(0,l.jsx)(n.h3,{id:"purpose-2",children:"Purpose"}),"\n",(0,l.jsx)(n.p,{children:"Scorers assign numerical values to candidates. Customize when you need:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Game-specific metrics (health, threat, value)"}),"\n",(0,l.jsx)(n.li,{children:"Complex spatial scoring"}),"\n",(0,l.jsx)(n.li,{children:"Weighted factors"}),"\n",(0,l.jsx)(n.li,{children:"Dynamic priorities"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"base-class-2",children:"Base Class"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'UCLASS(Abstract, BlueprintType, Blueprintable, EditInlineNew, DefaultToInstanced)\r\nclass ELYSPERCEPTIONPLUGIN_API UERPScorerBase : public UObject\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    UFUNCTION(BlueprintNativeEvent, Category = "ElysPerception|Pipeline")\r\n    float Score(const FERPPerceptionContext& Context, AActor* Candidate) const;\r\n};\n'})}),"\n",(0,l.jsx)(n.h3,{id:"c-example-health-priority-scorer",children:"C++ Example: Health Priority Scorer"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPHealthScorer.h:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#pragma once\r\n\r\n#include "CoreMinimal.h"\r\n#include "Pipeline/Scorers/ERPScorerBase.h"\r\n#include "ERPHealthScorer.generated.h"\r\n\r\n// Custom interface for actors with health\r\nUINTERFACE(MinimalAPI, Blueprintable)\r\nclass UHealthComponent : public UInterface\r\n{\r\n    GENERATED_BODY()\r\n};\r\n\r\nclass IHealthComponent\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    UFUNCTION(BlueprintNativeEvent, Category = "Health")\r\n    float GetHealthPercent() const;\r\n};\r\n\r\nUCLASS(Blueprintable, EditInlineNew)\r\nclass YOURGAME_API UERPHealthScorer : public UERPScorerBase\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    virtual float Score_Implementation(\r\n        const FERPPerceptionContext& Context,\r\n        AActor* Candidate) const override;\r\n\r\n    // Lower health = lower score (better)\r\n    UPROPERTY(EditAnywhere, Category = "Scoring")\r\n    bool bPrioritizeLowHealth = true;\r\n};\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPHealthScorer.cpp:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#include "ERPHealthScorer.h"\r\n\r\nfloat UERPHealthScorer::Score_Implementation(\r\n    const FERPPerceptionContext& Context,\r\n    AActor* Candidate) const\r\n{\r\n    if (!Candidate || !Candidate->Implements<UHealthComponent>())\r\n        return 1.0f;  // Neutral score\r\n    \r\n    float HealthPercent = IHealthComponent::Execute_GetHealthPercent(Candidate);\r\n    \r\n    if (bPrioritizeLowHealth)\r\n    {\r\n        // Lower health = lower score (better)\r\n        return HealthPercent;  // 0.0 (low health) to 1.0 (full health)\r\n    }\r\n    else\r\n    {\r\n        // Higher health = lower score (better)\r\n        return 1.0f - HealthPercent;\r\n    }\r\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"blueprint-example-threat-level-scorer",children:"Blueprint Example: Threat Level Scorer"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-blueprint",children:"// BP_ThreatScorer (inherits from ERPScorerBase)\r\n\r\nFunction: Score (Context, Candidate)\r\n  \u2192 Cast Candidate to Enemy\r\n  \u2192 Branch: Cast Succeeded\r\n    True:\r\n      \u2192 Get Threat Level (Enemy)  // Returns 1-10\r\n      \u2192 Divide by 10  // Normalize to 0.0-1.0\r\n      \u2192 Return (1.0 - normalized)  // Invert: high threat = low score\r\n    False:\r\n      \u2192 Return: 1.0  // Neutral score\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"creating-custom-aggregators",children:"Creating Custom Aggregators"}),"\n",(0,l.jsx)(n.h3,{id:"purpose-3",children:"Purpose"}),"\n",(0,l.jsx)(n.p,{children:"Aggregators combine multiple scores into one. Customize when you need:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Weighted averaging"}),"\n",(0,l.jsx)(n.li,{children:"Min/max selection"}),"\n",(0,l.jsx)(n.li,{children:"Complex score formulas"}),"\n",(0,l.jsx)(n.li,{children:"Conditional combination"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"base-class-3",children:"Base Class"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'UCLASS(Abstract, BlueprintType, Blueprintable, EditInlineNew, DefaultToInstanced)\r\nclass ELYSPERCEPTIONPLUGIN_API UERPAggregatorBase : public UObject\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    UFUNCTION(BlueprintNativeEvent, Category = "ElysPerception|Pipeline")\r\n    float Aggregate(const TArray<float>& Scores) const;\r\n};\n'})}),"\n",(0,l.jsx)(n.h3,{id:"c-example-weighted-aggregator",children:"C++ Example: Weighted Aggregator"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPWeightedAggregator.h:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#pragma once\r\n\r\n#include "CoreMinimal.h"\r\n#include "Pipeline/Aggregators/ERPAggregatorBase.h"\r\n#include "ERPWeightedAggregator.generated.h"\r\n\r\nUCLASS(Blueprintable, EditInlineNew)\r\nclass YOURGAME_API UERPWeightedAggregator : public UERPAggregatorBase\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    virtual float Aggregate_Implementation(const TArray<float>& Scores) const override;\r\n\r\n    // Weights for each scorer (must match scorer count)\r\n    UPROPERTY(EditAnywhere, Category = "Aggregation")\r\n    TArray<float> Weights;\r\n};\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPWeightedAggregator.cpp:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#include "ERPWeightedAggregator.h"\r\n\r\nfloat UERPWeightedAggregator::Aggregate_Implementation(const TArray<float>& Scores) const\r\n{\r\n    if (Scores.Num() == 0)\r\n        return 0.0f;\r\n    \r\n    float WeightedSum = 0.0f;\r\n    float TotalWeight = 0.0f;\r\n    \r\n    for (int32 i = 0; i < Scores.Num(); ++i)\r\n    {\r\n        float Weight = (i < Weights.Num()) ? Weights[i] : 1.0f;\r\n        WeightedSum += Scores[i] * Weight;\r\n        TotalWeight += Weight;\r\n    }\r\n    \r\n    return (TotalWeight > 0.0f) ? (WeightedSum / TotalWeight) : 0.0f;\r\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"blueprint-example-max-aggregator",children:"Blueprint Example: Max Aggregator"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-blueprint",children:"// BP_MaxAggregator (inherits from ERPAggregatorBase)\r\n\r\nFunction: Aggregate (Scores)\r\n  \u2192 Set Max = 0.0\r\n  \u2192 For Each Score in Scores:\r\n    \u2192 Branch: Score > Max\r\n      True: \u2192 Set Max = Score\r\n  \u2192 Return: Max\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"creating-custom-resolvers",children:"Creating Custom Resolvers"}),"\n",(0,l.jsx)(n.h3,{id:"purpose-4",children:"Purpose"}),"\n",(0,l.jsx)(n.p,{children:"Resolvers select the winning candidate. Customize when you need:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Random selection"}),"\n",(0,l.jsx)(n.li,{children:"Closest to target value"}),"\n",(0,l.jsx)(n.li,{children:"Threshold-based selection"}),"\n",(0,l.jsx)(n.li,{children:"Hysteresis (sticky targets)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"base-class-4",children:"Base Class"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'UCLASS(Abstract, BlueprintType, Blueprintable, EditInlineNew, DefaultToInstanced)\r\nclass ELYSPERCEPTIONPLUGIN_API UERPResolverBase : public UObject\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    UFUNCTION(BlueprintNativeEvent, Category = "ElysPerception|Pipeline")\r\n    bool Resolve(\r\n        const TArray<FERPPipelineScoredCandidate>& ScoredCandidates,\r\n        FERPPipelineScoredCandidate& OutBest) const;\r\n};\n'})}),"\n",(0,l.jsx)(n.h3,{id:"c-example-threshold-resolver",children:"C++ Example: Threshold Resolver"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPThresholdResolver.h:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#pragma once\r\n\r\n#include "CoreMinimal.h"\r\n#include "Pipeline/Resolvers/ERPResolverBase.h"\r\n#include "Pipeline/ERPPerceptionPipelineTypes.h"\r\n#include "ERPThresholdResolver.generated.h"\r\n\r\nUCLASS(Blueprintable, EditInlineNew)\r\nclass YOURGAME_API UERPThresholdResolver : public UERPResolverBase\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    virtual bool Resolve_Implementation(\r\n        const TArray<FERPPipelineScoredCandidate>& ScoredCandidates,\r\n        FERPPipelineScoredCandidate& OutBest) const override;\r\n\r\n    // Only select if score is below this threshold\r\n    UPROPERTY(EditAnywhere, Category = "Resolution")\r\n    float ScoreThreshold = 0.5f;\r\n    \r\n    // If true, select lowest; if false, select highest\r\n    UPROPERTY(EditAnywhere, Category = "Resolution")\r\n    bool bSelectLowest = true;\r\n};\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPThresholdResolver.cpp:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#include "ERPThresholdResolver.h"\r\n\r\nbool UERPThresholdResolver::Resolve_Implementation(\r\n    const TArray<FERPPipelineScoredCandidate>& ScoredCandidates,\r\n    FERPPipelineScoredCandidate& OutBest) const\r\n{\r\n    if (ScoredCandidates.Num() == 0)\r\n        return false;\r\n    \r\n    bool bFoundValid = false;\r\n    float BestScore = bSelectLowest ? FLT_MAX : -FLT_MAX;\r\n    \r\n    for (const FERPPipelineScoredCandidate& Scored : ScoredCandidates)\r\n    {\r\n        // Check threshold\r\n        if (bSelectLowest && Scored.Score >= ScoreThreshold)\r\n            continue;\r\n        if (!bSelectLowest && Scored.Score <= ScoreThreshold)\r\n            continue;\r\n        \r\n        // Check if better\r\n        bool bIsBetter = bSelectLowest\r\n            ? (Scored.Score < BestScore)\r\n            : (Scored.Score > BestScore);\r\n        \r\n        if (!bFoundValid || bIsBetter)\r\n        {\r\n            OutBest = Scored;\r\n            BestScore = Scored.Score;\r\n            bFoundValid = true;\r\n        }\r\n    }\r\n    \r\n    return bFoundValid;\r\n}\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"blueprint-vs-c",children:"Blueprint vs C++"}),"\n",(0,l.jsx)(n.h3,{id:"blueprint-custom-components",children:"Blueprint Custom Components"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Pros:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u2705 Fast prototyping"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 No compilation needed"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Designer-friendly"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Visual debugging"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cons:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u274c Slower performance"}),"\n",(0,l.jsx)(n.li,{children:"\u274c Limited debugging"}),"\n",(0,l.jsx)(n.li,{children:"\u274c No compile-time safety"}),"\n",(0,l.jsx)(n.li,{children:"\u274c Can't access all engine APIs"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Best for:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Simple logic"}),"\n",(0,l.jsx)(n.li,{children:"Rapid iteration"}),"\n",(0,l.jsx)(n.li,{children:"Designer-owned components"}),"\n",(0,l.jsx)(n.li,{children:"Prototypes"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"c-custom-components",children:"C++ Custom Components"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Pros:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u2705 Best performance"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Full engine access"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Type safety"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Advanced debugging"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Code reuse"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cons:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u274c Requires compilation"}),"\n",(0,l.jsx)(n.li,{children:"\u274c Programmer-only"}),"\n",(0,l.jsx)(n.li,{children:"\u274c Slower iteration"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Best for:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Performance-critical code"}),"\n",(0,l.jsx)(n.li,{children:"Complex logic"}),"\n",(0,l.jsx)(n.li,{children:"Production code"}),"\n",(0,l.jsx)(n.li,{children:"Reusable libraries"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsx)(n.h3,{id:"performance",children:"Performance"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Normalize scores to 0.0-1.0 range"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Early-reject in filters"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Cache expensive calculations"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Use const references"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Perform expensive operations in scorers"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Allocate memory in hot paths"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Use complex BP loops"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"architecture",children:"Architecture"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Keep components stateless"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Use context data"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Return neutral values on error"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Validate inputs"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Store state between ticks"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Modify candidates"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Access external systems"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"debugging",children:"Debugging"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Log meaningful information"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Add debug visualization"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Test in isolation"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Document assumptions"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Leave debug spam"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Skip edge case testing"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"design",children:"Design"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Single responsibility per component"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Make components reusable"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Expose configuration options"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Provide sensible defaults"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Couple to specific actors"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Hardcode values"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Mix concerns"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"/ElysPerceptionPlugin/API-Reference",children:"API Reference"})})," - Complete API documentation"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"/ElysPerceptionPlugin/PipelineGuide",children:"Pipeline Guide"})})," - Understanding the execution flow"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Previous:"})," ",(0,l.jsx)(n.a,{href:"/ElysPerceptionPlugin/ArchitectureDeepDive",children:"Architecture Deep Dive"})," | ",(0,l.jsx)(n.a,{href:"/ElysPerceptionPlugin/intro",children:"Documentation Home"})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>s,x:()=>o});var i=r(6540);const l={},t=i.createContext(l);function s(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);