"use strict";(globalThis.webpackChunkelysassettools_website=globalThis.webpackChunkelysassettools_website||[]).push([[681],{7301(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"features/safe-deletion","title":"Safe Deletion","description":"Safe Deletion ensures you don\'t accidentally break your project by deleting assets or folders that are still referenced elsewhere.","source":"@site/docs/features/safe-deletion.md","sourceDirName":"features","slug":"/features/safe-deletion","permalink":"/ElysAssetTools/features/safe-deletion","draft":false,"unlisted":false,"editUrl":"https://github.com/RogueParadigm/ElysAssetTools/tree/main/website/docs/docs/features/safe-deletion.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Safe Deletion"},"sidebar":"docsSidebar","previous":{"title":"Move Operations","permalink":"/ElysAssetTools/features/move-operations"},"next":{"title":"Folder Management","permalink":"/ElysAssetTools/features/folder-management"}}');var l=s(4848),t=s(8453);const i={sidebar_position:4,title:"Safe Deletion"},d="Safe Deletion",a={},o=[{value:"Overview",id:"overview",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Features",id:"features",level:2},{value:"Dependency Checking",id:"dependency-checking",level:3},{value:"Warning System",id:"warning-system",level:3},{value:"Empty Folder Cleanup",id:"empty-folder-cleanup",level:3},{value:"Redirector Management",id:"redirector-management",level:3},{value:"Usage",id:"usage",level:2},{value:"From Content Browser",id:"from-content-browser",level:3},{value:"Via Blueprint",id:"via-blueprint",level:3},{value:"Via C++",id:"via-c",level:3},{value:"Safety Rules",id:"safety-rules",level:2},{value:"What Makes a Folder Safe to Delete?",id:"what-makes-a-folder-safe-to-delete",level:3},{value:"What&#39;s Considered an External Reference?",id:"whats-considered-an-external-reference",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Before Deleting",id:"before-deleting",level:3},{value:"Alternative: Move to Archive",id:"alternative-move-to-archive",level:3},{value:"Verifying Safety Manually",id:"verifying-safety-manually",level:3},{value:"Delete Empty Folders",id:"delete-empty-folders",level:2},{value:"From Content Browser",id:"from-content-browser-1",level:3},{value:"What&#39;s Considered Empty?",id:"whats-considered-empty",level:3},{value:"Via Blueprint",id:"via-blueprint-1",level:3},{value:"Via C++",id:"via-c-1",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"&quot;Cannot delete - has references&quot; but folder appears unused",id:"cannot-delete---has-references-but-folder-appears-unused",level:3},{value:"Deletion succeeds but references break",id:"deletion-succeeds-but-references-break",level:3},{value:"Cannot delete specific asset",id:"cannot-delete-specific-asset",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"safe-deletion",children:"Safe Deletion"})}),"\n",(0,l.jsx)(n.p,{children:"Safe Deletion ensures you don't accidentally break your project by deleting assets or folders that are still referenced elsewhere."}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"The Safe Delete feature:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u2705 Scans for external references before deleting"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Warns if deletion would break references"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Only deletes if safe (no external referencers)"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Cleans up empty parent folders automatically"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Fixes redirectors after deletion"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    A[Select Folder] --\x3e B[Scan Dependencies]\n    B --\x3e C{Has External<br/>Referencers?}\n    C --\x3e|Yes| D[Show Warning]\n    D --\x3e E[Cancel Delete]\n    C --\x3e|No| F[Confirm Delete]\n    F --\x3e G{User<br/>Confirms?}\n    G --\x3e|No| E\n    G --\x3e|Yes| H[Delete Assets]\n    H --\x3e I[Delete Empty Folders]\n    I --\x3e J[Fix Redirectors]\n    J --\x3e K[Complete]\n"})}),"\n",(0,l.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,l.jsx)(n.h3,{id:"dependency-checking",children:"Dependency Checking"}),"\n",(0,l.jsx)(n.p,{children:"Before deletion, the system:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Scans all assets in the folder"}),"\n",(0,l.jsx)(n.li,{children:"Finds all referencers (what uses these assets)"}),"\n",(0,l.jsx)(n.li,{children:"Separates internal vs external references"}),"\n",(0,l.jsx)(n.li,{children:"Determines if deletion is safe"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Safe to delete:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No external references"}),"\n",(0,l.jsx)(n.li,{children:"Only internal references (within same folder)"}),"\n",(0,l.jsx)(n.li,{children:"No dependencies outside the folder"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Not safe to delete:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Has external referencers (assets in other folders use it)"}),"\n",(0,l.jsx)(n.li,{children:"Would break references in Blueprints, Materials, etc."}),"\n",(0,l.jsx)(n.li,{children:"Required by maps or other critical assets"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"warning-system",children:"Warning System"}),"\n",(0,l.jsx)(n.p,{children:"If deletion is unsafe:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\u274c Cannot safely delete this folder\n\nThe following assets have external references:\n\u2022 BP_Character (referenced by 3 Blueprints)\n\u2022 M_Material (used in 5 Maps)\n\u2022 T_Texture (referenced by 12 Materials)\n\nDeleting would break these references.\n"})}),"\n",(0,l.jsx)(n.h3,{id:"empty-folder-cleanup",children:"Empty Folder Cleanup"}),"\n",(0,l.jsx)(n.p,{children:"After successful deletion:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Check parent folders"}),"\n",(0,l.jsx)(n.li,{children:"Delete any empty folders"}),"\n",(0,l.jsx)(n.li,{children:"Recurse up the folder tree"}),"\n",(0,l.jsx)(n.li,{children:"Stop when a non-empty folder is found"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"redirector-management",children:"Redirector Management"}),"\n",(0,l.jsx)(n.p,{children:"After deletion:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Fix any broken redirectors"}),"\n",(0,l.jsx)(n.li,{children:"Update redirector paths"}),"\n",(0,l.jsx)(n.li,{children:"Clean up redirector chains"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,l.jsx)(n.h3,{id:"from-content-browser",children:"From Content Browser"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Right-click a folder"}),"\n",(0,l.jsxs)(n.li,{children:["Select ",(0,l.jsx)(n.strong,{children:"Elys Asset Tools \u2192 Safe Delete Folder"})]}),"\n",(0,l.jsx)(n.li,{children:"Review the dependency scan results"}),"\n",(0,l.jsx)(n.li,{children:"Confirm deletion if safe"}),"\n",(0,l.jsx)(n.li,{children:"Cancellation if unsafe"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"via-blueprint",children:"Via Blueprint"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'// Get subsystem\nUERP_AssetToolsEditorSubsystem* Subsystem =\n    GEditor->GetEditorSubsystem<UERP_AssetToolsEditorSubsystem>();\n\n// Check if safe first\nbool bSafe = Subsystem->IsFolderSafeToDelete("/Game/ToDelete");\n\nif (bSafe)\n{\n    // Proceed with deletion\n    bool bDeleted = Subsystem->SafeDeleteFolder("/Game/ToDelete");\n}\nelse\n{\n    UE_LOG(LogElysAssetTools, Warning, TEXT("Folder has external references!"));\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"via-c",children:"Via C++"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'// Check safety\nFERP_AssetDependencyScanResult ScanResult = Subsystem->ScanFolder("/Game/ToDelete");\n\n// Count external referencers\nint32 ExternalRefs = 0;\nfor (const FAssetData& Referencer : ScanResult.Referencers)\n{\n    if (!Referencer.PackagePath.ToString().StartsWith("/Game/ToDelete"))\n    {\n        ExternalRefs++;\n    }\n}\n\nif (ExternalRefs == 0)\n{\n    // Safe to delete\n    FAssetRegistryModule& AssetRegistry = FModuleManager::LoadModuleChecked<FAssetRegistryModule>("AssetRegistry");\n    // ... perform deletion\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"safety-rules",children:"Safety Rules"}),"\n",(0,l.jsx)(n.h3,{id:"what-makes-a-folder-safe-to-delete",children:"What Makes a Folder Safe to Delete?"}),"\n",(0,l.jsxs)(n.p,{children:["A folder is ",(0,l.jsx)(n.strong,{children:"safe to delete"})," if ALL of these are true:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"No external assets reference assets in this folder"}),"\n",(0,l.jsxs)(n.li,{children:["All dependencies are either:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Within the same folder (internal)"}),"\n",(0,l.jsx)(n.li,{children:"Engine content"}),"\n",(0,l.jsx)(n.li,{children:"Plugin content (not being deleted)"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["No assets in this folder are:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Currently open in an editor"}),"\n",(0,l.jsx)(n.li,{children:"Loaded in memory by a running game"}),"\n",(0,l.jsx)(n.li,{children:"Part of a C++ class"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"whats-considered-an-external-reference",children:"What's Considered an External Reference?"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"External references:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Blueprints in other folders"}),"\n",(0,l.jsx)(n.li,{children:"Materials in other folders"}),"\n",(0,l.jsx)(n.li,{children:"Maps that include these assets"}),"\n",(0,l.jsx)(n.li,{children:"Data assets that reference these assets"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"NOT external references:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"References within the same folder"}),"\n",(0,l.jsx)(n.li,{children:"Engine content references (always available)"}),"\n",(0,l.jsx)(n.li,{children:"Plugin content references (assuming plugins stay)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsx)(n.h3,{id:"before-deleting",children:"Before Deleting"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Run dependency scan"})," - Understand what you're deleting"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Check referencers"})," - Know what would be affected"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Commit to version control"})," - Have a backup"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Consider moving instead"})," - Deletion is permanent"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"alternative-move-to-archive",children:"Alternative: Move to Archive"}),"\n",(0,l.jsx)(n.p,{children:"Instead of deleting, consider:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'// Move to archive folder instead of deleting\nSubsystem->StartMoveAssets({"/Game/ToDelete"}, "/Game/Archive/Deleted");\n'})}),"\n",(0,l.jsx)(n.p,{children:"This way:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Content is preserved"}),"\n",(0,l.jsx)(n.li,{children:"References still work"}),"\n",(0,l.jsx)(n.li,{children:"Can be recovered if needed"}),"\n",(0,l.jsx)(n.li,{children:"Can delete archive periodically"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"verifying-safety-manually",children:"Verifying Safety Manually"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'// Get detailed dependency info\nFERP_AssetDependencyScanResult Result = Subsystem->ScanFolder("/Game/MyFolder");\n\n// Log all external referencers\nfor (const FAssetData& Referencer : Result.Referencers)\n{\n    FString PackagePath = Referencer.PackagePath.ToString();\n    if (!PackagePath.StartsWith("/Game/MyFolder"))\n    {\n        UE_LOG(LogElysAssetTools, Warning, TEXT("External referencer: %s"), *Referencer.AssetName.ToString());\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"delete-empty-folders",children:"Delete Empty Folders"}),"\n",(0,l.jsx)(n.p,{children:"Separate feature for cleaning up empty folders:"}),"\n",(0,l.jsx)(n.h3,{id:"from-content-browser-1",children:"From Content Browser"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Right-click a folder"}),"\n",(0,l.jsxs)(n.li,{children:["Select ",(0,l.jsx)(n.strong,{children:"Elys Asset Tools \u2192 Delete Empty Folders"})]}),"\n",(0,l.jsx)(n.li,{children:"Scans recursively for empty folders"}),"\n",(0,l.jsx)(n.li,{children:"Deletes all empty subfolders"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"whats-considered-empty",children:"What's Considered Empty?"}),"\n",(0,l.jsxs)(n.p,{children:["A folder is ",(0,l.jsx)(n.strong,{children:"empty"})," if it contains:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No assets"}),"\n",(0,l.jsx)(n.li,{children:"No subfolders with assets"}),"\n",(0,l.jsx)(n.li,{children:"Only redirectors (optionally)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"via-blueprint-1",children:"Via Blueprint"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'// Delete all empty folders under a path\nSubsystem->DeleteEmptyFolders("/Game/Content");\n'})}),"\n",(0,l.jsx)(n.h3,{id:"via-c-1",children:"Via C++"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'// Recursively find and delete empty folders\nvoid DeleteEmptyFoldersRecursive(const FString& BasePath)\n{\n    IAssetRegistry& AssetRegistry = FModuleManager::LoadModuleChecked<FAssetRegistryModule>("AssetRegistry").Get();\n\n    TArray<FString> SubPaths;\n    AssetRegistry.GetSubPaths(BasePath, SubPaths, false);\n\n    for (const FString& SubPath : SubPaths)\n    {\n        // Recurse first\n        DeleteEmptyFoldersRecursive(SubPath);\n\n        // Check if now empty\n        TArray<FAssetData> Assets;\n        AssetRegistry.GetAssetsByPath(*SubPath, Assets, false);\n\n        if (Assets.Num() == 0)\n        {\n            // Delete folder (UE Editor function)\n            IFileManager::Get().DeleteDirectory(*SubPath, false, true);\n        }\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"cannot-delete---has-references-but-folder-appears-unused",children:'"Cannot delete - has references" but folder appears unused'}),"\n",(0,l.jsx)(n.p,{children:"Possible causes:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Soft references"})," - Check for soft object references"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Redirectors"})," - Old redirectors may still point here"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"C++ references"})," - Native code may reference these assets"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Recently moved"})," - Asset Registry may not be updated"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Solutions:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:"// Force refresh Asset Registry\nFAssetRegistryModule::AssetCreated(Asset);\nFAssetRegistryModule::AssetDeleted(Asset);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"deletion-succeeds-but-references-break",children:"Deletion succeeds but references break"}),"\n",(0,l.jsx)(n.p,{children:"This shouldn't happen with Safe Delete, but if it does:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.strong,{children:"Undo"})," (Ctrl+Z) immediately"]}),"\n",(0,l.jsx)(n.li,{children:"Restore from version control"}),"\n",(0,l.jsx)(n.li,{children:"Re-import deleted assets"}),"\n",(0,l.jsx)(n.li,{children:"Fix up redirectors"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"cannot-delete-specific-asset",children:"Cannot delete specific asset"}),"\n",(0,l.jsx)(n.p,{children:"If a single asset blocks deletion:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Find what references it (use Dependency Scanner)"}),"\n",(0,l.jsx)(n.li,{children:"Remove those references first"}),"\n",(0,l.jsx)(n.li,{children:"Or move the problematic asset elsewhere"}),"\n",(0,l.jsx)(n.li,{children:"Then delete the folder"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,l.jsxs)(n.p,{children:["See ",(0,l.jsx)(n.a,{href:"../api-reference/subsystem",children:"Subsystem API"})," for complete API documentation."]}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./dependency-scanner",children:"Dependency Scanner"})," - Understand what you're deleting"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./folder-management",children:"Folder Management"})," - Clean up empty folders"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"../user-guide/cleaning-up",children:"User Guide: Cleaning Up"})," - Step-by-step tutorial"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>i,x:()=>d});var r=s(6540);const l={},t=r.createContext(l);function i(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);