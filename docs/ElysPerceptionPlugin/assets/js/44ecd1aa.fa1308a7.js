"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[664],{1088(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"Internal/Interaction-Component-Architecture","title":"Interaction & Targeting System","description":"Purpose","source":"@site/../Documentation/Internal/Interaction-Component-Architecture.md","sourceDirName":"Internal","slug":"/Internal/Interaction-Component-Architecture","permalink":"/docs/ElysPerceptionPlugin/docs/Internal/Interaction-Component-Architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/RogueParadigm/ElysPerceptionPlugin/tree/main/Documentation/../Documentation/Internal/Interaction-Component-Architecture.md","tags":[],"version":"current","frontMatter":{}}');var r=i(4848),s=i(8453);const l={},c="Interaction & Targeting System",o={},d=[{value:"Purpose",id:"purpose",level:2},{value:"High-Level Architecture",id:"high-level-architecture",level:2},{value:"Interaction Domain",id:"interaction-domain",level:2},{value:"Responsibilities",id:"responsibilities",level:3},{value:"Interaction Descriptor",id:"interaction-descriptor",level:3},{value:"IERPInteractable Interface",id:"ierpinteractable-interface",level:3},{value:"Interaction Rules",id:"interaction-rules",level:3},{value:"ERPInteractionComponent",id:"erpinteractioncomponent",level:3},{value:"End-to-End Interaction Flow (Minimal Setup)",id:"end-to-end-interaction-flow-minimal-setup",level:2},{value:"1. Player Setup",id:"1-player-setup",level:3},{value:"2. Interactable Actor Setup",id:"2-interactable-actor-setup",level:3},{value:"3. Runtime Flow",id:"3-runtime-flow",level:3},{value:"4. Optional: Visual Feedback",id:"4-optional-visual-feedback",level:3},{value:"Targeting Domain",id:"targeting-domain",level:2},{value:"Multiplayer Considerations",id:"multiplayer-considerations",level:2},{value:"ERPBaseInteractionFeedbackComponent",id:"erpbaseinteractionfeedbackcomponent",level:2},{value:"Purpose",id:"purpose-1",level:3},{value:"Responsibilities",id:"responsibilities-1",level:3},{value:"Non-Responsibilities (MUST NOT)",id:"non-responsibilities-must-not",level:3},{value:"Public API",id:"public-api",level:3},{value:"Default Behavior",id:"default-behavior",level:3},{value:"Blueprint Extension Points",id:"blueprint-extension-points",level:3},{value:"Optional Sub-Components",id:"optional-sub-components",level:3},{value:"Integration Pattern",id:"integration-pattern",level:3},{value:"Typical Use Case",id:"typical-use-case",level:3},{value:"Design Principles",id:"design-principles",level:3},{value:"Presentation Layer (Recommended Pattern)",id:"presentation-layer-recommended-pattern",level:2},{value:"Design Rules (Non-Negotiable)",id:"design-rules-non-negotiable",level:2},{value:"Mental Model Summary",id:"mental-model-summary",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"interaction--targeting-system",children:"Interaction & Targeting System"})}),"\n",(0,r.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,r.jsxs)(n.p,{children:["The Interaction & Targeting system extends ",(0,r.jsx)(n.strong,{children:"ElysPerceptionPlugin"})," by providing\ngeneric, reusable logic for deciding ",(0,r.jsx)(n.strong,{children:"what the player can interact with or target"}),",\nbased on perception results."]}),"\n",(0,r.jsx)(n.p,{children:"This system is:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Built on top of the Perception Pipeline"}),"\n",(0,r.jsx)(n.li,{children:"Fully client-side for evaluation"}),"\n",(0,r.jsx)(n.li,{children:"UI-agnostic"}),"\n",(0,r.jsx)(n.li,{children:"Gameplay-agnostic"}),"\n",(0,r.jsx)(n.li,{children:"Extensible without forking the plugin"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"It does NOT:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Execute gameplay logic"}),"\n",(0,r.jsx)(n.li,{children:"Create or manage UI"}),"\n",(0,r.jsx)(n.li,{children:"Apply visual effects"}),"\n",(0,r.jsx)(n.li,{children:"Own server authority"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"high-level-architecture",children:"High-Level Architecture"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[ Perception Pipeline ]\n        ? (events)\n[ Interaction / Targeting Components ]\n        ? (descriptors + events)\n[ Presentation Layer (optional) ]\n        ?\n[ UI / FX / Audio ]\n"})}),"\n",(0,r.jsx)(n.p,{children:"Each layer has a single responsibility and must not leak concerns to other layers."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"interaction-domain",children:"Interaction Domain"}),"\n",(0,r.jsx)(n.h3,{id:"responsibilities",children:"Responsibilities"}),"\n",(0,r.jsx)(n.p,{children:"The Interaction domain is responsible for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tracking the current interaction candidate"}),"\n",(0,r.jsx)(n.li,{children:"Validating interaction eligibility using extensible rules"}),"\n",(0,r.jsx)(n.li,{children:"Exposing interaction state changes via events"}),"\n",(0,r.jsxs)(n.li,{children:["Producing ",(0,r.jsx)(n.strong,{children:"Interaction Descriptors"})," describing intent"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"It is NOT responsible for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Displaying prompts or widgets"}),"\n",(0,r.jsx)(n.li,{children:"Deciding where or how UI appears"}),"\n",(0,r.jsx)(n.li,{children:"Handling input execution"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"interaction-descriptor",children:"Interaction Descriptor"}),"\n",(0,r.jsxs)(n.p,{children:["Interaction Descriptors are ",(0,r.jsx)(n.strong,{children:"pure runtime data structures"})," (",(0,r.jsx)(n.code,{children:"FERPInteractionDescriptor"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:["They are built ",(0,r.jsx)(n.strong,{children:"on demand"})," by interactable objects when queried by the Interaction system.\nDescriptors are not assets, are not stored by the plugin, and have no persistent lifetime."]}),"\n",(0,r.jsxs)(n.p,{children:["The plugin defines the ",(0,r.jsx)(n.strong,{children:"shape of interaction data"}),", not its storage or origin."]}),"\n",(0,r.jsx)(n.p,{children:"Descriptors are represented as a value-based structure and are filled via a pull-based interface call."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Descriptor Fields:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"DisplayName"}),': Human-readable name for the interaction (e.g., "Open", "Talk")']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PromptText"}),': Full prompt text shown to player (e.g., "Press E to open")']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"InteractionTags"}),": Gameplay tags associated with this interaction"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PresentationHints"}),": Opaque, runtime-specific hints (never interpreted by core logic)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Interactable objects are free to:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Construct descriptor values directly in Blueprint or C++"}),"\n",(0,r.jsx)(n.li,{children:"Source values from DataAssets if desired"}),"\n",(0,r.jsx)(n.li,{children:"Compute descriptor fields dynamically based on gameplay state"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The core plugin never interprets PresentationHints and never assumes how descriptor data is produced."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"ierpinteractable-interface",children:"IERPInteractable Interface"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"IERPInteractable"})," interface defines the contract for interactable objects."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Methods:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CanBeInteractedWith(AActor* InteractingActor)"})," - Returns whether interaction is allowed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GetInteractionDescriptor(FERPInteractionDescriptor& OutDescriptor)"})," - Fills the descriptor on demand"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Important:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GetInteractionDescriptor"})," is a ",(0,r.jsx)(n.strong,{children:"pull-based API"})]}),"\n",(0,r.jsx)(n.li,{children:"The caller provides an output descriptor struct"}),"\n",(0,r.jsx)(n.li,{children:"The interactable fully fills the descriptor on each call"}),"\n",(0,r.jsx)(n.li,{children:"No pointer or asset ownership is implied"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GetInteractionDescriptor"})," may be called multiple times while an interactable remains focused"]}),"\n",(0,r.jsx)(n.li,{children:"Implementations must be safe, stateless, and free of side effects"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"interaction-rules",children:"Interaction Rules"}),"\n",(0,r.jsx)(n.p,{children:"Interaction rules are composable, instanced validation objects used to determine\nwhether an interaction is allowed."}),"\n",(0,r.jsx)(n.p,{children:"Examples:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Distance checks"}),"\n",(0,r.jsx)(n.li,{children:"Line-of-sight validation"}),"\n",(0,r.jsx)(n.li,{children:"Permission or ownership checks"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Rules can be extended or replaced by end users without modifying plugin code."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"erpinteractioncomponent",children:"ERPInteractionComponent"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"UERPInteractionComponent"})," is the ",(0,r.jsx)(n.strong,{children:"local authority for interaction state"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Responsibilities:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Subscribes automatically to ",(0,r.jsx)(n.code,{children:"UERPPerceptionComponent"})," channel events"]}),"\n",(0,r.jsxs)(n.li,{children:["Filters perception candidates using:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"IERPInteractable"})," interface check"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CanBeInteractedWith"})," validation"]}),"\n",(0,r.jsxs)(n.li,{children:["Optional ",(0,r.jsx)(n.code,{children:"UERPInteractionRule"})," instances"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Maintains:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Current interaction candidate"}),"\n",(0,r.jsx)(n.li,{children:"Current resolved InteractionDescriptor (value-based)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Emits HIGH-LEVEL events:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"OnCandidateChanged(Previous, New, ChannelId)"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"OnDescriptorChanged(Candidate, Descriptor, ChannelId)"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Why this exists:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Perception"})," = detection"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"InteractionComponent"})," = interaction state + eligibility"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Presentation/UI"})," = external and optional"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"This is NOT just a renamed ChannelListener:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"It adds eligibility rules"}),"\n",(0,r.jsx)(n.li,{children:"It adds descriptor resolution"}),"\n",(0,r.jsx)(n.li,{children:"It is meant to fully replace third-party interaction plugins"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Other systems (UI, input, gameplay execution) must rely on ",(0,r.jsx)(n.code,{children:"ERPInteractionComponent"}),"\nrather than consuming perception events directly."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ERPInteractionComponent"})," does not execute gameplay logic and does not perform presentation.\nIt exists to centralize and normalize interaction state."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"end-to-end-interaction-flow-minimal-setup",children:"End-to-End Interaction Flow (Minimal Setup)"}),"\n",(0,r.jsx)(n.p,{children:"This section describes how to set up a complete interaction system with minimal boilerplate."}),"\n",(0,r.jsx)(n.h3,{id:"1-player-setup",children:"1. Player Setup"}),"\n",(0,r.jsxs)(n.p,{children:["On your ",(0,r.jsx)(n.strong,{children:"PlayerController"})," (or Pawn):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.code,{children:"UERPPerceptionComponent"})]}),"\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.code,{children:"UERPInteractionComponent"})]}),"\n",(0,r.jsxs)(n.li,{children:["Configure both with the same ChannelId (e.g., ",(0,r.jsx)(n.code,{children:'"Interaction"'}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Blueprint Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'Components:\n  - ERPPerceptionComponent\n    - Channels: Add "Interaction" channel\n    - Configure pipeline (samplers, scorers, filters, resolver)\n  \n  - ERPInteractionComponent\n    - PerceptionComponent: (auto-found, or set manually)\n    - ChannelId: "Interaction"\n    - Rules: (optional, add validation rules if needed)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-interactable-actor-setup",children:"2. Interactable Actor Setup"}),"\n",(0,r.jsxs)(n.p,{children:["On your ",(0,r.jsx)(n.strong,{children:"Interactable Actor"})," (Door, Item, NPC, etc.):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Implement ",(0,r.jsx)(n.code,{children:"IERPInteractable"})," interface"]}),"\n",(0,r.jsxs)(n.li,{children:["Implement ",(0,r.jsx)(n.code,{children:"GetInteractionDescriptor"})," (fills struct dynamically)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Blueprint Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'Interfaces: Add "ERPInteractable"\n\nEvent: Can Be Interacted With By (InteractingActor)\n  ? Return True (or add your own validation logic)\n\nEvent: Get Interaction Descriptor (OUT Descriptor)\n  ? Set Descriptor.DisplayName = "Open"\n  ? Set Descriptor.PromptText = "Press E to open door"\n  ? Set Descriptor.InteractionTags = (add tags if needed)\n  ? (Return - OUT parameter is automatically filled)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-runtime-flow",children:"3. Runtime Flow"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Automatic Wiring:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Perception detects best candidate"}),"\n",(0,r.jsx)(n.li,{children:"InteractionComponent auto-receives perception events"}),"\n",(0,r.jsx)(n.li,{children:"InteractionComponent validates eligibility"}),"\n",(0,r.jsx)(n.li,{children:"Descriptor is pulled from the actor"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"OnCandidateChanged"})," / ",(0,r.jsx)(n.code,{children:"OnDescriptorChanged"})," fire"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"User Integration:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Bind ",(0,r.jsx)(n.code,{children:"OnCandidateChanged"})," to update UI / FX / input"]}),"\n",(0,r.jsxs)(n.li,{children:["Bind ",(0,r.jsx)(n.code,{children:"OnDescriptorChanged"})," to update prompt text"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"No manual wiring is required beyond adding the components."})}),"\n",(0,r.jsxs)(n.p,{children:["This is ",(0,r.jsx)(n.strong,{children:"framework behavior"}),", not game logic."]}),"\n",(0,r.jsx)(n.h3,{id:"4-optional-visual-feedback",children:"4. Optional: Visual Feedback"}),"\n",(0,r.jsx)(n.p,{children:"To add visual feedback (outlines, world-space widgets) without writing glue code:"}),"\n",(0,r.jsxs)(n.p,{children:["On your ",(0,r.jsx)(n.strong,{children:"Interactable Actor"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.code,{children:"UERPBaseInteractionFeedbackComponent"})]}),"\n",(0,r.jsxs)(n.li,{children:["Assign optional references:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"OutlineComponent"})," (e.g., PostProcessComponent with outline material)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WorldSpaceWidgetComponent"})," (e.g., UWidgetComponent with prompt widget)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["On your ",(0,r.jsx)(n.strong,{children:"PlayerController"})," (in ",(0,r.jsx)(n.code,{children:"OnCandidateChanged"})," event):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-blueprint",children:"Event: OnCandidateChanged (Previous, New, ChannelId)\n  ? If Previous is valid:\n    ? Get Component: ERPBaseInteractionFeedbackComponent (Previous)\n    ? Call: SetInteractionFocused(false)\n  \n  ? If New is valid:\n    ? Get Component: ERPBaseInteractionFeedbackComponent (New)\n    ? Call: SetInteractionFocused(true)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["On your ",(0,r.jsx)(n.strong,{children:"PlayerController"})," (in ",(0,r.jsx)(n.code,{children:"OnDescriptorChanged"})," event):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-blueprint",children:"Event: OnDescriptorChanged (Candidate, Descriptor, ChannelId)\n  ? Get Component: ERPBaseInteractionFeedbackComponent (Candidate)\n  ? Call: UpdateInteractionDescriptor(Descriptor)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"#ERPBaseInteractionFeedbackComponent",children:"ERPBaseInteractionFeedbackComponent"})," for details."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"targeting-domain",children:"Targeting Domain"}),"\n",(0,r.jsx)(n.p,{children:"The Targeting domain mirrors the Interaction domain structurally but focuses on\ntarget selection rather than contextual actions."}),"\n",(0,r.jsx)(n.p,{children:"Targeting:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Does not assume UI"}),"\n",(0,r.jsx)(n.li,{children:"Does not imply interaction"}),"\n",(0,r.jsx)(n.li,{children:"Can be used independently (combat, AI, support targeting, etc.)"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"multiplayer-considerations",children:"Multiplayer Considerations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Perception, interaction evaluation, and presentation are client-side only"}),"\n",(0,r.jsx)(n.li,{children:"Interaction execution must be validated on the server"}),"\n",(0,r.jsx)(n.li,{children:"The plugin provides helpers to forward interaction intent via RPC"}),"\n",(0,r.jsx)(n.li,{children:"Gameplay effects are never executed by the plugin"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"erpbaseinteractionfeedbackcomponent",children:"ERPBaseInteractionFeedbackComponent"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"UERPBaseInteractionFeedbackComponent"})," is an ",(0,r.jsx)(n.strong,{children:"optional presentation helper"})," that translates interaction state into visual feedback."]}),"\n",(0,r.jsx)(n.h3,{id:"purpose-1",children:"Purpose"}),"\n",(0,r.jsx)(n.p,{children:"Provide a default, ready-to-use visual feedback implementation for interactable actors without forcing any specific UI workflow."}),"\n",(0,r.jsx)(n.h3,{id:"responsibilities-1",children:"Responsibilities"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"React to interaction state changes when explicitly notified"}),"\n",(0,r.jsx)(n.li,{children:"Apply visual feedback on the owning actor (outline, widgets, etc.)"}),"\n",(0,r.jsx)(n.li,{children:"Expose Blueprint hooks for customization"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"non-responsibilities-must-not",children:"Non-Responsibilities (MUST NOT)"}),"\n",(0,r.jsx)(n.p,{children:"The component:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Does NOT perform perception or interaction logic"}),"\n",(0,r.jsx)(n.li,{children:"Does NOT subscribe to events automatically"}),"\n",(0,r.jsx)(n.li,{children:"Does NOT decide which actor is interactable"}),"\n",(0,r.jsx)(n.li,{children:"Does NOT execute gameplay or networking logic"}),"\n",(0,r.jsx)(n.li,{children:"Does NOT interpret interaction semantics"}),"\n",(0,r.jsx)(n.li,{children:"Does NOT create or destroy widgets dynamically"}),"\n",(0,r.jsx)(n.li,{children:"Does NOT read player input"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"public-api",children:"Public API"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"SetInteractionFocused(bool bFocused)"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Notify the component that the owning actor has become (or stopped being) the active interaction candidate"}),"\n",(0,r.jsx)(n.li,{children:"When focused: Enable visual feedback (outline, widget, etc.)"}),"\n",(0,r.jsx)(n.li,{children:"When unfocused: Disable visual feedback"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"UpdateInteractionDescriptor(const FERPInteractionDescriptor& Descriptor)"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Notify the component that the interaction descriptor has changed while focused"}),"\n",(0,r.jsx)(n.li,{children:"Forward descriptor to presentation logic"}),"\n",(0,r.jsx)(n.li,{children:"Update widget content if applicable"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"IsInteractionFocused()"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Returns whether the actor is currently focused for interaction"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"default-behavior",children:"Default Behavior"}),"\n",(0,r.jsx)(n.p,{children:"The plugin provides a safe default implementation:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Focus Handling:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If ",(0,r.jsx)(n.code,{children:"OutlineComponent"})," is referenced: Enable/disable it based on focus"]}),"\n",(0,r.jsxs)(n.li,{children:["If ",(0,r.jsx)(n.code,{children:"WorldSpaceWidgetComponent"})," is referenced: Show/hide it based on focus"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Descriptor Handling:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The component does not assume any widget structure"}),"\n",(0,r.jsx)(n.li,{children:"Descriptor data is forwarded to Blueprint hooks"}),"\n",(0,r.jsx)(n.li,{children:"No field is interpreted by the core implementation"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"blueprint-extension-points",children:"Blueprint Extension Points"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"OnInteractionFocused(bool bFocused)"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Blueprint event called when focus state changes"}),"\n",(0,r.jsx)(n.li,{children:"Override to add custom visual feedback (FX, audio, animations)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"OnDescriptorUpdated(const FERPInteractionDescriptor& Descriptor)"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Blueprint event called when descriptor changes"}),"\n",(0,r.jsx)(n.li,{children:"Override to push descriptor data into your own widgets"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"optional-sub-components",children:"Optional Sub-Components"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"OutlineComponent"})})," (UActorComponent)"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Optional reference to an outline-like component"}),"\n",(0,r.jsx)(n.li,{children:"Enabled/disabled based on focus state"}),"\n",(0,r.jsx)(n.li,{children:"Safely null-checked"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"WorldSpaceWidgetComponent"})})," (UWidgetComponent)"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Optional reference to a world-space widget"}),"\n",(0,r.jsx)(n.li,{children:"Shown/hidden based on focus state"}),"\n",(0,r.jsx)(n.li,{children:"Safely null-checked"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The component functions correctly even if neither is present."}),"\n",(0,r.jsx)(n.h3,{id:"integration-pattern",children:"Integration Pattern"}),"\n",(0,r.jsx)(n.p,{children:"The component does not auto-bind to any system. It is expected to be called by:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A PlayerController"}),"\n",(0,r.jsx)(n.li,{children:'Or a lightweight "Presenter" component'}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Typical Flow:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Interaction system determines focused actor"}),"\n",(0,r.jsxs)(n.li,{children:["Caller invokes ",(0,r.jsx)(n.code,{children:"SetInteractionFocused"})]}),"\n",(0,r.jsxs)(n.li,{children:["Caller invokes ",(0,r.jsx)(n.code,{children:"UpdateInteractionDescriptor"})]}),"\n",(0,r.jsx)(n.li,{children:"Visual feedback reacts locally"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"typical-use-case",children:"Typical Use Case"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:'"I want outlines and a world-space interaction prompt without writing glue code."'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.code,{children:"ERPBaseInteractionFeedbackComponent"})," to the interactable"]}),"\n",(0,r.jsx)(n.li,{children:"Assign outline + widget references"}),"\n",(0,r.jsx)(n.li,{children:"Bind interaction events once in the PlayerController"}),"\n",(0,r.jsx)(n.li,{children:"No custom Blueprint logic required for basic usage"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"design-principles",children:"Design Principles"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Composition over inheritance"}),"\n",(0,r.jsx)(n.li,{children:"Intent over implementation"}),"\n",(0,r.jsx)(n.li,{children:"Guided but not enforced"}),"\n",(0,r.jsx)(n.li,{children:"Framework-first, UI-agnostic"}),"\n",(0,r.jsx)(n.li,{children:"Safe defaults, infinite extensibility"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"This component is NOT:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A replacement for UI systems"}),"\n",(0,r.jsx)(n.li,{children:"A mandatory part of the interaction pipeline"}),"\n",(0,r.jsx)(n.li,{children:"A presenter or controller"}),"\n",(0,r.jsx)(n.li,{children:"A gameplay executor"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["It is a ",(0,r.jsx)(n.strong,{children:"presentation helper"}),", nothing more."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"presentation-layer-recommended-pattern",children:"Presentation Layer (Recommended Pattern)"}),"\n",(0,r.jsx)(n.p,{children:"ElysPerceptionPlugin does not manage UI directly."}),"\n",(0,r.jsxs)(n.p,{children:["However, complex projects are encouraged to introduce a ",(0,r.jsx)(n.strong,{children:"Presentation Layer"}),"\nto adapt interaction and targeting state into concrete visuals."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"A Presenter is:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"OPTIONAL"})," - Not required for interaction to work"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"NOT a widget"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"NOT part of the core pipeline"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"NOT a required inheritance hierarchy"})}),"\n",(0,r.jsx)(n.li,{children:"Exists only as a recommended architectural pattern"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The recommended pattern is a ",(0,r.jsx)(n.strong,{children:"Presenter-style adapter"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Presenters listen to interaction or targeting events"}),"\n",(0,r.jsx)(n.li,{children:"Presenters interpret descriptors"}),"\n",(0,r.jsx)(n.li,{children:"Presenters decide how many widgets to show, where, and when"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Presenters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Are not widgets"}),"\n",(0,r.jsx)(n.li,{children:"Are entirely replaceable"}),"\n",(0,r.jsx)(n.li,{children:"May spawn widgets, FX, or audio"}),"\n",(0,r.jsx)(n.li,{children:"Can be Actors, Components, or plain UObjects"}),"\n",(0,r.jsx)(n.li,{children:"Do not need to inherit from any plugin base class"}),"\n",(0,r.jsx)(n.li,{children:"Are NOT required or instantiated by the plugin"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Widgets produced by presenters must remain passive and data-driven."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"This pattern is recommended but not enforced by the plugin."})}),"\n",(0,r.jsxs)(n.p,{children:["For most use cases, directly binding to ",(0,r.jsx)(n.code,{children:"OnCandidateChanged"})," and ",(0,r.jsx)(n.code,{children:"OnDescriptorChanged"}),"\nin your PlayerController is sufficient."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"design-rules-non-negotiable",children:"Design Rules (Non-Negotiable)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Interaction and Targeting logic must never reference UI systems"}),"\n",(0,r.jsx)(n.li,{children:"Widgets must never contain interaction or targeting logic"}),"\n",(0,r.jsx)(n.li,{children:"Descriptors are the only contract between logic and presentation"}),"\n",(0,r.jsx)(n.li,{children:"All presentation behavior is replaceable and optional"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"mental-model-summary",children:"Mental Model Summary"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Layer"}),(0,r.jsx)(n.th,{children:"Responsibility"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Perception"}),(0,r.jsx)(n.td,{children:"Detect & evaluate candidates"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Interaction / Targeting"}),(0,r.jsx)(n.td,{children:"Decide eligibility"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Descriptor"}),(0,r.jsx)(n.td,{children:"Describe intent"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Presentation"}),(0,r.jsx)(n.td,{children:"Interpret intent"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"UI"}),(0,r.jsx)(n.td,{children:"Render"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["If a widget knows ",(0,r.jsx)(n.strong,{children:"when"})," it should appear, it is no longer a widget."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>c});var t=i(6540);const r={},s=t.createContext(r);function l(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);