"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[256],{2068(e,n,t){t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"Examples","title":"Examples","description":"Practical examples demonstrating common use cases and custom implementations for ElysPerceptionPlugin.","source":"@site/docs/Examples.md","sourceDirName":".","slug":"/Examples","permalink":"/docs/ElysPerceptionPlugin/docs/Examples","draft":false,"unlisted":false,"editUrl":"https://github.com/RogueParadigm/ElysPerceptionPlugin/tree/main/website/docs/Examples.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"Examples","title":"Examples","sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Advanced Customization Guide","permalink":"/docs/ElysPerceptionPlugin/docs/AdvancedCustomization"},"next":{"title":"API Reference","permalink":"/docs/ElysPerceptionPlugin/docs/API-Reference"}}');var i=t(4848),l=t(8453);const a={id:"Examples",title:"Examples",sidebar_position:5},o=void 0,s={},c=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Example 1: Basic Target Tracking System",id:"example-1-basic-target-tracking-system",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Blueprint Implementation",id:"blueprint-implementation",level:3},{value:"1. Setup Perception Component",id:"1-setup-perception-component",level:4},{value:"2. Enemy Setup",id:"2-enemy-setup",level:4},{value:"3. Input Handling",id:"3-input-handling",level:4},{value:"4. HUD Widget",id:"4-hud-widget",level:4},{value:"C++ Implementation",id:"c-implementation",level:3},{value:"Example 2: Interaction System with UI Prompts",id:"example-2-interaction-system-with-ui-prompts",level:2},{value:"Requirements",id:"requirements-1",level:3},{value:"Blueprint Implementation",id:"blueprint-implementation-1",level:3},{value:"1. Setup Interaction Pipeline",id:"1-setup-interaction-pipeline",level:4},{value:"2. Interactable Objects",id:"2-interactable-objects",level:4},{value:"3. Event Handling",id:"3-event-handling",level:4},{value:"4. Interaction Prompt Widget",id:"4-interaction-prompt-widget",level:4},{value:"C++ Implementation",id:"c-implementation-1",level:3},{value:"Example 3: Multi-Channel Setup",id:"example-3-multi-channel-setup",level:2},{value:"Requirements",id:"requirements-2",level:3},{value:"Blueprint Implementation",id:"blueprint-implementation-2",level:3},{value:"Setup Three Pipelines and Three Listeners",id:"setup-three-pipelines-and-three-listeners",level:4},{value:"Custom Team Filter",id:"custom-team-filter",level:4},{value:"Event Handling",id:"event-handling",level:4},{value:"C++ Implementation",id:"c-implementation-2",level:3},{value:"Example 4: Custom Scorer - Health Priority",id:"example-4-custom-scorer---health-priority",level:2},{value:"C++ Implementation",id:"c-implementation-3",level:3},{value:"Usage Example",id:"usage-example",level:3},{value:"Blueprint Implementation",id:"blueprint-implementation-3",level:3},{value:"Example 5: Custom Filter - Line of Sight",id:"example-5-custom-filter---line-of-sight",level:2},{value:"C++ Implementation",id:"c-implementation-4",level:3},{value:"Advanced: Multi-Point Line of Sight",id:"advanced-multi-point-line-of-sight",level:3},{value:"Blueprint Implementation",id:"blueprint-implementation-4",level:3},{value:"Example 6: Advanced Scoring - Weighted Combination",id:"example-6-advanced-scoring---weighted-combination",level:2},{value:"Use Case",id:"use-case",level:3},{value:"C++ Implementation",id:"c-implementation-5",level:3},{value:"Usage Example",id:"usage-example-1",level:3},{value:"Alternative: Non-Linear Aggregation",id:"alternative-non-linear-aggregation",level:3},{value:"Blueprint Implementation",id:"blueprint-implementation-5",level:3},{value:"Complete Example Configuration",id:"complete-example-configuration",level:3},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Practical examples demonstrating common use cases and custom implementations for ElysPerceptionPlugin."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Use-case map"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Use case"}),(0,i.jsx)(n.th,{children:"Section"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Target tracking (full flow)"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#example-1-basic-target-tracking-system",children:"Example 1"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Interaction with prompts"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#example-2-interaction-system-with-ui-prompts",children:"Example 2"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Multi-channel setup"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#example-3-multi-channel-setup",children:"Example 3"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Custom scorer (health)"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#example-4-custom-scorer---health-priority",children:"Example 4"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Custom filter (LOS)"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#example-5-custom-filter---line-of-sight",children:"Example 5"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Weighted scoring"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#example-6-advanced-scoring---weighted-combination",children:"Example 6"})})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["Note: Base component setup is in ",(0,i.jsx)(n.a,{href:"/docs/ElysPerceptionPlugin/docs/GettingStarted#quick-start",children:"GettingStarted"}),". Each example focuses on the variations only."]})}),"\n",(0,i.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#example-1-basic-target-tracking-system",children:"Example 1: Basic Target Tracking System"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#example-2-interaction-system-with-ui-prompts",children:"Example 2: Interaction System with UI Prompts"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#example-3-multi-channel-setup",children:"Example 3: Multi-Channel Setup"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#example-4-custom-scorer---health-priority",children:"Example 4: Custom Scorer - Health Priority"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#example-5-custom-filter---line-of-sight",children:"Example 5: Custom Filter - Line of Sight"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#example-6-advanced-scoring---weighted-combination",children:"Example 6: Advanced Scoring - Weighted Combination"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"example-1-basic-target-tracking-system",children:"Example 1: Basic Target Tracking System"}),"\n",(0,i.jsx)(n.p,{children:"A simple target tracking system for third-person combat."}),"\n",(0,i.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Detect enemies within range"}),"\n",(0,i.jsx)(n.li,{children:"Show UI indicator for the best target"}),"\n",(0,i.jsx)(n.li,{children:"Track the current best enemy target"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"blueprint-implementation",children:"Blueprint Implementation"}),"\n",(0,i.jsx)(n.h4,{id:"1-setup-perception-component",children:"1. Setup Perception Component"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"PlayerController BP:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.code,{children:"ERPPerceptionComponent"})," component"]}),"\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.code,{children:"ERPChannelListenerComponent"})," component"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"ERPPerceptionComponent Configuration:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Default Sampling Range"}),": 3000"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Target Pipeline:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Channel Id: ",(0,i.jsx)(n.code,{children:"Target"})]}),"\n",(0,i.jsxs)(n.li,{children:["Sampler: ",(0,i.jsx)(n.code,{children:"ERPSphereOverlapSampler"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Trace Channel: ",(0,i.jsx)(n.code,{children:"ECC_Pawn"})]}),"\n",(0,i.jsxs)(n.li,{children:["Actor Class: ",(0,i.jsx)(n.code,{children:"ACharacter"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Filters: ",(0,i.jsx)(n.code,{children:"ERPTargetableFilter"})]}),"\n",(0,i.jsxs)(n.li,{children:["Scorers: ",(0,i.jsx)(n.code,{children:"ERPDistanceScorer"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Normalize By Range: \u2713"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Aggregator: ",(0,i.jsx)(n.code,{children:"ERPIdentityAggregator"})]}),"\n",(0,i.jsxs)(n.li,{children:["Resolver: ",(0,i.jsx)(n.code,{children:"ERPLowestScoreResolver"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"ERPChannelListenerComponent Configuration:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Channel Id"}),": ",(0,i.jsx)(n.code,{children:"Target"})]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"2-enemy-setup",children:"2. Enemy Setup"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Enemy BP (Character):"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Implement Interface: ",(0,i.jsx)(n.code,{children:"ERPTargetable"})]}),"\n",(0,i.jsxs)(n.li,{children:["Override ",(0,i.jsx)(n.code,{children:"Can Be Targeted By"}),":","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Branch: Is Alive\n  True \u2192 Return True\n  False \u2192 Return False\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"3-input-handling",children:"3. Input Handling"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Input Actions:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"IA_Target"})," (Action, Hold)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Event Graph:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-blueprint",children:'// BeginPlay: Bind events\nEvent BeginPlay\n  \u2192 Get Component: ChannelListenerComponent\n  \u2192 Bind Event to OnCandidateAcquired\n    \u2192 Custom Event: HandleTargetAcquired\n  \u2192 Bind Event to OnCandidateLost\n    \u2192 Custom Event: HandleTargetLost\n\n// Handle target acquired\nCustom Event: HandleTargetAcquired (Candidate)\n  \u2192 Get HUD\n  \u2192 Show Target Indicator (Candidate)\n  \u2192 Print: "Target Acquired"\n\n// Handle target lost\nCustom Event: HandleTargetLost (Candidate)\n  \u2192 Get HUD\n  \u2192 Hide Target Indicator\n  \u2192 Print: "Target Lost"\n'})}),"\n",(0,i.jsx)(n.h4,{id:"4-hud-widget",children:"4. HUD Widget"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"WBP_TargetIndicator:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Image: Crosshair/Reticle"}),"\n",(0,i.jsx)(n.li,{children:"Text: Target Name"}),"\n",(0,i.jsx)(n.li,{children:"Progress Bar: Target Health"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Widget Logic:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-blueprint",children:"Event Construct\n  \u2192 Get Owning Player\n  \u2192 Get Component: ChannelListenerComponent\n  \u2192 Set Variable: ListenerComp\n\nEvent Tick\n  \u2192 ListenerComp \u2192 GetCurrentCandidate\n  \u2192 Is Valid?\n    True:\n      \u2192 Update Position (Project To Screen)\n      \u2192 Set Visibility: Visible\n      \u2192 Get Target Health\n      \u2192 Update Health Bar\n    False:\n      \u2192 Set Visibility: Hidden\n"})}),"\n",(0,i.jsx)(n.h3,{id:"c-implementation",children:"C++ Implementation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"YourPlayerController.h:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'#pragma once\n\n#include "CoreMinimal.h"\n#include "GameFramework/PlayerController.h"\n#include "Core/ERPPerceptionComponent.h"\n#include "Core/ERPChannelListenerComponent.h"\n#include "YourPlayerController.generated.h"\n\nUCLASS()\nclass YOURPROJECT_API AYourPlayerController : public APlayerController\n{\n    GENERATED_BODY()\n\npublic:\n    AYourPlayerController();\n\nprotected:\n    virtual void BeginPlay() override;\n\n    UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "Perception")\n    UERPPerceptionComponent* PerceptionComponent;\n\n    UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "Perception")\n    UERPChannelListenerComponent* TargetListener;\n\nprivate:\n    UFUNCTION()\n    void OnTargetAcquired(AActor* Candidate);\n\n    UFUNCTION()\n    void OnTargetLost(AActor* Candidate);\n\n    UPROPERTY()\n    AActor* CurrentTarget;\n};\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"YourPlayerController.cpp:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'#include "YourPlayerController.h"\n#include "Pipeline/Defaults/ERPSphereOverlapSampler.h"\n#include "Pipeline/Defaults/ERPTargetableFilter.h"\n#include "Pipeline/Defaults/ERPDistanceScorer.h"\n#include "Pipeline/Defaults/ERPIdentityAggregator.h"\n#include "Pipeline/Defaults/ERPLowestScoreResolver.h"\n\nAYourPlayerController::AYourPlayerController()\n{\n    PerceptionComponent = CreateDefaultSubobject<UERPPerceptionComponent>(TEXT("PerceptionComponent"));\n    TargetListener = CreateDefaultSubobject<UERPChannelListenerComponent>(TEXT("TargetListener"));\n}\n\nvoid AYourPlayerController::BeginPlay()\n{\n    Super::BeginPlay();\n\n    // Configure pipeline\n    FERPChannelPipeline TP;\n    TP.ChannelId = FName("Target");\n\n    auto* Sampler = NewObject<UERPSphereOverlapSampler>(this);\n    Sampler->TraceChannel = ECC_Pawn;\n    Sampler->ActorClass = ACharacter::StaticClass();\n    TP.Sampler = Sampler;\n\n    TP.Filters.Add(NewObject<UERPTargetableFilter>(this));\n\n    auto* Scorer = NewObject<UERPDistanceScorer>(this);\n    Scorer->bNormalizeByRange = true;\n    TP.Scorers.Add(Scorer);\n\n    TP.Aggregator = NewObject<UERPIdentityAggregator>(this);\n    TP.Resolver = NewObject<UERPLowestScoreResolver>(this);\n\n    PerceptionComponent->ChannelPipelines.Add(TP);\n\n    // Configure listener\n    TargetListener->ChannelId = FName("Target");\n    TargetListener->SetPerceptionComponent(PerceptionComponent);\n\n    // Bind events\n    TargetListener->OnCandidateAcquired.AddDynamic(this, &AYourPlayerController::OnTargetAcquired);\n    TargetListener->OnCandidateLost.AddDynamic(this, &AYourPlayerController::OnTargetLost);\n}\n\nvoid AYourPlayerController::OnTargetAcquired(AActor* Candidate)\n{\n    CurrentTarget = Candidate;\n    UE_LOG(LogTemp, Log, TEXT("Target Acquired: %s"), *Candidate->GetName());\n    // Update HUD here\n}\n\nvoid AYourPlayerController::OnTargetLost(AActor* Candidate)\n{\n    CurrentTarget = nullptr;\n    UE_LOG(LogTemp, Log, TEXT("Target Lost: %s"), *Candidate->GetName());\n    // Update HUD here\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"example-2-interaction-system-with-ui-prompts",children:"Example 2: Interaction System with UI Prompts"}),"\n",(0,i.jsx)(n.p,{children:"Interaction system that shows context-sensitive UI prompts."}),"\n",(0,i.jsx)(n.h3,{id:"requirements-1",children:"Requirements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Detect interactable objects (doors, items, NPCs)"}),"\n",(0,i.jsx)(n.li,{children:'Show "Press E to interact" prompt'}),"\n",(0,i.jsx)(n.li,{children:"Prioritize closest interactable"}),"\n",(0,i.jsx)(n.li,{children:"Hide prompt when out of range"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"blueprint-implementation-1",children:"Blueprint Implementation"}),"\n",(0,i.jsx)(n.h4,{id:"1-setup-interaction-pipeline",children:"1. Setup Interaction Pipeline"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"PlayerController BP:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.code,{children:"ERPPerceptionComponent"})," component"]}),"\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.code,{children:"ERPChannelListenerComponent"})," component"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"ERPPerceptionComponent Configuration:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Default Sampling Range"}),": 300"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Interaction Pipeline:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Channel Id: ",(0,i.jsx)(n.code,{children:"Interaction"})]}),"\n",(0,i.jsxs)(n.li,{children:["Sampler: ",(0,i.jsx)(n.code,{children:"ERPSphereOverlapSampler"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Trace Channel: ",(0,i.jsx)(n.code,{children:"ECC_Visibility"})]}),"\n",(0,i.jsxs)(n.li,{children:["Actor Class: ",(0,i.jsx)(n.code,{children:"AActor"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Filters: ",(0,i.jsx)(n.code,{children:"ERPInteractableFilter"})]}),"\n",(0,i.jsxs)(n.li,{children:["Scorers: ",(0,i.jsx)(n.code,{children:"ERPDistanceScorer"})]}),"\n",(0,i.jsxs)(n.li,{children:["Aggregator: ",(0,i.jsx)(n.code,{children:"ERPIdentityAggregator"})]}),"\n",(0,i.jsxs)(n.li,{children:["Resolver: ",(0,i.jsx)(n.code,{children:"ERPLowestScoreResolver"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"ERPChannelListenerComponent Configuration:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Channel Id"}),": ",(0,i.jsx)(n.code,{children:"Interaction"})]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"2-interactable-objects",children:"2. Interactable Objects"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"BP_Door (Actor):"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Implement Interface: ",(0,i.jsx)(n.code,{children:"ERPInteractable"})]}),"\n",(0,i.jsxs)(n.li,{children:["Variable: ",(0,i.jsx)(n.code,{children:"bIsLocked"})," (Boolean)"]}),"\n",(0,i.jsxs)(n.li,{children:["Override ",(0,i.jsx)(n.code,{children:"Can Interact"}),":","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Branch: Is Locked\n  True \u2192 Return False\n  False \u2192 Return True\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"BP_Pickup (Actor):"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Implement Interface: ",(0,i.jsx)(n.code,{children:"ERPInteractable"})]}),"\n",(0,i.jsxs)(n.li,{children:["Override ",(0,i.jsx)(n.code,{children:"Can Interact"}),":","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Return True\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"3-event-handling",children:"3. Event Handling"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Event Graph:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-blueprint",children:"// BeginPlay: Setup\nEvent BeginPlay\n  \u2192 Get Component: ChannelListenerComponent\n  \u2192 Bind Event to OnCandidateAcquired\n    \u2192 Custom Event: ShowInteractionPrompt\n  \u2192 Bind Event to OnCandidateLost\n    \u2192 Custom Event: HideInteractionPrompt\n\n// Show prompt\nCustom Event: ShowInteractionPrompt (Candidate)\n  \u2192 Get HUD Widget\n  \u2192 Show Interaction Prompt (Candidate)\n  \u2192 Set Current Interactable\n\n// Hide prompt\nCustom Event: HideInteractionPrompt (Candidate)\n  \u2192 Get HUD Widget\n  \u2192 Hide Interaction Prompt\n  \u2192 Clear Current Interactable\n\n// Execute interaction\nInput Action: IA_Interact\n  \u2192 Get Component: ChannelListenerComponent\n  \u2192 GetCurrentCandidate\n  \u2192 Is Valid?\n    True:\n      \u2192 Cast To Interactable Interface\n      \u2192 Call Custom Interact Function\n"})}),"\n",(0,i.jsx)(n.h4,{id:"4-interaction-prompt-widget",children:"4. Interaction Prompt Widget"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"WBP_InteractionPrompt:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Background Panel"}),"\n",(0,i.jsx)(n.li,{children:'Text: "Press [E] to {Action}"'}),"\n",(0,i.jsx)(n.li,{children:"Icon (optional)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Widget Update:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-blueprint",children:'// Update prompt text based on interactable type\nFunction: Update Prompt (Interactable Actor)\n  \u2192 Switch on Class:\n    \u2192 Door: Set Text "Press [E] to Open"\n    \u2192 Item: Set Text "Press [E] to Pick Up"\n    \u2192 NPC: Set Text "Press [E] to Talk"\n    \u2192 Default: Set Text "Press [E] to Interact"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"c-implementation-1",children:"C++ Implementation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Interactable Object Header:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'#pragma once\n\n#include "CoreMinimal.h"\n#include "GameFramework/Actor.h"\n#include "Core/ERPInteractable.h"\n#include "InteractableObject.generated.h"\n\nUCLASS()\nclass YOURPROJECT_API AInteractableObject : public AActor, public IERPInteractable\n{\n    GENERATED_BODY()\n\npublic:\n    AInteractableObject();\n\n    // IERPInteractable Interface\n    virtual bool CanInteract_Implementation(AActor* InteractingActor) const override;\n\n    // Called when player interacts\n    UFUNCTION(BlueprintNativeEvent, Category = "Interaction")\n    void OnInteract(AActor* Instigator);\n\nprotected:\n    UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Interaction")\n    FText InteractionText = FText::FromString("Interact");\n\n    UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Interaction")\n    bool bCanBeInteracted = true;\n};\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Interactable Object Implementation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'#include "InteractableObject.h"\n\nAInteractableObject::AInteractableObject()\n{\n    PrimaryActorTick.bCanEverTick = false;\n}\n\nbool AInteractableObject::CanInteract_Implementation(AActor* InteractingActor) const\n{\n    return bCanBeInteracted;\n}\n\nvoid AInteractableObject::OnInteract_Implementation(AActor* Instigator)\n{\n    // Override in child classes (Door, Item, etc.)\n    UE_LOG(LogTemp, Log, TEXT("Interacted with %s"), *GetName());\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"example-3-multi-channel-setup",children:"Example 3: Multi-Channel Setup"}),"\n",(0,i.jsx)(n.p,{children:"Using multiple channels simultaneously: Target, Interaction, and HealTarget."}),"\n",(0,i.jsx)(n.h3,{id:"requirements-2",children:"Requirements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Target enemies for combat"}),"\n",(0,i.jsx)(n.li,{children:"Interact with objects"}),"\n",(0,i.jsx)(n.li,{children:"Target allies for healing"}),"\n",(0,i.jsx)(n.li,{children:"Each channel prioritizes differently"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"blueprint-implementation-2",children:"Blueprint Implementation"}),"\n",(0,i.jsx)(n.h4,{id:"setup-three-pipelines-and-three-listeners",children:"Setup Three Pipelines and Three Listeners"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"PlayerController BP:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.code,{children:"ERPPerceptionComponent"})," component"]}),"\n",(0,i.jsxs)(n.li,{children:["Add three ",(0,i.jsx)(n.code,{children:"ERPChannelListenerComponent"})," components:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TargetListener"})," (Channel Id: ",(0,i.jsx)(n.code,{children:"Target"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"InteractionListener"})," (Channel Id: ",(0,i.jsx)(n.code,{children:"Interaction"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"HealTargetListener"})," (Channel Id: ",(0,i.jsx)(n.code,{children:"HealTarget"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. Target Pipeline (Enemies):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Channel Id: Target\nSampler: ERPSphereOverlapSampler (Range: 3000)\nFilters: \n  - ERPTargetableFilter\n  - Custom: EnemyTeamFilter\nScorers:\n  - ERPDistanceScorer\n  - ERPConeScorer (10 degrees)\nAggregator: ERPAdditiveAggregator\nResolver: ERPLowestScoreResolver\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. Interaction Pipeline (Objects):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Channel Id: Interaction\nSampler: ERPSphereOverlapSampler (Range: 300)\nFilters:\n  - ERPInteractableFilter\nScorers:\n  - ERPDistanceScorer\nAggregator: ERPIdentityAggregator\nResolver: ERPLowestScoreResolver\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. HealTarget Pipeline (Allies):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Channel Id: HealTarget\nSampler: ERPSphereOverlapSampler (Range: 2000)\nFilters:\n  - Custom: AllyTeamFilter\n  - Custom: InjuredFilter (health < 100%)\nScorers:\n  - Custom: HealthPercentScorer (lower health = better)\n  - ERPDistanceScorer\nAggregator: ERPAdditiveAggregator (50% health, 50% distance)\nResolver: ERPLowestScoreResolver\n"})}),"\n",(0,i.jsx)(n.h4,{id:"custom-team-filter",children:"Custom Team Filter"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"BP_TeamFilter (derived from ERPFilterBase):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-blueprint",children:"Event: Passes (Context, Candidate)\n  \u2192 Cast To Character (Candidate)\n  \u2192 Get Team ID\n  \u2192 Branch: Team ID matches expected?\n    True \u2192 Return True\n    False \u2192 Return False\n"})}),"\n",(0,i.jsx)(n.h4,{id:"event-handling",children:"Event Handling"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-blueprint",children:'// Switch behavior based on mode\nVariable: CurrentMode (Enum: Combat, Heal, Interact)\n\nEvent BeginPlay\n  \u2192 Get Component: TargetListener\n  \u2192 Bind Event to OnCandidateAcquired\n    \u2192 Custom Event: HandleTargetAcquired\n  \u2192 Bind Event to OnCandidateLost\n    \u2192 Custom Event: HandleTargetLost\n  \n  \u2192 Get Component: InteractionListener\n  \u2192 Bind Event to OnCandidateAcquired\n    \u2192 Custom Event: HandleInteractionAcquired\n  \u2192 Bind Event to OnCandidateLost\n    \u2192 Custom Event: HandleInteractionLost\n  \n  \u2192 Get Component: HealTargetListener\n  \u2192 Bind Event to OnCandidateAcquired\n    \u2192 Custom Event: HandleHealTargetAcquired\n  \u2192 Bind Event to OnCandidateLost\n    \u2192 Custom Event: HandleHealTargetLost\n\n// Mode switching\nInput: SwitchToHealMode\n  \u2192 Set CurrentMode = Heal\n  \u2192 Print: "Healing Mode"\n\nInput: SwitchToCombatMode\n  \u2192 Set CurrentMode = Combat\n  \u2192 Print: "Combat Mode"\n\n// Handle events based on mode\nCustom Event: HandleTargetAcquired (Candidate)\n  \u2192 Branch: CurrentMode == Combat?\n    True:\n      \u2192 Show Combat Reticle (Red)\n\nCustom Event: HandleInteractionAcquired (Candidate)\n  \u2192 Show Interaction Prompt\n\nCustom Event: HandleHealTargetAcquired (Candidate)\n  \u2192 Branch: CurrentMode == Heal?\n    True:\n      \u2192 Show Heal Reticle (Green)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"c-implementation-2",children:"C++ Implementation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Multi-Channel with Listeners:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'// In your player controller or character\nUPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "Perception")\nUERPPerceptionComponent* PerceptionComponent;\n\nUPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "Perception")\nUERPChannelListenerComponent* TargetListener;\n\nUPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "Perception")\nUERPChannelListenerComponent* InteractionListener;\n\nUPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "Perception")\nUERPChannelListenerComponent* HealTargetListener;\n\n// In BeginPlay, configure each listener\nvoid BeginPlay()\n{\n    Super::BeginPlay();\n    \n    // Create all three pipelines...\n    ConfigureTargetPipeline();\n    ConfigureInteractionPipeline();\n    ConfigureHealPipeline();\n    \n    // Setup listeners\n    TargetListener->ChannelId = FName("Target");\n    TargetListener->SetPerceptionComponent(PerceptionComponent);\n    TargetListener->OnCandidateAcquired.AddDynamic(this, &AYourController::OnTargetAcquired);\n    TargetListener->OnCandidateLost.AddDynamic(this, &AYourController::OnTargetLost);\n    \n    InteractionListener->ChannelId = FName("Interaction");\n    InteractionListener->SetPerceptionComponent(PerceptionComponent);\n    InteractionListener->OnCandidateAcquired.AddDynamic(this, &AYourController::OnInteractionAcquired);\n    InteractionListener->OnCandidateLost.AddDynamic(this, &AYourController::OnInteractionLost);\n    \n    HealTargetListener->ChannelId = FName("HealTarget");\n    HealTargetListener->SetPerceptionComponent(PerceptionComponent);\n    HealTargetListener->OnCandidateAcquired.AddDynamic(this, &AYourController::OnHealTargetAcquired);\n    HealTargetListener->OnCandidateLost.AddDynamic(this, &AYourController::OnHealTargetLost);\n}\n\nvoid ConfigureHealPipeline()\n{\n    FERPChannelPipeline HP;\n    HP.ChannelId = FName("HealTarget");\n    \n    auto* Sampler = NewObject<UERPSphereOverlapSampler>(this);\n    Sampler->TraceChannel = ECC_Pawn;\n    Sampler->ActorClass = ACharacter::StaticClass();\n    HP.Sampler = Sampler;\n\n    // Custom filters\n    HP.Filters.Add(NewObject<UAllyTeamFilter>(this));\n    HP.Filters.Add(NewObject<UInjuredFilter>(this));\n\n    // Custom scorer for health\n    HP.Scorers.Add(NewObject<UHealthPercentScorer>(this));\n    HP.Scorers.Add(NewObject<UERPDistanceScorer>(this));\n\n    HP.Aggregator = NewObject<UERPAdditiveAggregator>(this);\n    HP.Resolver = NewObject<UERPLowestScoreResolver>(this);\n    \n    PerceptionComponent->ChannelPipelines.Add(HP);\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Alternative: Direct Channel Events (Without Listeners):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'// Bind directly to the perception component for multi-channel handling\nvoid BeginPlay()\n{\n    Super::BeginPlay();\n    \n    PerceptionComponent->OnChannelCandidateAcquired.AddDynamic(this, &AYourController::OnChannelCandidateAcquired);\n    PerceptionComponent->OnChannelCandidateLost.AddDynamic(this, &AYourController::OnChannelCandidateLost);\n}\n\nUFUNCTION()\nvoid OnChannelCandidateAcquired(FName ChannelId, AActor* Candidate)\n{\n    if (ChannelId == FName("Target"))\n    {\n        HandleTargetAcquired(Candidate);\n    }\n    else if (ChannelId == FName("Interaction"))\n    {\n        HandleInteractionAcquired(Candidate);\n    }\n    else if (ChannelId == FName("HealTarget"))\n    {\n        HandleHealTargetAcquired(Candidate);\n    }\n}\n\nUFUNCTION()\nvoid OnChannelCandidateLost(FName ChannelId, AActor* Candidate)\n{\n    if (ChannelId == FName("Target"))\n    {\n        HandleTargetLost(Candidate);\n    }\n    else if (ChannelId == FName("Interaction"))\n    {\n        HandleInteractionLost(Candidate);\n    }\n    else if (ChannelId == FName("HealTarget"))\n    {\n        HandleHealTargetLost(Candidate);\n    }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"example-4-custom-scorer---health-priority",children:"Example 4: Custom Scorer - Health Priority"}),"\n",(0,i.jsx)(n.p,{children:"A custom scorer that prioritizes low-health targets for healing or finishing blows."}),"\n",(0,i.jsx)(n.h3,{id:"c-implementation-3",children:"C++ Implementation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"HealthPriorityScorer.h:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'#pragma once\n\n#include "CoreMinimal.h"\n#include "Pipeline/ERPScorerBase.h"\n#include "HealthPriorityScorer.generated.h"\n\nUCLASS(BlueprintType, Blueprintable, EditInlineNew, DefaultToInstanced, meta = (DisplayName = "Health Priority Scorer"))\nclass YOURPROJECT_API UHealthPriorityScorer : public UERPScorerBase\n{\n    GENERATED_BODY()\n\npublic:\n    /** If true, lower health gets lower score (better). If false, higher health gets lower score. */\n    UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Scorer")\n    bool bPrioritizeLowHealth = true;\n\n    /** If true, only consider actors below this health threshold */\n    UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Scorer")\n    bool bUseHealthThreshold = false;\n\n    /** Health threshold percentage (0.0 - 1.0) */\n    UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Scorer", meta = (EditCondition = "bUseHealthThreshold", ClampMin = "0.0", ClampMax = "1.0"))\n    float HealthThreshold = 0.5f;\n\n    virtual float Score_Implementation(const FERPPerceptionContext& Context, AActor* Candidate) const override;\n};\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"HealthPriorityScorer.cpp:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'#include "HealthPriorityScorer.h"\n#include "Components/HealthComponent.h" // Your health component\n\nfloat UHealthPriorityScorer::Score_Implementation(const FERPPerceptionContext& Context, AActor* Candidate) const\n{\n    if (!Candidate)\n        return 1.0f; // Neutral/worst score\n\n    // Get health component (adjust based on your architecture)\n    UHealthComponent* HealthComp = Candidate->FindComponentByClass<UHealthComponent>();\n    if (!HealthComp)\n        return 1.0f; // No health component, neutral score\n\n    float HealthPercent = HealthComp->GetHealthPercent(); // 0.0 = dead, 1.0 = full health\n\n    // Check threshold if enabled\n    if (bUseHealthThreshold && HealthPercent > HealthThreshold)\n        return -1.0f; // Reject (above threshold)\n\n    // Score based on priority\n    if (bPrioritizeLowHealth)\n    {\n        // Lower health = lower score = better\n        return HealthPercent;\n    }\n    else\n    {\n        // Higher health = lower score = better\n        return 1.0f - HealthPercent;\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"usage-example",children:"Usage Example"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"For Healing System:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'// Prioritize allies with low health\nFERPChannelPipeline HealPipeline;\nHealPipeline.ChannelId = "HealTarget";\nHealPipeline.Sampler = NewObject<UERPSphereOverlapSampler>(this);\nHealPipeline.Filters.Add(NewObject<UAllyFilter>(this));\n\nauto* HealthScorer = NewObject<UHealthPriorityScorer>(this);\nHealthScorer->bPrioritizeLowHealth = true;  // Lower health = higher priority\nHealthScorer->bUseHealthThreshold = true;   // Only consider below threshold\nHealthScorer->HealthThreshold = 1.0f;       // Below 100% health\nHealPipeline.Scorers.Add(HealthScorer);\n\nHealPipeline.Aggregator = NewObject<UERPIdentityAggregator>(this);\nHealPipeline.Resolver = NewObject<UERPLowestScoreResolver>(this);\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"For Execute/Finish System:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"// Target low-health enemies for finishing\nauto* FinishScorer = NewObject<UHealthPriorityScorer>(this);\nFinishScorer->bPrioritizeLowHealth = true;  // Low health = high priority\nFinishScorer->bUseHealthThreshold = true;   // Only consider below threshold\nFinishScorer->HealthThreshold = 0.3f;       // Below 30% health\nTargetPipeline.Scorers.Add(FinishScorer);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"blueprint-implementation-3",children:"Blueprint Implementation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"BP_HealthScorer (derived from ERPScorerBase):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-blueprint",children:"Event: Score (Context, Candidate)\n  \u2192 Cast To Character (Candidate)\n  \u2192 Get Component: HealthComponent\n  \u2192 Is Valid?\n    True:\n      \u2192 Get Health Percent\n      \u2192 Branch: Prioritize Low Health?\n        True:\n          \u2192 Return Health Percent (0.0 = critical, 1.0 = full)\n        False:\n          \u2192 Return (1.0 - Health Percent)\n    False:\n      \u2192 Return 1.0 (neutral score)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"example-5-custom-filter---line-of-sight",children:"Example 5: Custom Filter - Line of Sight"}),"\n",(0,i.jsx)(n.p,{children:"A filter that rejects candidates not in line of sight."}),"\n",(0,i.jsx)(n.h3,{id:"c-implementation-4",children:"C++ Implementation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"LineOfSightFilter.h:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'#pragma once\n\n#include "CoreMinimal.h"\n#include "Pipeline/ERPFilterBase.h"\n#include "LineOfSightFilter.generated.h"\n\nUCLASS(BlueprintType, Blueprintable, EditInlineNew, DefaultToInstanced, meta = (DisplayName = "Line of Sight Filter"))\nclass YOURPROJECT_API ULineOfSightFilter : public UERPFilterBase\n{\n    GENERATED_BODY()\n\npublic:\n    /** Collision channel for line traces */\n    UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Filter")\n    TEnumAsByte<ECollisionChannel> TraceChannel = ECC_Visibility;\n\n    /** If true, uses complex collision for traces */\n    UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Filter")\n    bool bTraceComplex = false;\n\n    /** Offset from candidate location for trace end (useful for hitting center mass) */\n    UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Filter")\n    FVector TargetLocationOffset = FVector(0.f, 0.f, 50.f);\n\n    virtual bool Passes_Implementation(const FERPPerceptionContext& Context, AActor* Candidate) const override;\n};\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"LineOfSightFilter.cpp:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'#include "LineOfSightFilter.h"\n#include "Engine/World.h"\n#include "CollisionQueryParams.h"\n\nbool ULineOfSightFilter::Passes_Implementation(const FERPPerceptionContext& Context, AActor* Candidate) const\n{\n    if (!Candidate || !Context.ContextActor)\n        return false;\n\n    UWorld* World = Context.ContextActor->GetWorld();\n    if (!World)\n        return false;\n\n    FVector Start = Context.Origin;\n    FVector End = Candidate->GetActorLocation() + TargetLocationOffset;\n\n    FHitResult HitResult;\n    FCollisionQueryParams Params;\n    Params.AddIgnoredActor(Context.ContextActor);\n    Params.bTraceComplex = bTraceComplex;\n\n    bool bHit = World->LineTraceSingleByChannel(\n        HitResult,\n        Start,\n        End,\n        TraceChannel,\n        Params\n    );\n\n    // Pass if we hit the candidate directly, or if we didn\'t hit anything\n    if (!bHit)\n        return true; // Clear line of sight\n\n    // Check if we hit the candidate itself (or one of its components)\n    return HitResult.GetActor() == Candidate;\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"advanced-multi-point-line-of-sight",children:"Advanced: Multi-Point Line of Sight"}),"\n",(0,i.jsx)(n.p,{children:"Check multiple points on the target for partial visibility."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"MultiPointLOSFilter.cpp:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"bool UMultiPointLOSFilter::Passes_Implementation(const FERPPerceptionContext& Context, AActor* Candidate) const\n{\n    if (!Candidate || !Context.ContextActor)\n        return false;\n\n    UWorld* World = Context.ContextActor->GetWorld();\n    if (!World)\n        return false;\n\n    FVector Start = Context.Origin;\n    FVector CandidateLocation = Candidate->GetActorLocation();\n\n    // Test multiple points (center, head, feet)\n    TArray<FVector> TestPoints = {\n        CandidateLocation + FVector(0, 0, 0),    // Center\n        CandidateLocation + FVector(0, 0, 80),   // Head\n        CandidateLocation + FVector(0, 0, -40)   // Feet\n    };\n\n    int32 VisiblePoints = 0;\n\n    for (const FVector& TestPoint : TestPoints)\n    {\n        FHitResult HitResult;\n        FCollisionQueryParams Params;\n        Params.AddIgnoredActor(Context.ContextActor);\n\n        bool bHit = World->LineTraceSingleByChannel(\n            HitResult, Start, TestPoint, TraceChannel, Params\n        );\n\n        if (!bHit || HitResult.GetActor() == Candidate)\n        {\n            VisiblePoints++;\n        }\n    }\n\n    // Pass if at least MinVisiblePoints are visible\n    return VisiblePoints >= MinVisiblePoints;\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"blueprint-implementation-4",children:"Blueprint Implementation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"BP_LineOfSightFilter (derived from ERPFilterBase):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-blueprint",children:"Event: Passes (Context, Candidate)\n  \u2192 Line Trace By Channel\n    \u2192 Start: Context.Origin\n    \u2192 End: Candidate.GetActorLocation + (0, 0, 50)\n    \u2192 Channel: Visibility\n    \u2192 Ignore: Context.ContextActor\n  \u2192 Branch: Hit?\n    True:\n      \u2192 Get Hit Actor\n      \u2192 Equals: Candidate?\n        True \u2192 Return True (hit candidate itself)\n        False \u2192 Return False (blocked)\n    False:\n      \u2192 Return True (clear line of sight)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"example-6-advanced-scoring---weighted-combination",children:"Example 6: Advanced Scoring - Weighted Combination"}),"\n",(0,i.jsx)(n.p,{children:"Combining multiple scoring factors with custom weights."}),"\n",(0,i.jsx)(n.h3,{id:"use-case",children:"Use Case"}),"\n",(0,i.jsx)(n.p,{children:"Target selection that considers:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Distance (40% weight)"}),"\n",(0,i.jsx)(n.li,{children:"Angle from center (30% weight)"}),"\n",(0,i.jsx)(n.li,{children:"Health/Threat level (30% weight)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"c-implementation-5",children:"C++ Implementation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"WeightedAggregator.h:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'#pragma once\n\n#include "CoreMinimal.h"\n#include "Pipeline/ERPAggregatorBase.h"\n#include "WeightedAggregator.generated.h"\n\nUCLASS(BlueprintType, Blueprintable, EditInlineNew, DefaultToInstanced, meta = (DisplayName = "Weighted Aggregator"))\nclass YOURPROJECT_API UWeightedAggregator : public UERPAggregatorBase\n{\n    GENERATED_BODY()\n\npublic:\n    /** Weights for each scorer (must match number of scorers) */\n    UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Aggregator")\n    TArray<float> Weights = {1.0f};\n\n    /** If true, normalizes weights to sum to 1.0 */\n    UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Aggregator")\n    bool bNormalizeWeights = true;\n\n    virtual float Aggregate_Implementation(const TArray<float>& Scores) const override;\n};\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"WeightedAggregator.cpp:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'#include "WeightedAggregator.h"\n\nfloat UWeightedAggregator::Aggregate_Implementation(const TArray<float>& Scores) const\n{\n    if (Scores.Num() == 0)\n        return 0.0f;\n\n    // Calculate total weight\n    float TotalWeight = 0.0f;\n    for (int32 i = 0; i < Scores.Num(); ++i)\n    {\n        float Weight = (i < Weights.Num()) ? Weights[i] : 1.0f;\n        TotalWeight += Weight;\n    }\n\n    if (TotalWeight == 0.0f)\n        return 0.0f;\n\n    // Calculate weighted sum\n    float WeightedSum = 0.0f;\n    for (int32 i = 0; i < Scores.Num(); ++i)\n    {\n        float Weight = (i < Weights.Num()) ? Weights[i] : 1.0f;\n        \n        if (bNormalizeWeights)\n        {\n            Weight /= TotalWeight; // Normalize to sum to 1.0\n        }\n\n        WeightedSum += Scores[i] * Weight;\n    }\n\n    return WeightedSum;\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"usage-example-1",children:"Usage Example"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Setup Multi-Factor Pipeline:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'void SetupAdvancedTargetPipeline()\n{\n    FERPChannelPipeline& TP = TargetPipeline;\n    TP.ChannelId = FName("Target");\n\n    // Sampler and filters\n    TP.Sampler = NewObject<UERPSphereOverlapSampler>(this);\n    TP.Filters.Add(NewObject<UERPTargetableFilter>(this));\n    TP.Filters.Add(NewObject<ULineOfSightFilter>(this));\n\n    // Multiple scorers\n    auto* DistanceScorer = NewObject<UERPDistanceScorer>(this);\n    DistanceScorer->bNormalizeByRange = true;\n    TP.Scorers.Add(DistanceScorer);\n\n    auto* AngleScorer = NewObject<UERPConeScorer>(this);\n    AngleScorer->ConeHalfAngleDegrees = 45.0f;\n    TP.Scorers.Add(AngleScorer);\n\n    auto* ThreatScorer = NewObject<UThreatLevelScorer>(this); // Custom\n    TP.Scorers.Add(ThreatScorer);\n\n    // Weighted aggregation: 40% distance, 30% angle, 30% threat\n    auto* Aggregator = NewObject<UWeightedAggregator>(this);\n    Aggregator->Weights = {0.4f, 0.3f, 0.3f};\n    Aggregator->bNormalizeWeights = false; // Already normalized\n    TP.Aggregator = Aggregator;\n\n    TP.Resolver = NewObject<UERPLowestScoreResolver>(this);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"alternative-non-linear-aggregation",children:"Alternative: Non-Linear Aggregation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"ExponentialAggregator.cpp:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"// Scores are combined exponentially, emphasizing extremes\nfloat UExponentialAggregator::Aggregate_Implementation(const TArray<float>& Scores) const\n{\n    if (Scores.Num() == 0)\n        return 0.0f;\n\n    float Product = 1.0f;\n    for (float Score : Scores)\n    {\n        // Exponential scaling\n        Product *= FMath::Pow(Score, Exponent);\n    }\n\n    return Product;\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"blueprint-implementation-5",children:"Blueprint Implementation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"BP_WeightedAggregator:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-blueprint",children:"Event: Aggregate (Scores Array)\n  \u2192 Variable: TotalWeight = 0\n  \u2192 Variable: WeightedSum = 0\n  \u2192 ForEachLoop: Index, Score in Scores\n    \u2192 Get Weight (Index) from Weights Array\n    \u2192 Add to TotalWeight\n    \u2192 Multiply: Score * Weight\n    \u2192 Add to WeightedSum\n  \u2192 Divide: WeightedSum / TotalWeight\n  \u2192 Return Result\n"})}),"\n",(0,i.jsx)(n.h3,{id:"complete-example-configuration",children:"Complete Example Configuration"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Comprehensive Target Selection:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"// Pipeline with all factors\nTargetPipeline.Scorers = {\n    DistanceScorer,     // Weight: 0.4 (most important)\n    ConeScorer,         // Weight: 0.3 (important)\n    HealthScorer,       // Weight: 0.2 (consideration)\n    ThreatScorer        // Weight: 0.1 (minor factor)\n};\n\nWeightedAggregator->Weights = {0.4f, 0.3f, 0.2f, 0.1f};\n"})}),"\n",(0,i.jsx)(n.p,{children:"This allows fine-tuned control over target selection priorities, balancing multiple gameplay factors."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"These examples demonstrate:"}),"\n",(0,i.jsxs)(n.p,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Basic Patterns"})," - Target lock and interaction systems",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Multi-Channel"})," - Running multiple pipelines simultaneously",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Custom Scorers"})," - Gameplay-specific scoring logic",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Custom Filters"})," - Advanced candidate rejection",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Advanced Aggregation"})," - Weighted multi-factor scoring"]}),"\n",(0,i.jsxs)(n.p,{children:["For more details on architecture, see ",(0,i.jsx)(n.a,{href:"/docs/ElysPerceptionPlugin/docs/Pipeline-Architecture",children:"Pipeline-Architecture.md"}),".",(0,i.jsx)(n.br,{}),"\n","For API reference, see ",(0,i.jsx)(n.a,{href:"/docs/ElysPerceptionPlugin/docs/API-Reference",children:"API-Reference.md"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>a,x:()=>o});var r=t(6540);const i={},l=r.createContext(i);function a(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);