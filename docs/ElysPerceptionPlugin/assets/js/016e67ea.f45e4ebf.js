"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[614],{3846(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"AdvancedCustomization","title":"Advanced Customization Guide","description":"This guide covers creating custom pipeline components and extending the ElysPerceptionPlugin for advanced use cases.","source":"@site/../Documentation/AdvancedCustomization.md","sourceDirName":".","slug":"/AdvancedCustomization","permalink":"/docs/ElysPerceptionPlugin/docs/AdvancedCustomization","draft":false,"unlisted":false,"editUrl":"https://github.com/RogueParadigm/ElysPerceptionPlugin/tree/main/Documentation/../Documentation/AdvancedCustomization.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Pipeline-Architecture","permalink":"/docs/ElysPerceptionPlugin/docs/Pipeline-Architecture"},"next":{"title":"Examples","permalink":"/docs/ElysPerceptionPlugin/docs/Examples"}}');var l=r(4848),t=r(8453);const s={},c="Advanced Customization Guide",o={},a=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Overview",id:"overview",level:2},{value:"When to Customize",id:"when-to-customize",level:3},{value:"Extension Points",id:"extension-points",level:3},{value:"Implementation Options",id:"implementation-options",level:3},{value:"Creating Custom Samplers",id:"creating-custom-samplers",level:2},{value:"Purpose",id:"purpose",level:3},{value:"Interface",id:"interface",level:3},{value:"C++ Example: Line Trace Sampler",id:"c-example-line-trace-sampler",level:3},{value:"Blueprint Example: Nearby Actors Sampler",id:"blueprint-example-nearby-actors-sampler",level:3},{value:"Creating Custom Filters",id:"creating-custom-filters",level:2},{value:"Purpose",id:"purpose-1",level:3},{value:"Interface",id:"interface-1",level:3},{value:"C++ Example: Line of Sight Filter",id:"c-example-line-of-sight-filter",level:3},{value:"Blueprint Example: Alive Filter",id:"blueprint-example-alive-filter",level:3},{value:"Creating Custom Scorers",id:"creating-custom-scorers",level:2},{value:"Purpose",id:"purpose-2",level:3},{value:"Interface",id:"interface-2",level:3},{value:"C++ Example: Health Priority Scorer",id:"c-example-health-priority-scorer",level:3},{value:"Blueprint Example: Threat Level Scorer",id:"blueprint-example-threat-level-scorer",level:3},{value:"Creating Custom Aggregators",id:"creating-custom-aggregators",level:2},{value:"Purpose",id:"purpose-3",level:3},{value:"Interface",id:"interface-3",level:3},{value:"C++ Example: Weighted Aggregator",id:"c-example-weighted-aggregator",level:3},{value:"Blueprint Example: Max Aggregator",id:"blueprint-example-max-aggregator",level:3},{value:"Creating Custom Resolvers",id:"creating-custom-resolvers",level:2},{value:"Purpose",id:"purpose-4",level:3},{value:"Interface",id:"interface-4",level:3},{value:"C++ Example: Threshold Resolver",id:"c-example-threshold-resolver",level:3},{value:"Blueprint vs C++",id:"blueprint-vs-c",level:2},{value:"Blueprint Custom Components",id:"blueprint-custom-components",level:3},{value:"C++ Custom Components",id:"c-custom-components",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Performance",id:"performance",level:3},{value:"Architecture",id:"architecture",level:3},{value:"Debugging",id:"debugging",level:3},{value:"Design",id:"design",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"advanced-customization-guide",children:"Advanced Customization Guide"})}),"\n",(0,l.jsx)(n.p,{children:"This guide covers creating custom pipeline components and extending the ElysPerceptionPlugin for advanced use cases."}),"\n",(0,l.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#overview",children:"Overview"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#creating-custom-samplers",children:"Creating Custom Samplers"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#creating-custom-filters",children:"Creating Custom Filters"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#creating-custom-scorers",children:"Creating Custom Scorers"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#creating-custom-aggregators",children:"Creating Custom Aggregators"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#creating-custom-resolvers",children:"Creating Custom Resolvers"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#blueprint-vs-c",children:"Blueprint vs C++"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#best-practices",children:"Best Practices"})}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.h3,{id:"when-to-customize",children:"When to Customize"}),"\n",(0,l.jsx)(n.p,{children:"Create custom components when:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Default components don't fit your needs"}),"\n",(0,l.jsx)(n.li,{children:"You need game-specific logic (health priority, threat levels)"}),"\n",(0,l.jsx)(n.li,{children:"You want special filtering (line of sight, visibility)"}),"\n",(0,l.jsx)(n.li,{children:"You need unique scoring (custom gameplay metrics)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"extension-points",children:"Extension Points"}),"\n",(0,l.jsx)(n.p,{children:"The plugin provides interfaces for each pipeline stage:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"IERPSampler"})," - Custom candidate gathering"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"IERPFilter"})," - Custom filtering logic"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"IERPScorer"})," - Custom scoring logic"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"IERPAggregator"})," - Custom score combination"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"IERPResolver"})," - Custom winner selection"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"implementation-options",children:"Implementation Options"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Blueprint"}),(0,l.jsx)(n.th,{children:"C++"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Quick prototyping"}),(0,l.jsx)(n.td,{children:"Best performance"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Designer-friendly"}),(0,l.jsx)(n.td,{children:"Type safety"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"No compilation"}),(0,l.jsx)(n.td,{children:"Full engine access"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Limited debugging"}),(0,l.jsx)(n.td,{children:"Advanced debugging"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:"Choose based on:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Blueprint"}),": Simple logic, rapid iteration, designer-owned"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"C++"}),": Complex logic, performance-critical, programmer-owned"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"creating-custom-samplers",children:"Creating Custom Samplers"}),"\n",(0,l.jsx)(n.h3,{id:"purpose",children:"Purpose"}),"\n",(0,l.jsx)(n.p,{children:"Samplers gather potential candidates from the world. Customize when you need:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Different spatial queries (raycast, box overlap, etc.)"}),"\n",(0,l.jsx)(n.li,{children:"Non-spatial queries (GameState actor lists, etc.)"}),"\n",(0,l.jsx)(n.li,{children:"Cached/optimized candidate lists"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"interface",children:"Interface"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'UINTERFACE(BlueprintType)\nclass UERPSampler : public UInterface\n{\n    GENERATED_BODY()\n};\n\nclass IERPSampler\n{\n    GENERATED_BODY()\n\npublic:\n    UFUNCTION(BlueprintNativeEvent, Category = "ElysPerception|Pipeline")\n    void Sample(const FERPPerceptionContext& Context, float Range, TArray<AActor*>& OutCandidates) const;\n};\n'})}),"\n",(0,l.jsx)(n.h3,{id:"c-example-line-trace-sampler",children:"C++ Example: Line Trace Sampler"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPLineTraceSampler.h:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#pragma once\n\n#include "CoreMinimal.h"\n#include "UObject/NoExportTypes.h"\n#include "Interfaces/ERPSampler.h"\n#include "ERPLineTraceSampler.generated.h"\n\nUCLASS(Blueprintable, EditInlineNew)\nclass ELYSPERCEPTIONPLUGIN_API UERPLineTraceSampler : public UObject, public IERPSampler\n{\n    GENERATED_BODY()\n\npublic:\n    virtual void Sample_Implementation(\n        const FERPPerceptionContext& Context,\n        float Range,\n        TArray<AActor*>& OutCandidates) const override;\n\n    UPROPERTY(EditAnywhere, Category = "Sampling")\n    TEnumAsByte<ECollisionChannel> TraceChannel = ECC_Visibility;\n    \n    UPROPERTY(EditAnywhere, Category = "Sampling")\n    bool bTraceComplex = false;\n};\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPLineTraceSampler.cpp:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#include "ERPLineTraceSampler.h"\n#include "Engine/World.h"\n\nvoid UERPLineTraceSampler::Sample_Implementation(\n    const FERPPerceptionContext& Context,\n    float Range,\n    TArray<AActor*>& OutCandidates) const\n{\n    OutCandidates.Empty();\n    \n    if (!Context.ContextActor)\n        return;\n    \n    UWorld* World = Context.ContextActor->GetWorld();\n    if (!World)\n        return;\n    \n    // Line trace in forward direction\n    FVector Start = Context.Origin;\n    FVector End = Context.Origin + Context.Forward * Range;\n    \n    FCollisionQueryParams QueryParams;\n    QueryParams.bTraceComplex = bTraceComplex;\n    QueryParams.AddIgnoredActor(Context.ContextActor);\n    \n    FHitResult HitResult;\n    if (World->LineTraceSingleByChannel(HitResult, Start, End, TraceChannel, QueryParams))\n    {\n        if (HitResult.GetActor())\n        {\n            OutCandidates.Add(HitResult.GetActor());\n        }\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"blueprint-example-nearby-actors-sampler",children:"Blueprint Example: Nearby Actors Sampler"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Create Blueprint class:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Content Browser \u2192 Right-click \u2192 Blueprint Class"}),"\n",(0,l.jsx)(n.li,{children:'Pick "Object" as parent class'}),"\n",(0,l.jsxs)(n.li,{children:["Name: ",(0,l.jsx)(n.code,{children:"BP_NearbyActorsSampler"})]}),"\n",(0,l.jsxs)(n.li,{children:["Class Settings \u2192 Interfaces \u2192 Add ",(0,l.jsx)(n.code,{children:"ERPSampler"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Implement Sample:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-blueprint",children:"Function: Sample (Context, Range, OutCandidates)\n  \u2192 Get All Actors of Class: YourActorClass\n  \u2192 For Each Actor:\n    \u2192 Get Distance (Context.Origin to Actor)\n    \u2192 Branch: Distance < Range\n      True: \u2192 Add to OutCandidates\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"creating-custom-filters",children:"Creating Custom Filters"}),"\n",(0,l.jsx)(n.h3,{id:"purpose-1",children:"Purpose"}),"\n",(0,l.jsx)(n.p,{children:"Filters reject invalid candidates. Customize when you need:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Line of sight checks"}),"\n",(0,l.jsx)(n.li,{children:"State validation (alive, active, etc.)"}),"\n",(0,l.jsx)(n.li,{children:"Permission checks"}),"\n",(0,l.jsx)(n.li,{children:"Distance/angle filtering"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"interface-1",children:"Interface"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'UINTERFACE(BlueprintType)\nclass UERPFilter : public UInterface\n{\n    GENERATED_BODY()\n};\n\nclass IERPFilter\n{\n    GENERATED_BODY()\n\npublic:\n    UFUNCTION(BlueprintNativeEvent, Category = "ElysPerception|Pipeline")\n    bool Passes(const FERPPerceptionContext& Context, AActor* Candidate) const;\n};\n'})}),"\n",(0,l.jsx)(n.h3,{id:"c-example-line-of-sight-filter",children:"C++ Example: Line of Sight Filter"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPLineOfSightFilter.h:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#pragma once\n\n#include "CoreMinimal.h"\n#include "UObject/NoExportTypes.h"\n#include "Interfaces/ERPFilter.h"\n#include "ERPLineOfSightFilter.generated.h"\n\nUCLASS(Blueprintable, EditInlineNew)\nclass ELYSPERCEPTIONPLUGIN_API UERPLineOfSightFilter : public UObject, public IERPFilter\n{\n    GENERATED_BODY()\n\npublic:\n    virtual bool Passes_Implementation(\n        const FERPPerceptionContext& Context,\n        AActor* Candidate) const override;\n\n    UPROPERTY(EditAnywhere, Category = "Filter")\n    TEnumAsByte<ECollisionChannel> TraceChannel = ECC_Visibility;\n    \n    UPROPERTY(EditAnywhere, Category = "Filter")\n    bool bRequireFullyVisible = true;\n};\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPLineOfSightFilter.cpp:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#include "ERPLineOfSightFilter.h"\n#include "Engine/World.h"\n\nbool UERPLineOfSightFilter::Passes_Implementation(\n    const FERPPerceptionContext& Context,\n    AActor* Candidate) const\n{\n    if (!Context.ContextActor || !Candidate)\n        return false;\n    \n    UWorld* World = Context.ContextActor->GetWorld();\n    if (!World)\n        return false;\n    \n    FVector Start = Context.Origin;\n    FVector End = Candidate->GetActorLocation();\n    \n    FCollisionQueryParams QueryParams;\n    QueryParams.AddIgnoredActor(Context.ContextActor);\n    QueryParams.AddIgnoredActor(Candidate);\n    \n    FHitResult HitResult;\n    bool bHit = World->LineTraceSingleByChannel(\n        HitResult,\n        Start,\n        End,\n        TraceChannel,\n        QueryParams\n    );\n    \n    // Pass if no hit (clear line of sight)\n    return !bHit;\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"blueprint-example-alive-filter",children:"Blueprint Example: Alive Filter"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-blueprint",children:"// BP_AliveFilter (implements IERPFilter)\n\nFunction: Passes (Context, Candidate)\n  \u2192 Cast Candidate to Character\n  \u2192 Branch: Cast Succeeded\n    True:\n      \u2192 Get Health (Character)\n      \u2192 Return: Health > 0\n    False:\n      \u2192 Return: True  // Not a character, pass through\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"creating-custom-scorers",children:"Creating Custom Scorers"}),"\n",(0,l.jsx)(n.h3,{id:"purpose-2",children:"Purpose"}),"\n",(0,l.jsx)(n.p,{children:"Scorers assign numerical values to candidates. Customize when you need:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Game-specific metrics (health, threat, value)"}),"\n",(0,l.jsx)(n.li,{children:"Complex spatial scoring"}),"\n",(0,l.jsx)(n.li,{children:"Weighted factors"}),"\n",(0,l.jsx)(n.li,{children:"Dynamic priorities"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"interface-2",children:"Interface"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'UINTERFACE(BlueprintType)\nclass UERPScorer : public UInterface\n{\n    GENERATED_BODY()\n};\n\nclass IERPScorer\n{\n    GENERATED_BODY()\n\npublic:\n    UFUNCTION(BlueprintNativeEvent, Category = "ElysPerception|Pipeline")\n    float Score(const FERPPerceptionContext& Context, AActor* Candidate) const;\n};\n'})}),"\n",(0,l.jsx)(n.h3,{id:"c-example-health-priority-scorer",children:"C++ Example: Health Priority Scorer"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPHealthScorer.h:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#pragma once\n\n#include "CoreMinimal.h"\n#include "UObject/NoExportTypes.h"\n#include "Interfaces/ERPScorer.h"\n#include "ERPHealthScorer.generated.h"\n\n// Custom interface for actors with health\nUINTERFACE(MinimalAPI, Blueprintable)\nclass UHealthComponent : public UInterface\n{\n    GENERATED_BODY()\n};\n\nclass IHealthComponent\n{\n    GENERATED_BODY()\n\npublic:\n    UFUNCTION(BlueprintNativeEvent, Category = "Health")\n    float GetHealthPercent() const;\n};\n\nUCLASS(Blueprintable, EditInlineNew)\nclass ELYSPERCEPTIONPLUGIN_API UERPHealthScorer : public UObject, public IERPScorer\n{\n    GENERATED_BODY()\n\npublic:\n    virtual float Score_Implementation(\n        const FERPPerceptionContext& Context,\n        AActor* Candidate) const override;\n\n    // Lower health = lower score (better)\n    UPROPERTY(EditAnywhere, Category = "Scoring")\n    bool bPrioritizeLowHealth = true;\n};\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPHealthScorer.cpp:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#include "ERPHealthScorer.h"\n\nfloat UERPHealthScorer::Score_Implementation(\n    const FERPPerceptionContext& Context,\n    AActor* Candidate) const\n{\n    if (!Candidate || !Candidate->Implements<UHealthComponent>())\n        return 1.0f;  // Neutral score\n    \n    float HealthPercent = IHealthComponent::Execute_GetHealthPercent(Candidate);\n    \n    if (bPrioritizeLowHealth)\n    {\n        // Lower health = lower score (better)\n        return HealthPercent;  // 0.0 (low health) to 1.0 (full health)\n    }\n    else\n    {\n        // Higher health = lower score (better)\n        return 1.0f - HealthPercent;\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"blueprint-example-threat-level-scorer",children:"Blueprint Example: Threat Level Scorer"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-blueprint",children:"// BP_ThreatScorer (implements IERPScorer)\n\nFunction: Score (Context, Candidate)\n  \u2192 Cast Candidate to Enemy\n  \u2192 Branch: Cast Succeeded\n    True:\n      \u2192 Get Threat Level (Enemy)  // Returns 1-10\n      \u2192 Divide by 10  // Normalize to 0.0-1.0\n      \u2192 Return (1.0 - normalized)  // Invert: high threat = low score\n    False:\n      \u2192 Return: 1.0  // Neutral score\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"creating-custom-aggregators",children:"Creating Custom Aggregators"}),"\n",(0,l.jsx)(n.h3,{id:"purpose-3",children:"Purpose"}),"\n",(0,l.jsx)(n.p,{children:"Aggregators combine multiple scores into one. Customize when you need:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Weighted averaging"}),"\n",(0,l.jsx)(n.li,{children:"Min/max selection"}),"\n",(0,l.jsx)(n.li,{children:"Complex score formulas"}),"\n",(0,l.jsx)(n.li,{children:"Conditional combination"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"interface-3",children:"Interface"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'UINTERFACE(BlueprintType)\nclass UERPAggregator : public UInterface\n{\n    GENERATED_BODY()\n};\n\nclass IERPAggregator\n{\n    GENERATED_BODY()\n\npublic:\n    UFUNCTION(BlueprintNativeEvent, Category = "ElysPerception|Pipeline")\n    float Aggregate(const TArray<float>& Scores) const;\n};\n'})}),"\n",(0,l.jsx)(n.h3,{id:"c-example-weighted-aggregator",children:"C++ Example: Weighted Aggregator"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPWeightedAggregator.h:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#pragma once\n\n#include "CoreMinimal.h"\n#include "UObject/NoExportTypes.h"\n#include "Interfaces/ERPAggregator.h"\n#include "ERPWeightedAggregator.generated.h"\n\nUCLASS(Blueprintable, EditInlineNew)\nclass ELYSPERCEPTIONPLUGIN_API UERPWeightedAggregator : public UObject, public IERPAggregator\n{\n    GENERATED_BODY()\n\npublic:\n    virtual float Aggregate_Implementation(const TArray<float>& Scores) const override;\n\n    // Weights for each scorer (must match scorer count)\n    UPROPERTY(EditAnywhere, Category = "Aggregation")\n    TArray<float> Weights;\n};\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPWeightedAggregator.cpp:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#include "ERPWeightedAggregator.h"\n\nfloat UERPWeightedAggregator::Aggregate_Implementation(const TArray<float>& Scores) const\n{\n    if (Scores.Num() == 0)\n        return 0.0f;\n    \n    float WeightedSum = 0.0f;\n    float TotalWeight = 0.0f;\n    \n    for (int32 i = 0; i < Scores.Num(); ++i)\n    {\n        float Weight = (i < Weights.Num()) ? Weights[i] : 1.0f;\n        WeightedSum += Scores[i] * Weight;\n        TotalWeight += Weight;\n    }\n    \n    return (TotalWeight > 0.0f) ? (WeightedSum / TotalWeight) : 0.0f;\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"blueprint-example-max-aggregator",children:"Blueprint Example: Max Aggregator"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-blueprint",children:"// BP_MaxAggregator (implements IERPAggregator)\n\nFunction: Aggregate (Scores)\n  \u2192 Set Max = 0.0\n  \u2192 For Each Score in Scores:\n    \u2192 Branch: Score > Max\n      True: \u2192 Set Max = Score\n  \u2192 Return: Max\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"creating-custom-resolvers",children:"Creating Custom Resolvers"}),"\n",(0,l.jsx)(n.h3,{id:"purpose-4",children:"Purpose"}),"\n",(0,l.jsx)(n.p,{children:"Resolvers select the winning candidate. Customize when you need:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Random selection"}),"\n",(0,l.jsx)(n.li,{children:"Closest to target value"}),"\n",(0,l.jsx)(n.li,{children:"Threshold-based selection"}),"\n",(0,l.jsx)(n.li,{children:"Hysteresis (sticky targets)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"interface-4",children:"Interface"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'UINTERFACE(BlueprintType)\nclass UERPResolver : public UInterface\n{\n    GENERATED_BODY()\n};\n\nclass IERPResolver\n{\n    GENERATED_BODY()\n\npublic:\n    UFUNCTION(BlueprintNativeEvent, Category = "ElysPerception|Pipeline")\n    bool Resolve(\n        const TArray<FERPPipelineScoredCandidate>& ScoredCandidates,\n        FERPPipelineScoredCandidate& OutBest) const;\n};\n'})}),"\n",(0,l.jsx)(n.h3,{id:"c-example-threshold-resolver",children:"C++ Example: Threshold Resolver"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPThresholdResolver.h:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#pragma once\n\n#include "CoreMinimal.h"\n#include "UObject/NoExportTypes.h"\n#include "Interfaces/ERPResolver.h"\n#include "Pipeline/ERPPipelineTypes.h"\n#include "ERPThresholdResolver.generated.h"\n\nUCLASS(Blueprintable, EditInlineNew)\nclass ELYSPERCEPTIONPLUGIN_API UERPThresholdResolver : public UObject, public IERPResolver\n{\n    GENERATED_BODY()\n\npublic:\n    virtual bool Resolve_Implementation(\n        const TArray<FERPPipelineScoredCandidate>& ScoredCandidates,\n        FERPPipelineScoredCandidate& OutBest) const override;\n\n    // Only select if score is below this threshold\n    UPROPERTY(EditAnywhere, Category = "Resolution")\n    float ScoreThreshold = 0.5f;\n    \n    // If true, select lowest; if false, select highest\n    UPROPERTY(EditAnywhere, Category = "Resolution")\n    bool bSelectLowest = true;\n};\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"ERPThresholdResolver.cpp:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'#include "ERPThresholdResolver.h"\n\nbool UERPThresholdResolver::Resolve_Implementation(\n    const TArray<FERPPipelineScoredCandidate>& ScoredCandidates,\n    FERPPipelineScoredCandidate& OutBest) const\n{\n    if (ScoredCandidates.Num() == 0)\n        return false;\n    \n    bool bFoundValid = false;\n    float BestScore = bSelectLowest ? FLT_MAX : -FLT_MAX;\n    \n    for (const FERPPipelineScoredCandidate& Scored : ScoredCandidates)\n    {\n        // Check threshold\n        if (bSelectLowest && Scored.FinalScore >= ScoreThreshold)\n            continue;\n        if (!bSelectLowest && Scored.FinalScore <= ScoreThreshold)\n            continue;\n        \n        // Check if better\n        bool bIsBetter = bSelectLowest\n            ? (Scored.FinalScore < BestScore)\n            : (Scored.FinalScore > BestScore);\n        \n        if (!bFoundValid || bIsBetter)\n        {\n            OutBest = Scored;\n            BestScore = Scored.FinalScore;\n            bFoundValid = true;\n        }\n    }\n    \n    return bFoundValid;\n}\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"blueprint-vs-c",children:"Blueprint vs C++"}),"\n",(0,l.jsx)(n.h3,{id:"blueprint-custom-components",children:"Blueprint Custom Components"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Pros:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u2705 Fast prototyping"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 No compilation needed"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Designer-friendly"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Visual debugging"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cons:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u274c Slower performance"}),"\n",(0,l.jsx)(n.li,{children:"\u274c Limited debugging"}),"\n",(0,l.jsx)(n.li,{children:"\u274c No compile-time safety"}),"\n",(0,l.jsx)(n.li,{children:"\u274c Can't access all engine APIs"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Best for:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Simple logic"}),"\n",(0,l.jsx)(n.li,{children:"Rapid iteration"}),"\n",(0,l.jsx)(n.li,{children:"Designer-owned components"}),"\n",(0,l.jsx)(n.li,{children:"Prototypes"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"c-custom-components",children:"C++ Custom Components"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Pros:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u2705 Best performance"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Full engine access"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Type safety"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Advanced debugging"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Code reuse"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cons:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u274c Requires compilation"}),"\n",(0,l.jsx)(n.li,{children:"\u274c Programmer-only"}),"\n",(0,l.jsx)(n.li,{children:"\u274c Slower iteration"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Best for:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Performance-critical code"}),"\n",(0,l.jsx)(n.li,{children:"Complex logic"}),"\n",(0,l.jsx)(n.li,{children:"Production code"}),"\n",(0,l.jsx)(n.li,{children:"Reusable libraries"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsx)(n.h3,{id:"performance",children:"Performance"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Normalize scores to 0.0-1.0 range"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Early-reject in filters"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Cache expensive calculations"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Use const references"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Perform expensive operations in scorers"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Allocate memory in hot paths"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Use complex BP loops"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"architecture",children:"Architecture"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Keep components stateless"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Use context data"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Return neutral values on error"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Validate inputs"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Store state between ticks"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Modify candidates"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Access external systems"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"debugging",children:"Debugging"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Log meaningful information"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Add debug visualization"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Test in isolation"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Document assumptions"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Leave debug spam"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Skip edge case testing"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"design",children:"Design"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Single responsibility per component"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Make components reusable"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Expose configuration options"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do"}),": Provide sensible defaults"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Couple to specific actors"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Hardcode values"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't"}),": Mix concerns"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"/docs/ElysPerceptionPlugin/docs/Examples",children:"Examples"})})," - See practical examples of custom components"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"/docs/ElysPerceptionPlugin/docs/API-Reference",children:"API Reference"})})," - Complete API documentation"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"/docs/ElysPerceptionPlugin/docs/SamplingPipeline",children:"Sampling Pipeline"})})," - Understanding the execution flow"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Previous:"})," ",(0,l.jsx)(n.a,{href:"/docs/ElysPerceptionPlugin/docs/Pipeline-Architecture",children:"Pipeline Architecture"})," | ",(0,l.jsx)(n.strong,{children:"Next:"})," ",(0,l.jsx)(n.a,{href:"/docs/ElysPerceptionPlugin/docs/Examples",children:"Examples"})," | ",(0,l.jsx)(n.a,{href:"/docs/ElysPerceptionPlugin/docs/",children:"Documentation Home"})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>s,x:()=>c});var i=r(6540);const l={},t=i.createContext(l);function s(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);