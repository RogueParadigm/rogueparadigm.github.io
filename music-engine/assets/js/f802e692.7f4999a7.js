"use strict";(globalThis.webpackChunkelysmusicengine_docs=globalThis.webpackChunkelysmusicengine_docs||[]).push([[423],{1866(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"advanced","title":"Advanced Features","description":"MetaSound integration, Quartz beat synchronization, and GameplayTag-driven music.","source":"@site/../Documentation/Advanced.md","sourceDirName":".","slug":"/advanced","permalink":"/ElysMusicEngine/advanced","draft":false,"unlisted":false,"editUrl":"https://github.com/RogueParadigm/ElysMusicEngine/tree/main/Documentation/../Documentation/Advanced.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"advanced","title":"Advanced Features","sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"User Guide","permalink":"/ElysMusicEngine/user-guide"},"next":{"title":"Using from C++","permalink":"/ElysMusicEngine/cpp-usage"}}');var s=r(4848),i=r(8453);const a={id:"advanced",title:"Advanced Features",sidebar_position:4},l="Advanced Features",d={},o=[{value:"MetaSound Integration",id:"metasound-integration",level:2},{value:"Setup",id:"setup",level:3},{value:"Real-Time Parameters",id:"real-time-parameters",level:3},{value:"Common Parameter Patterns",id:"common-parameter-patterns",level:3},{value:"Intro \u2192 Loop Pattern",id:"intro--loop-pattern",level:3},{value:"Stem Mixing",id:"stem-mixing",level:3},{value:"Quartz Beat Synchronization",id:"quartz-beat-synchronization",level:2},{value:"How It Works",id:"how-it-works",level:3},{value:"Quantized Transitions",id:"quantized-transitions",level:3},{value:"Quantization Options",id:"quantization-options",level:3},{value:"Clock Control",id:"clock-control",level:3},{value:"Beat Events",id:"beat-events",level:3},{value:"Rhythm Gameplay Example",id:"rhythm-gameplay-example",level:3},{value:"GameplayTag Integration",id:"gameplaytag-integration",level:2},{value:"Setup: Tag Registry",id:"setup-tag-registry",level:3},{value:"Load the Registry",id:"load-the-registry",level:3},{value:"Push/Pop by Tag",id:"pushpop-by-tag",level:3},{value:"Smart Parent Fallback",id:"smart-parent-fallback",level:3},{value:"GAS Integration Example",id:"gas-integration-example",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"advanced-features",children:"Advanced Features"})}),"\n",(0,s.jsx)(n.p,{children:"MetaSound integration, Quartz beat synchronization, and GameplayTag-driven music."}),"\n",(0,s.jsxs)(n.p,{children:["NOTE: Prerequisites\r\nRead the ",(0,s.jsx)(n.a,{href:"/ElysMusicEngine/user-guide",children:"User Guide"})," first \u2014 you should be comfortable with layers, priorities, and modes."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"metasound-integration",children:"MetaSound Integration"}),"\n",(0,s.jsxs)(n.p,{children:["MetaSounds unlock advanced audio: intro\u2192loop patterns, dynamic parameters, and stem mixing. ElysMusicEngine supports them natively \u2014 ",(0,s.jsx)(n.code,{children:"UMetaSoundSource"})," inherits from ",(0,s.jsx)(n.code,{children:"USoundBase"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"setup",children:"Setup"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Content Browser"})," \u2192 Right-click \u2192 ",(0,s.jsx)(n.strong,{children:"Sounds \u2192 MetaSound Source"})]}),"\n",(0,s.jsxs)(n.li,{children:["Name it (e.g., ",(0,s.jsx)(n.code,{children:"MSS_CombatMusic"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"Build your audio graph"}),"\n",(0,s.jsx)(n.li,{children:"Push it like any other sound:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-blueprint",children:"Push Music Layer\r\n  \u251c\u2500 Music: MSS_CombatMusic  // MetaSound works!\r\n  \u2514\u2500 ...other settings\n"})}),"\n",(0,s.jsx)(n.h3,{id:"real-time-parameters",children:"Real-Time Parameters"}),"\n",(0,s.jsx)(n.p,{children:"Control MetaSound parameters from Blueprint while music plays:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-blueprint",children:'// Float parameter (e.g., intensity based on health)\r\nSet MetaSound Parameter\r\n  \u251c\u2500 Layer Name: "Combat"\r\n  \u251c\u2500 Parameter: "Intensity"\r\n  \u2514\u2500 Value: 0.8\r\n\r\n// Bool parameter (e.g., toggle phase)\r\nSet MetaSound Bool\r\n  \u251c\u2500 Layer Name: "BossFight"\r\n  \u251c\u2500 Parameter: "IsPhase2"\r\n  \u2514\u2500 Value: true\r\n\r\n// Trigger (e.g., force transition)\r\nTrigger MetaSound Event\r\n  \u251c\u2500 Layer Name: "BossFight"\r\n  \u2514\u2500 Trigger: "TransitionNow"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"common-parameter-patterns",children:"Common Parameter Patterns"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Use for"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Float"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"Intensity"})," (0-1)"]}),(0,s.jsx)(n.td,{children:"Mix between calm/intense stems"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Float"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FilterCutoff"})}),(0,s.jsx)(n.td,{children:"Dynamic EQ"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Bool"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"IsPhase2"})}),(0,s.jsx)(n.td,{children:"Toggle boss phase"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Bool"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"PlayerLowHealth"})}),(0,s.jsx)(n.td,{children:"Trigger danger layer"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Trigger"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Hit"})}),(0,s.jsx)(n.td,{children:"One-shot stinger in MetaSound"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Trigger"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Victory"})}),(0,s.jsx)(n.td,{children:"Victory flourish"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"intro--loop-pattern",children:"Intro \u2192 Loop Pattern"}),"\n",(0,s.jsx)(n.p,{children:"Build a MetaSound that plays an intro once, then loops:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'MetaSound Graph:\r\n  [Wave Player: "Intro" (Play Once)]\r\n    \u2192 [On Finished] \u2192 Trigger\r\n    \u2192 [Wave Player: "Loop" (Looping)]\r\n    \u2192 [Output]\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Push with ",(0,s.jsx)(n.code,{children:"FadeIn: 0.0"})," \u2014 the intro handles the transition."]}),"\n",(0,s.jsx)(n.h3,{id:"stem-mixing",children:"Stem Mixing"}),"\n",(0,s.jsx)(n.p,{children:"Use Float parameters to mix multiple stems dynamically (like Hi-Fi Rush):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-blueprint",children:'// Drums always at 100%\r\nSet MetaSound Parameter ("Music", "Drums", 1.0)\r\n\r\n// Bass fades in during combat\r\nSet MetaSound Parameter ("Music", "Bass", 0.8)\r\n\r\n// Melody only during boss phase\r\nSet MetaSound Parameter ("Music", "Melody", IsPhase2 ? 1.0 : 0.0)\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"quartz-beat-synchronization",children:"Quartz Beat Synchronization"}),"\n",(0,s.jsxs)(n.p,{children:["Quartz is UE5's sample-accurate timing system. It ensures music transitions happen ",(0,s.jsx)(n.strong,{children:"exactly on beat"})," \u2014 no more awkward cuts mid-measure."]}),"\n",(0,s.jsx)(n.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Without Quartz:  [CUT] \u2192 [START]   Awkward\r\nWith Quartz:     \u266a \u266a \u266a \u266a | \u2192 | \u266a \u266a \u266a \u266a   On beat (aligned)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The clock is ",(0,s.jsx)(n.strong,{children:"auto-created"})," at 120 BPM, 4/4 time. No setup needed."]}),"\n",(0,s.jsx)(n.h3,{id:"quantized-transitions",children:"Quantized Transitions"}),"\n",(0,s.jsxs)(n.p,{children:["Replace ",(0,s.jsx)(n.code,{children:"Push Music Layer"})," with the quantized version:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-blueprint",children:'// Immediate (old way)\r\nPush Music Layer\r\n  \u2514\u2500 Layer: "Combat"\r\n\r\n// Beat-synced (new way)\r\nPush Music Layer Quantized\r\n  \u251c\u2500 Layer: "Combat"\r\n  \u251c\u2500 Priority: 10\r\n  \u2514\u2500 Quantization: Bar   // Wait for next bar\r\n\r\nPop Music Layer Quantized\r\n  \u251c\u2500 Layer: "Combat"\r\n  \u2514\u2500 Quantization: Bar\n'})}),"\n",(0,s.jsx)(n.h3,{id:"quantization-options",children:"Quantization Options"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Waits for"}),(0,s.jsx)(n.th,{children:"Best for"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"None"})}),(0,s.jsx)(n.td,{children:"Nothing (immediate)"}),(0,s.jsx)(n.td,{children:"Sound effects"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Beat"})}),(0,s.jsx)(n.td,{children:"Next beat (1/4 note)"}),(0,s.jsx)(n.td,{children:"Quick transitions"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"HalfBar"})}),(0,s.jsx)(n.td,{children:"Next half bar (2 beats)"}),(0,s.jsx)(n.td,{children:"Medium transitions"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Bar"})}),(0,s.jsx)(n.td,{children:"Next full bar (4 beats)"}),(0,s.jsx)(n.td,{children:"Music changes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"TwoBars"})}),(0,s.jsx)(n.td,{children:"2 full bars (8 beats)"}),(0,s.jsx)(n.td,{children:"Dramatic moments"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"clock-control",children:"Clock Control"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-blueprint",children:"// Change tempo\r\nSet Music BPM (140.0)\r\n\r\n// Change time signature\r\nInitialize Quartz Clock\r\n  \u251c\u2500 BPM: 120\r\n  \u2514\u2500 Beats Per Bar: 3   // 3/4 waltz time\n"})}),"\n",(0,s.jsx)(n.h3,{id:"beat-events",children:"Beat Events"}),"\n",(0,s.jsx)(n.p,{children:"React to beats in gameplay \u2014 VFX pulses, UI flashes, rhythm mechanics:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-blueprint",children:"// Bind to beat event\r\nBind Event to On Beat\r\n  \u2193\r\nOn Beat (BeatIndex, BarIndex, BPM)\r\n  \u2193\r\n// Flash screen on beat 1\r\nBranch (BeatIndex == 1)\r\n  \u2192 Spawn Flash VFX\n"})}),"\n",(0,s.jsx)(n.h3,{id:"rhythm-gameplay-example",children:"Rhythm Gameplay Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-blueprint",children:'// Player attacks \u2014 check if on beat\r\nEvent OnPlayerAttack\r\n  \u2193\r\nGet Time Until Next Beat\r\n  \u2193\r\nBranch (Time < 0.2 seconds)\r\n  \u251c\u2500 True \u2192 Damage \xd7 1.5 ("Perfect!")\r\n  \u2514\u2500 False \u2192 Normal damage\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"gameplaytag-integration",children:"GameplayTag Integration"}),"\n",(0,s.jsx)(n.p,{children:"Drive music with GameplayTags for clean, scalable systems \u2014 especially useful with GAS (Gameplay Ability System)."}),"\n",(0,s.jsx)(n.h3,{id:"setup-tag-registry",children:"Setup: Tag Registry"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Content Browser"})," \u2192 Right-click \u2192 ",(0,s.jsx)(n.strong,{children:"Data Asset"})," \u2192 ",(0,s.jsx)(n.code,{children:"ERP Layer Tag Registry"})]}),"\n",(0,s.jsxs)(n.li,{children:["Name it ",(0,s.jsx)(n.code,{children:"DA_LayerTagRegistry"})]}),"\n",(0,s.jsx)(n.li,{children:"Map tags to layers:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'Tag: "Music.Exploration"\r\n  \u2192 Music: Exploration_Theme\r\n  \u2192 Priority: 0\r\n  \u2192 Mode: Replace\r\n\r\nTag: "Music.Combat"\r\n  \u2192 Music: Combat_Theme\r\n  \u2192 Priority: 10\r\n  \u2192 Mode: Replace\r\n\r\nTag: "Music.Combat.Boss"\r\n  \u2192 Music: Boss_Theme\r\n  \u2192 Priority: 15\r\n  \u2192 Mode: Replace\n'})}),"\n",(0,s.jsx)(n.h3,{id:"load-the-registry",children:"Load the Registry"}),"\n",(0,s.jsxs)(n.p,{children:["Set the ",(0,s.jsx)(n.code,{children:"GlobalLayerTagRegistry"})," property on the subsystem, or load manually:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-blueprint",children:"Event BeginPlay\r\n  \u2193\r\nLoad Tag Registry\r\n  \u251c\u2500 Registry: DA_LayerTagRegistry\r\n  \u2514\u2500 Clear Existing: false\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pushpop-by-tag",children:"Push/Pop by Tag"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-blueprint",children:'// Start combat music\r\nPush Music Layer By Tag\r\n  \u2514\u2500 Tag: "Music.Combat"\r\n\r\n// End combat\r\nPop Music Layer By Tag\r\n  \u2514\u2500 Tag: "Music.Combat"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"smart-parent-fallback",children:"Smart Parent Fallback"}),"\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"Music.Combat.Boss.Phase2"})," isn't in the registry, the system automatically tries:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Music.Combat.Boss.Phase2"})," \u2190 not found"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Music.Combat.Boss"})," \u2190 not found"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Music.Combat"})," \u2190 ",(0,s.jsx)(n.strong,{children:"found! Uses this."})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This lets you define broad tags and override specific ones as needed."}),"\n",(0,s.jsx)(n.h3,{id:"gas-integration-example",children:"GAS Integration Example"}),"\n",(0,s.jsx)(n.p,{children:"In your Gameplay Ability:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-blueprint",children:'// Ability activates \u2192 push combat music\r\nEvent OnAbilityActivated\r\n  \u2193\r\nPush Music Layer By Tag ("Music.Combat")\r\n\r\n// Ability ends \u2192 pop\r\nEvent OnAbilityEnded\r\n  \u2193\r\nPop Music Layer By Tag ("Music.Combat")\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/ElysMusicEngine/API-Reference",children:"API Reference"})})," \u2014 All function signatures and parameters"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/ElysMusicEngine/troubleshooting",children:"Troubleshooting"})})," \u2014 Common issues and solutions"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,n,r){r.d(n,{R:()=>a,x:()=>l});var t=r(6540);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);