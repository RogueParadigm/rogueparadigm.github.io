"use strict";(globalThis.webpackChunkelysmusicengine_docs=globalThis.webpackChunkelysmusicengine_docs||[]).push([[1],{9192(e,s,n){n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>d,frontMatter:()=>t,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"cpp-usage","title":"Using from C++","description":"While the plugin is designed primarily for Blueprint usage, all functionality is fully accessible from C++. This guide shows how to integrate the music system into your C++ code.","source":"@site/../Documentation/CPlusPlus-Usage.md","sourceDirName":".","slug":"/cpp-usage","permalink":"/ElysMusicEngine/cpp-usage","draft":false,"unlisted":false,"editUrl":"https://github.com/RogueParadigm/ElysMusicEngine/tree/main/Documentation/../Documentation/CPlusPlus-Usage.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"cpp-usage","title":"Using from C++","sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"Advanced Features","permalink":"/ElysMusicEngine/advanced"},"next":{"title":"Multiplayer Guide","permalink":"/ElysMusicEngine/multiplayer"}}');var a=n(4848),i=n(8453);const t={id:"cpp-usage",title:"Using from C++",sidebar_position:6},c="Using ElysMusicEngine from C++",l={},u=[{value:"Project Setup",id:"project-setup",level:2},{value:"1. Add Module Dependency",id:"1-add-module-dependency",level:3},{value:"2. Include Headers",id:"2-include-headers",level:3},{value:"Accessing the Music Subsystem",id:"accessing-the-music-subsystem",level:2},{value:"Basic Layer Control",id:"basic-layer-control",level:2},{value:"Push a Music Layer",id:"push-a-music-layer",level:3},{value:"Pop a Music Layer",id:"pop-a-music-layer",level:3},{value:"Pop All Layers",id:"pop-all-layers",level:3},{value:"Music Presets",id:"music-presets",level:2},{value:"Push a Preset",id:"push-a-preset",level:3},{value:"Pop Preset",id:"pop-preset",level:3},{value:"GameplayTag-Based Control",id:"gameplaytag-based-control",level:2},{value:"Push Layer by Tag",id:"push-layer-by-tag",level:3},{value:"Pop Layer by Tag",id:"pop-layer-by-tag",level:3},{value:"Check if Layer is Active",id:"check-if-layer-is-active",level:3},{value:"Stingers (One-Shot Audio)",id:"stingers-one-shot-audio",level:2},{value:"Play a Stinger (Immediate)",id:"play-a-stinger-immediate",level:3},{value:"Play Quantized Stinger",id:"play-quantized-stinger",level:3},{value:"Play Stinger with Full Parameters",id:"play-stinger-with-full-parameters",level:3},{value:"Play Stinger at Location (3D Spatial Audio)",id:"play-stinger-at-location-3d-spatial-audio",level:3},{value:"Audio Ducking",id:"audio-ducking",level:2},{value:"Quartz Clock Synchronization",id:"quartz-clock-synchronization",level:2},{value:"Set BPM",id:"set-bpm",level:3},{value:"Trigger Event on Beat",id:"trigger-event-on-beat",level:3},{value:"Creating Custom Music State Interface",id:"creating-custom-music-state-interface",level:2},{value:"1. Implement the Interface",id:"1-implement-the-interface",level:3},{value:"2. Implement the Function",id:"2-implement-the-function",level:3},{value:"3. Update State Dynamically",id:"3-update-state-dynamically",level:3},{value:"Querying System State",id:"querying-system-state",level:2},{value:"Get Active Layers",id:"get-active-layers",level:3},{value:"Get Active Layer Count",id:"get-active-layer-count",level:3},{value:"Check if Specific Layer is Active",id:"check-if-specific-layer-is-active",level:3},{value:"Volume Control",id:"volume-control",level:2},{value:"Set Master Volume",id:"set-master-volume",level:3},{value:"Get Master Volume",id:"get-master-volume",level:3},{value:"Example: Complete Combat System Integration",id:"example-complete-combat-system-integration",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Multiplayer Considerations",id:"multiplayer-considerations",level:2},{value:"Further Reading",id:"further-reading",level:2}];function o(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"using-elysmusicengine-from-c",children:"Using ElysMusicEngine from C++"})}),"\n",(0,a.jsx)(s.p,{children:"While the plugin is designed primarily for Blueprint usage, all functionality is fully accessible from C++. This guide shows how to integrate the music system into your C++ code."}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"project-setup",children:"Project Setup"}),"\n",(0,a.jsx)(s.h3,{id:"1-add-module-dependency",children:"1. Add Module Dependency"}),"\n",(0,a.jsxs)(s.p,{children:["Edit your project's ",(0,a.jsx)(s.code,{children:"[YourProject].Build.cs"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-csharp",children:'PublicDependencyModuleNames.AddRange(new string[] \r\n{ \r\n    "Core", \r\n    "CoreUObject", \r\n    "Engine",\r\n    "ElysMusicEngine"  // Add this\r\n});\n'})}),"\n",(0,a.jsx)(s.h3,{id:"2-include-headers",children:"2. Include Headers"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'#include "ERP_MusicSubsystem.h"\r\n#include "ERP_MusicTypes.h"\r\n#include "ElysMusicEngineBPLibrary.h"  // Optional: For static helper functions\n'})}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"accessing-the-music-subsystem",children:"Accessing the Music Subsystem"}),"\n",(0,a.jsxs)(s.p,{children:["The music system is a ",(0,a.jsx)(s.code,{children:"UGameInstanceSubsystem"}),". Get it from any world context:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:"UERP_MusicSubsystem* MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n\r\nif (MusicSubsystem)\r\n{\r\n    // Use the subsystem\r\n}\n"})}),"\n",(0,a.jsx)(s.p,{children:"Or use the helper function:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:"UERP_MusicSubsystem* MusicSubsystem = UElysMusicEngineBPLibrary::GetMusicSubsystem(GetWorld());\n"})}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"basic-layer-control",children:"Basic Layer Control"}),"\n",(0,a.jsx)(s.h3,{id:"push-a-music-layer",children:"Push a Music Layer"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'void AMyGameMode::StartCombatMusic()\r\n{\r\n    UERP_MusicSubsystem* MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    \r\n    if (MusicSubsystem)\r\n    {\r\n        USoundBase* CombatMusic = LoadObject<USoundBase>(nullptr, TEXT("/Game/Audio/Music/Combat_Theme"));\r\n        \r\n        FERP_MusicLayer Layer;\r\n        Layer.LayerName = "Combat";\r\n        Layer.Sound = CombatMusic;\r\n        Layer.Priority = 50;\r\n        Layer.LayerMode = EERP_MusicLayerMode::Replace;\r\n        Layer.VolumeMultiplier = 1.0f;\r\n        Layer.FadeInTime = 2.0f;\r\n        Layer.FadeOutTime = 1.0f;\r\n        Layer.bLooping = true;\r\n        Layer.bPersistAcrossLevels = false;\r\n        \r\n        MusicSubsystem->PushMusicLayer(Layer);\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(s.h3,{id:"pop-a-music-layer",children:"Pop a Music Layer"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'void AMyGameMode::StopCombatMusic()\r\n{\r\n    UERP_MusicSubsystem* MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    \r\n    if (MusicSubsystem)\r\n    {\r\n        MusicSubsystem->PopMusicLayer(FName("Combat"));\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(s.h3,{id:"pop-all-layers",children:"Pop All Layers"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:"MusicSubsystem->PopAllMusicLayers();\n"})}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"music-presets",children:"Music Presets"}),"\n",(0,a.jsx)(s.h3,{id:"push-a-preset",children:"Push a Preset"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'void AMyLevel::StartAmbientMusic()\r\n{\r\n    UERP_MusicSubsystem* MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    \r\n    if (MusicSubsystem)\r\n    {\r\n        FGameplayTag PresetTag = FGameplayTag::RequestGameplayTag(FName("Music.Preset.Forest"));\r\n        MusicSubsystem->PushMusicPreset(PresetTag);\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(s.h3,{id:"pop-preset",children:"Pop Preset"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'FGameplayTag PresetTag = FGameplayTag::RequestGameplayTag(FName("Music.Preset.Forest"));\r\nMusicSubsystem->PopMusicPreset(PresetTag);\n'})}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"gameplaytag-based-control",children:"GameplayTag-Based Control"}),"\n",(0,a.jsx)(s.h3,{id:"push-layer-by-tag",children:"Push Layer by Tag"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'void StartBossMusic()\r\n{\r\n    UERP_MusicSubsystem* MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    \r\n    if (MusicSubsystem)\r\n    {\r\n        FGameplayTag BossTag = FGameplayTag::RequestGameplayTag(FName("Music.Combat.Boss"));\r\n        MusicSubsystem->PushMusicLayerByTag(BossTag);\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(s.h3,{id:"pop-layer-by-tag",children:"Pop Layer by Tag"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'FGameplayTag BossTag = FGameplayTag::RequestGameplayTag(FName("Music.Combat.Boss"));\r\nMusicSubsystem->PopMusicLayerByTag(BossTag);\n'})}),"\n",(0,a.jsx)(s.h3,{id:"check-if-layer-is-active",children:"Check if Layer is Active"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'bool bIsBossMusicPlaying = MusicSubsystem->IsLayerActiveByTag(BossTag);\r\nif (bIsBossMusicPlaying)\r\n{\r\n    UE_LOG(LogTemp, Warning, TEXT("Boss music is currently playing"));\r\n}\n'})}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"stingers-one-shot-audio",children:"Stingers (One-Shot Audio)"}),"\n",(0,a.jsx)(s.h3,{id:"play-a-stinger-immediate",children:"Play a Stinger (Immediate)"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'void PlayDeathStinger()\r\n{\r\n    UERP_MusicSubsystem* MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    \r\n    if (MusicSubsystem)\r\n    {\r\n        USoundBase* DeathSound = LoadObject<USoundBase>(nullptr, TEXT("/Game/Audio/Stingers/Death_Sting"));\r\n        \r\n        MusicSubsystem->PlayStinger(\r\n            DeathSound,\r\n            true,   // bDuckMusic\r\n            0.3f,   // DuckVolume\r\n            0.2f,   // DuckFadeTime\r\n            0.5f,   // RestoreFadeTime\r\n            ERP_EQuantization::None  // Play immediately\r\n        );\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(s.h3,{id:"play-quantized-stinger",children:"Play Quantized Stinger"}),"\n",(0,a.jsx)(s.p,{children:"Play a stinger synchronized to the current music beat:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'void PlayQuantizedStinger()\r\n{\r\n    UERP_MusicSubsystem* MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    \r\n    if (MusicSubsystem)\r\n    {\r\n        USoundBase* StingerSound = LoadObject<USoundBase>(nullptr, TEXT("/Game/Audio/Stingers/PowerUp"));\r\n        \r\n        MusicSubsystem->PlayStinger(\r\n            StingerSound,\r\n            true,   // bDuckMusic\r\n            0.3f,   // DuckVolume\r\n            0.2f,   // DuckFadeTime\r\n            0.5f,   // RestoreFadeTime\r\n            ERP_EQuantization::Beat  // Wait for next beat\r\n        );\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(s.h3,{id:"play-stinger-with-full-parameters",children:"Play Stinger with Full Parameters"}),"\n",(0,a.jsx)(s.p,{children:"Pass all parameters directly for full control:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'void PlayCustomStinger()\r\n{\r\n    UERP_MusicSubsystem* MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    \r\n    if (MusicSubsystem)\r\n    {\r\n        USoundBase* VictoryStinger = LoadObject<USoundBase>(nullptr, TEXT("/Game/Audio/Stingers/Victory"));\r\n        \r\n        MusicSubsystem->PlayStinger(\r\n            VictoryStinger,\r\n            true,   // bDuckMusic\r\n            0.2f,   // DuckVolume\r\n            0.3f,   // DuckFadeTime\r\n            1.0f,   // RestoreFadeTime\r\n            ERP_EQuantization::Bar\r\n        );\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(s.h3,{id:"play-stinger-at-location-3d-spatial-audio",children:"Play Stinger at Location (3D Spatial Audio)"}),"\n",(0,a.jsx)(s.p,{children:"Play a stinger at a specific world location with spatial attenuation:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'void PlayExplosionStinger(FVector ExplosionLocation)\r\n{\r\n    UERP_MusicSubsystem* MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    \r\n    if (MusicSubsystem)\r\n    {\r\n        USoundBase* ExplosionStinger = LoadObject<USoundBase>(nullptr, TEXT("/Game/Audio/Stingers/Explosion_Musical"));\r\n        \r\n        MusicSubsystem->PlayStingerAtLocation(\r\n            ExplosionStinger,\r\n            ExplosionLocation,\r\n            1.0f,    // VolumeMultiplier\r\n            1.0f,    // PitchMultiplier\r\n            500.0f,  // AttenuationStartDistance (units)\r\n            true,    // bDuckMusic\r\n            0.3f,    // DuckVolume\r\n            0.2f,    // DuckFadeTime\r\n            0.5f,    // RestoreFadeTime\r\n            ERP_EQuantization::Beat  // Quantize to next beat\r\n        );\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Use Cases:"})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Combat impact sounds with musical stingers"}),"\n",(0,a.jsx)(s.li,{children:"Environmental events tied to 3D space"}),"\n",(0,a.jsx)(s.li,{children:"Explosions or magical effects that affect music"}),"\n",(0,a.jsx)(s.li,{children:"Localized audio accents in open worlds"}),"\n"]}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"audio-ducking",children:"Audio Ducking"}),"\n",(0,a.jsx)(s.p,{children:"Temporarily lower music volume for important audio (dialogue, SFX, narration):"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:"void PlayDialogue(UAudioComponent* DialogueAudioComponent)\r\n{\r\n    UERP_MusicSubsystem* MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    \r\n    if (MusicSubsystem)\r\n    {\r\n        MusicSubsystem->EnableAudioDucking(\r\n            DialogueAudioComponent,\r\n            0.3f,   // Duck to 30% volume\r\n            2.0f,   // Fade down over 2 seconds\r\n            1.5f    // Fade back up over 1.5 seconds\r\n        );\r\n    }\r\n}\n"})}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"quartz-clock-synchronization",children:"Quartz Clock Synchronization"}),"\n",(0,a.jsx)(s.h3,{id:"set-bpm",children:"Set BPM"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:"void SetMusicTempo(float NewBPM)\r\n{\r\n    UERP_MusicSubsystem* MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    \r\n    if (MusicSubsystem)\r\n    {\r\n        MusicSubsystem->SetBPM(NewBPM);\r\n    }\r\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"trigger-event-on-beat",children:"Trigger Event on Beat"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'void SetupBeatListener()\r\n{\r\n    UERP_MusicSubsystem* MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    \r\n    if (MusicSubsystem)\r\n    {\r\n        // Subscribe to beat events\r\n        FOnQuartzMetronomeEventBP BeatDelegate;\r\n        BeatDelegate.BindUFunction(this, FName("OnMusicBeat"));\r\n        \r\n        MusicSubsystem->SubscribeToBeatEvent(\r\n            EQuartzCommandQuantization::Beat,\r\n            BeatDelegate,\r\n            1.0f  // Every beat\r\n        );\r\n    }\r\n}\r\n\r\nUFUNCTION()\r\nvoid OnMusicBeat(FName ClockName, EQuartzCommandQuantization QuantizationType, int32 NumBars, int32 Beat, float BeatFraction)\r\n{\r\n    // React to music beat\r\n    UE_LOG(LogTemp, Log, TEXT("Music beat: %d"), Beat);\r\n}\n'})}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"creating-custom-music-state-interface",children:"Creating Custom Music State Interface"}),"\n",(0,a.jsxs)(s.p,{children:["If you want an actor to communicate its music state to ",(0,a.jsx)(s.code,{children:"MusicVolumes"}),":"]}),"\n",(0,a.jsx)(s.h3,{id:"1-implement-the-interface",children:"1. Implement the Interface"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'// MyCharacter.h\r\n#include "ERP_MusicStateInterface.h"\r\n\r\nUCLASS()\r\nclass AMyCharacter : public ACharacter, public IERP_MusicStateInterface\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    // IERP_MusicStateInterface implementation\r\n    virtual FGameplayTag GetMusicStateTag_Implementation() const override;\r\n\r\nprivate:\r\n    UPROPERTY(EditAnywhere, Category = "Music")\r\n    FGameplayTag CurrentMusicState;\r\n};\n'})}),"\n",(0,a.jsx)(s.h3,{id:"2-implement-the-function",children:"2. Implement the Function"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:"// MyCharacter.cpp\r\nFGameplayTag AMyCharacter::GetMusicStateTag_Implementation() const\r\n{\r\n    return CurrentMusicState;\r\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"3-update-state-dynamically",children:"3. Update State Dynamically"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'void AMyCharacter::EnterCombat()\r\n{\r\n    CurrentMusicState = FGameplayTag::RequestGameplayTag(FName("Music.Combat"));\r\n}\r\n\r\nvoid AMyCharacter::ExitCombat()\r\n{\r\n    CurrentMusicState = FGameplayTag::RequestGameplayTag(FName("Music.Exploration"));\r\n}\n'})}),"\n",(0,a.jsxs)(s.p,{children:["Now ",(0,a.jsx)(s.code,{children:"MusicVolumes"})," will automatically read this actor's state when it overlaps."]}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"querying-system-state",children:"Querying System State"}),"\n",(0,a.jsx)(s.h3,{id:"get-active-layers",children:"Get Active Layers"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'TArray<FName> ActiveLayers = MusicSubsystem->GetActiveMusicLayers();\r\n\r\nfor (const FName& LayerName : ActiveLayers)\r\n{\r\n    UE_LOG(LogTemp, Log, TEXT("Active layer: %s"), *LayerName.ToString());\r\n}\n'})}),"\n",(0,a.jsx)(s.h3,{id:"get-active-layer-count",children:"Get Active Layer Count"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'int32 LayerCount = MusicSubsystem->GetActiveMusicLayerCount();\r\nUE_LOG(LogTemp, Log, TEXT("Number of active layers: %d"), LayerCount);\n'})}),"\n",(0,a.jsx)(s.h3,{id:"check-if-specific-layer-is-active",children:"Check if Specific Layer is Active"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'bool bIsCombatActive = MusicSubsystem->IsLayerActive(FName("Combat"));\n'})}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"volume-control",children:"Volume Control"}),"\n",(0,a.jsx)(s.h3,{id:"set-master-volume",children:"Set Master Volume"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:"MusicSubsystem->SetMasterVolume(0.7f);  // 70% volume\n"})}),"\n",(0,a.jsx)(s.h3,{id:"get-master-volume",children:"Get Master Volume"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:"float CurrentVolume = MusicSubsystem->GetMasterVolume();\n"})}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"example-complete-combat-system-integration",children:"Example: Complete Combat System Integration"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'// CombatManager.h\r\nUCLASS()\r\nclass ACombatManager : public AActor\r\n{\r\n    GENERATED_BODY()\r\n\r\npublic:\r\n    UFUNCTION()\r\n    void OnCombatStart();\r\n    \r\n    UFUNCTION()\r\n    void OnBossAppears();\r\n    \r\n    UFUNCTION()\r\n    void OnCombatEnd();\r\n\r\nprivate:\r\n    UPROPERTY()\r\n    UERP_MusicSubsystem* MusicSubsystem;\r\n};\r\n\r\n// CombatManager.cpp\r\nvoid ACombatManager::OnCombatStart()\r\n{\r\n    MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    \r\n    if (MusicSubsystem)\r\n    {\r\n        // Start combat music\r\n        FGameplayTag CombatTag = FGameplayTag::RequestGameplayTag(FName("Music.Combat.Normal"));\r\n        MusicSubsystem->PushMusicLayerByTag(CombatTag);\r\n        \r\n        // Set BPM for combat rhythm\r\n        MusicSubsystem->SetBPM(130.0f);\r\n    }\r\n}\r\n\r\nvoid ACombatManager::OnBossAppears()\r\n{\r\n    if (MusicSubsystem)\r\n    {\r\n        // Play dramatic stinger\r\n        USoundBase* BossStinger = LoadObject<USoundBase>(nullptr, TEXT("/Game/Audio/Stingers/Boss_Intro"));\r\n        MusicSubsystem->PlayStinger(BossStinger, 1.2f, 1.0f);\r\n        \r\n        // Transition to boss music on next bar\r\n        FGameplayTag BossTag = FGameplayTag::RequestGameplayTag(FName("Music.Combat.Boss"));\r\n        MusicSubsystem->PushMusicLayerByTag(BossTag);\r\n        \r\n        // Increase tempo\r\n        MusicSubsystem->SetBPM(150.0f);\r\n    }\r\n}\r\n\r\nvoid ACombatManager::OnCombatEnd()\r\n{\r\n    if (MusicSubsystem)\r\n    {\r\n        // Pop all combat layers\r\n        FGameplayTag CombatTag = FGameplayTag::RequestGameplayTag(FName("Music.Combat.Normal"));\r\n        FGameplayTag BossTag = FGameplayTag::RequestGameplayTag(FName("Music.Combat.Boss"));\r\n        \r\n        MusicSubsystem->PopMusicLayerByTag(BossTag);\r\n        MusicSubsystem->PopMusicLayerByTag(CombatTag);\r\n        \r\n        // Victory stinger\r\n        USoundBase* VictoryStinger = LoadObject<USoundBase>(nullptr, TEXT("/Game/Audio/Stingers/Victory"));\r\n        MusicSubsystem->PlayStinger(VictoryStinger, 1.0f, 1.0f);\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Cache Subsystem Reference:"})," Get it once in ",(0,a.jsx)(s.code,{children:"BeginPlay()"})," if using frequently"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Always Check Validity:"})," ",(0,a.jsx)(s.code,{children:"if (MusicSubsystem)"})," before every call"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Use GameplayTags for Scalability:"})," Easier to manage than hardcoded layer names"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Leverage Presets:"})," Define complex music states in Data Assets, apply them from code"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Use Quartz for Rhythm Games:"})," Beat synchronization is critical for musical gameplay"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Test in PIE with Multiple Clients:"})," Music subsystem is per-client (no replication)"]}),"\n"]}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"multiplayer-considerations",children:"Multiplayer Considerations"}),"\n",(0,a.jsxs)(s.p,{children:["Music playback is ",(0,a.jsx)(s.strong,{children:"client-side only"})," by default. Each client manages its own music independently."]}),"\n",(0,a.jsx)(s.p,{children:"If you need synchronized music events across clients:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-cpp",children:'// Server RPC to trigger music on all clients\r\nUFUNCTION(Server, Reliable)\r\nvoid Server_TriggerBossMusic();\r\n\r\nvoid AMyGameMode::Server_TriggerBossMusic_Implementation()\r\n{\r\n    Multicast_PlayBossMusic();\r\n}\r\n\r\nUFUNCTION(NetMulticast, Reliable)\r\nvoid Multicast_PlayBossMusic();\r\n\r\nvoid AMyGameMode::Multicast_PlayBossMusic_Implementation()\r\n{\r\n    UERP_MusicSubsystem* MusicSubsystem = GetWorld()->GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    \r\n    if (MusicSubsystem)\r\n    {\r\n        FGameplayTag BossTag = FGameplayTag::RequestGameplayTag(FName("Music.Combat.Boss"));\r\n        MusicSubsystem->PushMusicLayerByTag(BossTag);\r\n    }\r\n}\n'})}),"\n",(0,a.jsxs)(s.p,{children:["See ",(0,a.jsx)(s.a,{href:"/ElysMusicEngine/multiplayer",children:"Multiplayer Guide"})," for detailed networking patterns."]}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.a,{href:"API-Reference",children:"API Reference"})," - Complete function list with Blueprint examples"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.a,{href:"user-guide",children:"User Guide"})," - Core concepts and workflows"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.a,{href:"advanced",children:"Advanced Features"})," - MetaSound, Quartz, GameplayTags"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.a,{href:"multiplayer",children:"Multiplayer"})," - Networking considerations"]}),"\n"]})]})}function d(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},8453(e,s,n){n.d(s,{R:()=>t,x:()=>c});var r=n(6540);const a={},i=r.createContext(a);function t(e){const s=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);