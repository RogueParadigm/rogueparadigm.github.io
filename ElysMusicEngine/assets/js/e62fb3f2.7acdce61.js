"use strict";(globalThis.webpackChunkelysmusicengine_docs=globalThis.webpackChunkelysmusicengine_docs||[]).push([[839],{9781(n,e,r){r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"examples","title":"Code Examples","description":"Copy-paste ready examples for common music engine scenarios.","source":"@site/../Documentation/Examples.md","sourceDirName":".","slug":"/examples","permalink":"/ElysMusicEngine/examples","draft":false,"unlisted":false,"editUrl":"https://github.com/RogueParadigm/ElysMusicEngine/tree/main/Documentation/../Documentation/Examples.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"examples","title":"Code Examples","sidebar_position":6}}');var s=r(4848),t=r(8453);const a={id:"examples",title:"Code Examples",sidebar_position:6},o="Code Examples",l={},c=[{value:"Stinger Handle Control",id:"stinger-handle-control",level:2},{value:"Example 1: Play and Control a Stinger",id:"example-1-play-and-control-a-stinger",level:3},{value:"Example 2: Looping Stinger with Loop Events",id:"example-2-looping-stinger-with-loop-events",level:3},{value:"Example 3: Dynamic Volume Control During Playback",id:"example-3-dynamic-volume-control-during-playback",level:3},{value:"Example 4: 3D Positioned Stinger (Synchronized)",id:"example-4-3d-positioned-stinger-synchronized",level:3},{value:"Example 5: Stinger Queue (Play Multiple Sequentially)",id:"example-5-stinger-queue-play-multiple-sequentially",level:3},{value:"Layer Management",id:"layer-management",level:2},{value:"Example: Boss Phase Music",id:"example-boss-phase-music",level:3},{value:"Audio Ducking",id:"audio-ducking",level:2},{value:"Example: Dialogue Ducking",id:"example-dialogue-ducking",level:3},{value:"Multiplayer Network Sync",id:"multiplayer-network-sync",level:2},{value:"Example: Synchronized Boss Music Across Clients",id:"example-synchronized-boss-music-across-clients",level:3},{value:"Advanced: Quartz Integration",id:"advanced-quartz-integration",level:2},{value:"Example: Beat-Synced Stinger",id:"example-beat-synced-stinger",level:3}];function u(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"code-examples",children:"Code Examples"})}),"\n",(0,s.jsx)(e.p,{children:"Copy-paste ready examples for common music engine scenarios."}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"stinger-handle-control",children:"Stinger Handle Control"}),"\n",(0,s.jsx)(e.h3,{id:"example-1-play-and-control-a-stinger",children:"Example 1: Play and Control a Stinger"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Scenario:"})," Play a stinger when the player is hit, allow pausing/resuming, and track when it finishes."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Blueprint:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'Event Character Takes Damage\r\n    \u2193\r\nPlay Stinger With Handle\r\n    \u251c\u2500 Stinger Sound: HitSound_Stinger\r\n    \u251c\u2500 Duck Music: true\r\n    \u2514\u2500 (store result) \u2192 HitStingerHandle\r\n    \u2193\r\nWait 1 second\r\n    \u2193\r\nIs Stinger Playing (HitStingerHandle) \u2192 bIsPlaying\r\n    \u251c\u2500 If True:\r\n    \u2502   \u2193\r\n    \u2502   Pause Stinger (HitStingerHandle)\r\n    \u2502   \u2193\r\n    \u2502   Wait 2 seconds\r\n    \u2502   \u2193\r\n    \u2502   Resume Stinger (HitStingerHandle)\r\n    \u2502\r\n    \u2514\u2500 If False: (already finished)\r\n        \u2193\r\n        Log "Stinger already finished"\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"C++:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"void AMyCharacter::TakeDamage(float Damage)\r\n{\r\n    // Play stinger and store handle\r\n    UERP_MusicSubsystem* MusicSys = GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    if (MusicSys)\r\n    {\r\n        HitStingerHandle = MusicSys->PlayStingerWithHandle(\r\n            HitStingerSound,\r\n            true,  // bDuckMusic\r\n            0.3f,  // DuckVolume\r\n            0.2f,  // DuckFadeTime\r\n            0.5f   // RestoreFadeTime\r\n        );\r\n\r\n        // Later: check if still playing\r\n        if (MusicSys->IsStingerPlaying(HitStingerHandle))\r\n        {\r\n            MusicSys->PauseStinger(HitStingerHandle);\r\n            // ... and resume later\r\n        }\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"example-2-looping-stinger-with-loop-events",children:"Example 2: Looping Stinger with Loop Events"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Scenario:"})," Play a loop stinger 3 times, reacting each time a loop completes."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Blueprint:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'Event BeginPlay\r\n    \u2193\r\nCreate FERP_EnhancedStingerParams struct\r\n    \u251c\u2500 Stinger Sound: LoopSound\r\n    \u251c\u2500 bLoop: true\r\n    \u251c\u2500 Loop Count: 3\r\n    \u251c\u2500 Loop Delay: 0.2\r\n    \u2514\u2500 (set other params)\r\n    \u2193\r\nPlay Stinger Enhanced\r\n    \u251c\u2500 Params: [from above]\r\n    \u2514\u2500 (store result) \u2192 LoopStingerHandle\r\n    \u2193\r\nBind Event to On Stinger Loop Completed\r\n    \u2193\r\n[Event] On Stinger Loop Completed\r\n    \u251c\u2500 Handle == LoopStingerHandle ?\r\n    \u2502   \u251c\u2500 Yes: Show HUD notification "Loop X complete"\r\n    \u2502   \u2502   (Loop Index = 0, 1, 2, then OnStingerCompleted)\r\n    \u2502   \u2514\u2500 No: Ignore\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"C++:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:'void AMyCharacter::PlayLoopingStinger()\r\n{\r\n    UERP_MusicSubsystem* MusicSys = GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    if (!MusicSys) return;\r\n\r\n    // Create params\r\n    FERP_EnhancedStingerParams Params;\r\n    Params.StingerSound = TSoftObjectPtr<USoundBase>(FSoftObjectPath(TEXT("/Game/Audio/Stingers/Loop_Stinger")));\r\n    Params.bDuckMusic = true;\r\n    Params.DuckVolume = 0.3f;\r\n    Params.bLoop = true;\r\n    Params.LoopCount = 3;\r\n    Params.LoopDelay = 0.2f;\r\n\r\n    // Play and store handle\r\n    LoopStingerHandle = MusicSys->PlayStingerEnhanced(Params);\r\n\r\n    // Bind to loop completed event\r\n    MusicSys->OnStingerLoopCompleted.AddDynamic(this, &AMyCharacter::OnLoopStingerCompleted);\r\n}\r\n\r\nvoid AMyCharacter::OnLoopStingerCompleted(FERP_StingerHandle Handle, int32 LoopIndex)\r\n{\r\n    if (Handle == LoopStingerHandle)\r\n    {\r\n        UE_LOG(LogTemp, Warning, TEXT("Loop stinger iteration %d completed"), LoopIndex);\r\n        // Show HUD, play effect, etc.\r\n    }\r\n}\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"example-3-dynamic-volume-control-during-playback",children:"Example 3: Dynamic Volume Control During Playback"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Scenario:"})," Play a stinger and gradually decrease its volume while keeping music at normal level."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Blueprint:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"Event BeginPlay\r\n    \u2193\r\nPlay Stinger With Handle\r\n    \u251c\u2500 Stinger Sound: FadeStinger\r\n    \u251c\u2500 Duck Music: false  \u2190 Don't duck music\r\n    \u2514\u2500 (store) \u2192 MyStinger\r\n    \u2193\r\nCreate Timeline (0 to 2 seconds)\r\n    \u2502\r\n    \u2514\u2500 [At each frame]:\r\n        \u251c\u2500 Map time (0.0 \u2192 1.0) to volume (1.0 \u2192 0.0)\r\n        \u251c\u2500 Set Stinger Volume\r\n        \u2502   \u251c\u2500 Handle: MyStinger\r\n        \u2502   \u251c\u2500 Volume: [mapped value]\r\n        \u2502   \u2514\u2500 Fade Time: 0.0 (no fade, immediate)\r\n        \u2514\u2500 [Timeline finished]:\r\n            \u2514\u2500 Stop Stinger (MyStinger)\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"C++:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"void AMyCharacter::PlayFadingStinger()\r\n{\r\n    UERP_MusicSubsystem* MusicSys = GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    if (!MusicSys) return;\r\n\r\n    FadingStingerHandle = MusicSys->PlayStingerWithHandle(\r\n        FadeStingerSound,\r\n        false,  // Don't duck music\r\n        0.0f, 0.0f, 0.0f\r\n    );\r\n\r\n    // Start fade-out using Quartz clock\r\n    if (MusicSys->IsClockRunning())\r\n    {\r\n        // Quantized fade\r\n        GetWorld()->GetTimerManager().SetTimer(\r\n            FadingStingerTimerHandle,\r\n            [this, MusicSys]()\r\n            {\r\n                // Gradually reduce volume\r\n                static float Volume = 1.0f;\r\n                Volume -= 0.1f;\r\n\r\n                if (Volume <= 0.0f)\r\n                {\r\n                    MusicSys->StopStinger(FadingStingerHandle);\r\n                    Volume = 1.0f;\r\n                    GetWorld()->GetTimerManager().ClearTimer(FadingStingerTimerHandle);\r\n                }\r\n                else\r\n                {\r\n                    MusicSys->SetStingerVolume(FadingStingerHandle, Volume, 0.1f);\r\n                }\r\n            },\r\n            0.1f,  // Every 0.1 seconds\r\n            true   // Loop\r\n        );\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"example-4-3d-positioned-stinger-synchronized",children:"Example 4: 3D Positioned Stinger (Synchronized)"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Scenario:"})," Play explosion stingers at multiple locations, synchronized across networked clients."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Blueprint:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"Event Server_ExplosionAtLocation (Server RPC)\r\n    \u251c\u2500 ExplosionLocation (vector)\r\n    \u2514\u2500 ExplosionID (int)\r\n    \u2193\r\nCreate FERP_EnhancedStingerParams\r\n    \u251c\u2500 Stinger Sound: Explosion_Musical\r\n    \u251c\u2500 Location: ExplosionLocation\r\n    \u251c\u2500 Volume Multiplier: 1.0\r\n    \u251c\u2500 Pitch Multiplier: 1.0 + (Random -0.1 to 0.1)  \u2190 Variation\r\n    \u251c\u2500 Attenuation Start Distance: 2000.0\r\n    \u251c\u2500 Sync Mode: Synchronized3D\r\n    \u2514\u2500 (other params)\r\n    \u2193\r\nGet or Create Sync Component\r\n    \u2193\r\nSync Play Stinger (params)\r\n    \u2514\u2500 (returns handle)\r\n    \u2193\r\nStore handle indexed by ExplosionID\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"C++:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:'void AExplosionManager::Server_DetonateExplosion_Implementation(FVector Location, int32 ExplosionID)\r\n{\r\n    UERP_MusicSubsystem* MusicSys = GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    UERP_MusicSyncComponent* SyncComp = MusicSys->GetOrCreateSyncComponent();\r\n\r\n    if (!SyncComp) return;\r\n\r\n    // Create params for positioned stinger\r\n    FERP_EnhancedStingerParams Params;\r\n    Params.StingerSound = TSoftObjectPtr<USoundBase>(FSoftObjectPath(TEXT("/Game/Audio/Stingers/Explosion")));\r\n    Params.Location = Location;\r\n    Params.VolumeMultiplier = 1.0f;\r\n    Params.PitchMultiplier = 1.0f + FMath::RandRange(-0.1f, 0.1f);\r\n    Params.AttenuationStartDistance = 2000.0f;\r\n    Params.SyncMode = ERP_EStingerSyncMode::Synchronized3D;  // All clients hear it\r\n    Params.bDuckMusic = true;\r\n\r\n    // Play synchronized\r\n    FERP_StingerHandle Handle = SyncComp->SyncPlayStinger(Params);\r\n\r\n    // Track by ID\r\n    ActiveExplosionStingers.Add(ExplosionID, Handle);\r\n\r\n    // Later: when explosion ends\r\n    // SyncComp->SyncStopStinger(Handle);\r\n}\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"example-5-stinger-queue-play-multiple-sequentially",children:"Example 5: Stinger Queue (Play Multiple Sequentially)"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Scenario:"})," Play multiple stingers in sequence, one after another."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Blueprint:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"Event BeginPlay\r\n    \u251c\u2500 Create array: StingerQueue = [Stinger1, Stinger2, Stinger3]\r\n    \u251c\u2500 CurrentQueueIndex = 0\r\n    \u2514\u2500 Play next stinger from queue\r\n        \u2193\r\n        [Bind] On Stinger Completed\r\n            \u2193\r\n            [Event] On Stinger Completed\r\n                \u251c\u2500 Increment CurrentQueueIndex\r\n                \u251c\u2500 If more stingers: Play next stinger\r\n                \u2514\u2500 If done: Stop queue\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"C++:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:'void AMusicalSequencer::PlayStingerQueue(const TArray<USoundBase*>& Stingers)\r\n{\r\n    StingerQueue = Stingers;\r\n    CurrentStingerIndex = 0;\r\n\r\n    UERP_MusicSubsystem* MusicSys = GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    if (MusicSys)\r\n    {\r\n        MusicSys->OnStingerCompleted.AddDynamic(this, &AMusicalSequencer::OnQueueStingerCompleted);\r\n        PlayNextStinger();\r\n    }\r\n}\r\n\r\nvoid AMusicalSequencer::PlayNextStinger()\r\n{\r\n    if (CurrentStingerIndex >= StingerQueue.Num())\r\n    {\r\n        UE_LOG(LogTemp, Log, TEXT("Stinger queue completed"));\r\n        return;\r\n    }\r\n\r\n    UERP_MusicSubsystem* MusicSys = GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    if (MusicSys)\r\n    {\r\n        CurrentStingerHandle = MusicSys->PlayStingerWithHandle(\r\n            StingerQueue[CurrentStingerIndex],\r\n            true,  // Duck\r\n            0.3f, 0.2f, 0.5f\r\n        );\r\n    }\r\n}\r\n\r\nvoid AMusicalSequencer::OnQueueStingerCompleted(FERP_StingerHandle Handle)\r\n{\r\n    if (Handle == CurrentStingerHandle)\r\n    {\r\n        CurrentStingerIndex++;\r\n        PlayNextStinger();\r\n    }\r\n}\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"layer-management",children:"Layer Management"}),"\n",(0,s.jsx)(e.h3,{id:"example-boss-phase-music",children:"Example: Boss Phase Music"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Scenario:"})," Boss has 3 phases with different music. Transition between phases at bar boundaries."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Blueprint:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"Event Boss Phase 1 Starts\r\n    \u251c\u2500 Initialize Quartz Clock (120 BPM, 4/4)\r\n    \u251c\u2500 Start Music Clock\r\n    \u2514\u2500 Push Music Layer\r\n        \u251c\u2500 Layer: BossPhase1_Music\r\n        \u2514\u2500 Quantization: Bar\r\n    \u2193\r\n[At 50% Health] Event Boss Phase 2\r\n    \u251c\u2500 Pop Music Layer\r\n    \u2502   \u251c\u2500 Layer Name: BossPhase1_Music\r\n    \u2502   \u2514\u2500 Quantization: Bar  \u2190 Wait for bar boundary\r\n    \u2514\u2500 Push Music Layer\r\n        \u251c\u2500 Layer: BossPhase2_Music\r\n        \u2514\u2500 Quantization: Bar\r\n    \u2193\r\n[At 25% Health] Event Boss Phase 3\r\n    \u251c\u2500 (Same transition pattern)\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"C++:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:'void ABossCharacter::UpdateBossPhase()\r\n{\r\n    float HealthPercent = CurrentHealth / MaxHealth;\r\n\r\n    UERP_MusicSubsystem* MusicSys = GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    if (!MusicSys) return;\r\n\r\n    if (HealthPercent <= 0.50f && CurrentPhase == 1)\r\n    {\r\n        CurrentPhase = 2;\r\n        MusicSys->PopMusicLayer(FName(TEXT("BossPhase1")), ERP_EQuantization::Bar);\r\n\r\n        FERP_MusicLayer Phase2Layer;\r\n        Phase2Layer.LayerName = FName(TEXT("BossPhase2"));\r\n        Phase2Layer.Music = TSoftObjectPtr<USoundBase>(FSoftObjectPath(TEXT("/Game/Audio/Music/BossPhase2")));\r\n        Phase2Layer.Priority = 50;\r\n        Phase2Layer.LayerMode = ERP_EMusicLayerMode::Replace;\r\n\r\n        MusicSys->PushMusicLayer(Phase2Layer, ERP_EQuantization::Bar);\r\n    }\r\n}\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"audio-ducking",children:"Audio Ducking"}),"\n",(0,s.jsx)(e.h3,{id:"example-dialogue-ducking",children:"Example: Dialogue Ducking"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Scenario:"})," Play dialogue and automatically duck music during playback."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Blueprint:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"Event Play Dialogue\r\n    \u2193\r\nSpawn Sound 2D\r\n    \u251c\u2500 Sound: Character_Dialogue\r\n    \u251c\u2500 Volume: 1.0\r\n    \u2514\u2500 (returns AudioComponent)\r\n    \u2193 [Result]\r\nEnable Audio Ducking\r\n    \u251c\u2500 Audio Component: [from above]\r\n    \u251c\u2500 Duck Volume: 0.4\r\n    \u2514\u2500 Fade Time: 0.3\r\n    \u2193\r\n(Music auto-restores when dialogue finishes)\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"C++:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"void ADialogueManager::PlayCharacterLine(const FString& DialogueText, USoundBase* DialogueAudio)\r\n{\r\n    // Spawn audio\r\n    UAudioComponent* DialogueComponent = UGameplayStatics::SpawnSound2D(\r\n        GetWorld(),\r\n        DialogueAudio,\r\n        1.0f,  // Volume\r\n        1.0f,  // Pitch\r\n        0.0f,  // Start time\r\n        nullptr,  // Owner\r\n        nullptr,  // Instigator\r\n        true   // bFollow\r\n    );\r\n\r\n    // Auto-duck music\r\n    UERP_MusicSubsystem* MusicSys = GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    if (MusicSys && DialogueComponent)\r\n    {\r\n        MusicSys->EnableAudioDucking(DialogueComponent, 0.4f, 0.3f);\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"multiplayer-network-sync",children:"Multiplayer Network Sync"}),"\n",(0,s.jsx)(e.h3,{id:"example-synchronized-boss-music-across-clients",children:"Example: Synchronized Boss Music Across Clients"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Scenario:"})," Multiple players fight a boss. Boss music syncs across all clients, and late-joiners sync to the current playback point."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Blueprint (Server Event):"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'Event Boss Combat Started (Authority check)\r\n    \u2193\r\nIf Has Authority:\r\n    \u251c\u2500 Get or Create Sync Component\r\n    \u2514\u2500 Create Music Layer\r\n        \u251c\u2500 Name: "BossCombat"\r\n        \u251c\u2500 Music: BossCombat_Music\r\n        \u2514\u2500 Priority: 100\r\n        \u2193\r\n    Sync Push Music Layer\r\n        \u251c\u2500 Layer: [from above]\r\n        \u251c\u2500 Quantization: Bar\r\n        \u2514\u2500 (syncs to all clients)\r\n    \u2193\r\n(Later) Boss Defeated (Multicast)\r\n    \u251c\u2500 Multicast: Remove Boss Music\r\n    \u2514\u2500 Sync Pop Music Layer\r\n        \u251c\u2500 Layer Name: "BossCombat"\r\n        \u2514\u2500 Quantization: Bar\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"C++:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:'void ABossAIController::StartBossCombat()\r\n{\r\n    if (!HasAuthority()) return;\r\n\r\n    UERP_MusicSubsystem* MusicSys = GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    UERP_MusicSyncComponent* SyncComp = MusicSys->GetOrCreateSyncComponent();\r\n\r\n    if (!SyncComp) return;\r\n\r\n    // Create synced layer\r\n    FERP_MusicLayer BossLayer;\r\n    BossLayer.LayerName = FName(TEXT("BossCombat"));\r\n    BossLayer.Music = BossCombatMusic;\r\n    BossLayer.Priority = 100;\r\n    BossLayer.LayerMode = ERP_EMusicLayerMode::Replace;\r\n    BossLayer.FadeInTime = 1.0f;\r\n\r\n    // Sync to all clients at bar boundary\r\n    SyncComp->SyncPushMusicLayer(BossLayer, ERP_EQuantization::Bar);\r\n\r\n    UE_LOG(LogTemp, Log, TEXT("Boss combat music synced to all clients"));\r\n}\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"advanced-quartz-integration",children:"Advanced: Quartz Integration"}),"\n",(0,s.jsx)(e.h3,{id:"example-beat-synced-stinger",children:"Example: Beat-Synced Stinger"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Scenario:"})," Play a stinger synchronized to the next beat of the music."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Blueprint:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"Event OnPlayerPickup\r\n    \u2193\r\nGet Music Subsystem\r\n    \u2193\r\n[Check] Is Clock Running?\r\n    \u251c\u2500 Yes:\r\n    \u2502   \u251c\u2500 Play Stinger Quantized\r\n    \u2502   \u2502   \u251c\u2500 Stinger Sound: Pickup_Chime\r\n    \u2502   \u2502   \u251c\u2500 Quantization: Beat  \u2190 Wait for next beat\r\n    \u2502   \u2502   \u2514\u2500 Duck Music: false\r\n    \u2502   \u2514\u2500 (music and stinger sync perfectly)\r\n    \u2502\r\n    \u2514\u2500 No:\r\n        \u2514\u2500 Play Stinger  (immediate, no sync)\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"C++:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"void APickupActor::OnPickupByCharacter(ACharacter* Character)\r\n{\r\n    UERP_MusicSubsystem* MusicSys = GetGameInstance()->GetSubsystem<UERP_MusicSubsystem>();\r\n    if (!MusicSys) return;\r\n\r\n    if (MusicSys->IsClockRunning())\r\n    {\r\n        // Play synchronized to next beat\r\n        MusicSys->PlayStingerQuantized(\r\n            PickupSound,\r\n            ERP_EQuantization::Beat,\r\n            false  // Don't duck\r\n        );\r\n    }\r\n    else\r\n    {\r\n        // Fall back to immediate playback\r\n        MusicSys->PlayStingerWithHandle(PickupSound, false, 0.0f, 0.0f, 0.0f);\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(e.hr,{})]})}function d(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(u,{...n})}):u(n)}},8453(n,e,r){r.d(e,{R:()=>a,x:()=>o});var i=r(6540);const s={},t=i.createContext(s);function a(n){const e=i.useContext(t);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);